import{c as $,r as p,j as e,F as ne,C as Ie,T as Fe,G as te,a as ze,R as Ue,b as Pe}from"./globals-Dv-pJP64.js";const Re=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],fe=$("bell",Re);const Oe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],me=$("chart-column",Oe);const Ge=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],qe=$("chevron-down",Ge);const Ye=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],We=$("chevron-up",Ye);const Be=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],re=$("circle-check",Be);const Ve=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Qe=$("circle-question-mark",Ve);const Ke=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Je=$("clock",Ke);const Ze=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Xe=$("copy",Ze);const et=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],tt=$("crown",et);const st=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],at=$("dumbbell",st);const rt=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],de=$("external-link",rt);const nt=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]],ge=$("file-chart-column-increasing",nt);const ot=[["path",{d:"M4 12.15V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-3.35",key:"1wthlu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 16-3 3 3 3",key:"331omg"}],["path",{d:"m9 22 3-3-3-3",key:"lsp7cz"}]],it=$("file-code-corner",ot);const lt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],ct=$("frown",lt);const dt=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],mt=$("key",dt);const xt=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ut=$("lightbulb",xt);const ht=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],se=$("loader-circle",ht);const pt=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],ft=$("medal",pt);const gt=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],bt=$("party-popper",gt);const yt=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],vt=$("refresh-cw",yt);const jt=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],ue=$("rocket",jt);const Nt=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],wt=$("scale",Nt);const kt=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],St=$("shield",kt);const Ct=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],De=$("sparkles",Ct);const Mt=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],Dt=$("sprout",Mt);const Tt=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],be=$("star",Tt);const Ht=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Te=$("target",Ht);const _t=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],$t=$("trending-up",_t);const Et=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],he=$("triangle-alert",Et);const At=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Lt=$("user-plus",At);const It=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ft=$("users",It);const zt=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],He=$("x",zt);const Ut=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],oe=$("zap",Ut);function Pt({onFriendAdded:t}){const[s,n]=p.useState(""),[r,a]=p.useState(!1),[l,d]=p.useState(""),[f,c]=p.useState(""),v=async g=>{if(g.preventDefault(),!s.trim()){d("Please enter a username");return}a(!0),d(""),c("");try{const S=await chrome.runtime.sendMessage({type:"ADD_FRIEND",username:s.trim()});S.success?(c(`${s} added successfully!`),n(""),t(),setTimeout(()=>{c("")},1500)):d(S.error||"Failed to add friend")}catch(S){console.error("Error adding friend:",S),d("Failed to add friend. Please try again.")}finally{a(!1)}};return e.jsxs("div",{className:"p-4 bg-surface/50 border-b border-surfaceHover backdrop-blur-sm",children:[e.jsxs("form",{onSubmit:v,className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-muted text-lg group-focus-within:text-primary transition-colors",children:"üë§"}),e.jsx("input",{type:"text",value:s,onChange:g=>n(g.target.value),placeholder:"Add friend...",disabled:r,className:"w-full px-4 py-3 pl-11 bg-background border-2 border-surfaceHover rounded-3xl focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary disabled:opacity-50 transition-all duration-300 text-sm text-text-main placeholder-text-muted shadow-sm hover:border-primary/50"})]}),e.jsx("button",{type:"submit",disabled:r,className:"px-6 py-3 bg-primary hover:bg-primaryHover text-inverted font-bold rounded-3xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-primary/20 active:scale-95 text-sm",children:r?e.jsx(se,{className:"w-4 h-4 animate-spin"}):e.jsx(Lt,{className:"w-4 h-4"})})]}),l&&e.jsxs("div",{className:"mt-2 p-3 bg-red-500/10 rounded-2xl flex items-start gap-2 text-sm shadow-md border border-red-500/20 animate-shake",children:[e.jsx(he,{className:"w-4 h-4 text-red-400"}),e.jsx("p",{className:"text-red-400 flex-1",children:l})]}),f&&e.jsxs("div",{className:"mt-2 p-3 bg-secondary/10 rounded-2xl flex items-center gap-2 text-sm shadow-md border border-secondary/20 animate-fade-in",children:[e.jsx(re,{className:"w-4 h-4 text-secondary"}),e.jsx("p",{className:"text-secondary font-medium",children:f})]})]})}function Rt(){return e.jsxs("div",{className:"w-[400px] h-[600px] bg-gradient-to-br from-background via-background to-surface/30 flex flex-col items-center justify-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-30",children:[e.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-primary/20 rounded-full blur-3xl animate-float"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-secondary/20 rounded-full blur-3xl animate-float-delayed"})]}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[e.jsx("div",{className:"loader mb-8"}),e.jsx("h2",{className:"text-xl font-bold text-text-main mb-2 animate-fade-in",children:"Loading LeetStreak"}),e.jsx("p",{className:"text-sm text-text-muted animate-fade-in",style:{animationDelay:"0.15s"},children:"Fetching your coding journey..."})]}),e.jsx("style",{children:`
        .loader {
          width: 65px;
          height: 30px;
          position: relative;
        }
        .loader:before {
          content: "";
          position: absolute;
          border-radius: 50px;
          box-shadow: 0 0 0 3px inset var(--color-primary);
          animation: l3 0.75s infinite alternate;
        }
        @keyframes l3 {
          0% {
            inset: 0 35px 0 0;
          }
          50% {
            inset: 0 0 0 0;
          }
          100% {
            inset: 0 0 0 35px;
          }
        }
        @keyframes float {
          0%, 100% { transform: translate(0, 0) scale(1); }
          33% { transform: translate(30px, -30px) scale(1.1); }
          66% { transform: translate(-20px, 20px) scale(0.9); }
        }
        @keyframes float-delayed {
          0%, 100% { transform: translate(0, 0) scale(1); }
          33% { transform: translate(-30px, 30px) scale(0.9); }
          66% { transform: translate(20px, -20px) scale(1.1); }
        }
        .animate-float {
          animation: float 8s ease-in-out infinite;
        }
        .animate-float-delayed {
          animation: float-delayed 8s ease-in-out infinite;
          animation-delay: -4s;
        }
      `})]})}const Ot=()=>{const t=["üéâ","‚≠ê","üî•","üéä","‚ú®","üí´"];return[...Array(50)].map((s,n)=>({id:n,emoji:t[Math.floor(Math.random()*t.length)],left:Math.random()*100,delay:Math.random()*.5,duration:2+Math.random()*2}))};function Gt({streak:t,onClose:s}){const[n,r]=p.useState(!0),a=p.useMemo(()=>Ot(),[]);p.useEffect(()=>{const f=setTimeout(()=>{r(!1),setTimeout(s,300)},4e3);return()=>clearTimeout(f)},[s]);const d=(f=>f===7?{emoji:"üî•",title:"Week Warrior!",message:"7 days of dedication!"}:f===30?{emoji:"üöÄ",title:"Month Master!",message:"30 days strong!"}:f===100?{emoji:"üíØ",title:"Century Club!",message:"100 days of excellence!"}:f===365?{emoji:"üëë",title:"Year Legend!",message:"A full year of coding!"}:{emoji:"‚≠ê",title:`${f} Day Streak!`,message:"Keep going!"})(t);return n?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:a.map(f=>e.jsx("div",{className:"absolute animate-confetti",style:{left:`${f.left}%`,top:"-10%",animationDelay:`${f.delay}s`,animationDuration:`${f.duration}s`},children:f.emoji},f.id))}),e.jsxs("div",{className:"relative bg-gradient-to-br from-primary via-accent to-secondary p-8 rounded-3xl shadow-2xl max-w-sm mx-4 animate-bounce-in text-center",children:[e.jsx("div",{className:"absolute inset-0 bg-surface/10 backdrop-blur-xl rounded-3xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"text-8xl mb-4 animate-pulse-slow",children:d.emoji}),e.jsx("h2",{className:"text-3xl font-black text-white mb-2 drop-shadow-lg",children:d.title}),e.jsx("p",{className:"text-lg text-white/90 mb-4",children:d.message}),e.jsx("div",{className:"text-6xl font-black text-white drop-shadow-2xl",children:t}),e.jsx("p",{className:"text-sm text-white/80 mt-2",children:"days streak"}),e.jsx("button",{onClick:()=>{r(!1),setTimeout(s,300)},className:"mt-6 px-6 py-2 bg-white text-primary font-bold rounded-full hover:scale-105 transition-transform shadow-lg",children:"Awesome! üéâ"})]})]})]}):null}const J={DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly"},qt=[{id:"daily_1",type:J.DAILY,title:"Solve 1 problem daily",target:1,icon:"üìÖ"},{id:"daily_3",type:J.DAILY,title:"Solve 3 problems daily",target:3,icon:"üî•"},{id:"weekly_10",type:J.WEEKLY,title:"Solve 10 problems this week",target:10,icon:"üìä"},{id:"weekly_20",type:J.WEEKLY,title:"Solve 20 problems this week",target:20,icon:"üí™"},{id:"monthly_50",type:J.MONTHLY,title:"Solve 50 problems this month",target:50,icon:"üéØ"},{id:"monthly_100",type:J.MONTHLY,title:"Solve 100 problems this month",target:100,icon:"üöÄ"}];async function Yt(){try{return(await chrome.storage.local.get(["activeGoals"])).activeGoals||[]}catch(t){return console.error("Error getting active goals:",t),[]}}async function ye(t){try{await chrome.storage.local.set({activeGoals:t})}catch(s){console.error("Error setting active goals:",s)}}async function ve(t,s,n){try{let r=0;const a=new Date;if(t.type===J.DAILY){const l=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())),d=Math.floor(l.getTime()/1e3).toString(),f=n;r=parseInt(f?.[d])||0,console.log("Daily goal progress:",{todayTimestamp:d,progress:r,calendarValue:f?.[d]})}else if(t.type===J.WEEKLY){const l=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())),d=l.getUTCDay(),f=d===0?6:d-1,c=new Date(Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()-f)),v=n;for(let g=0;g<7;g++){const S=new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()+g));if(S>l)break;const y=Math.floor(S.getTime()/1e3).toString();r+=parseInt(v?.[y])||0}console.log("Weekly goal progress:",r)}else if(t.type===J.MONTHLY){const l=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())),d=n,f=new Date(l.getUTCFullYear(),l.getUTCMonth()+1,0).getDate(),c=l.getUTCDate();for(let v=1;v<=Math.min(f,c);v++){const g=new Date(Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),v)),S=Math.floor(g.getTime()/1e3).toString();r+=parseInt(d?.[S])||0}console.log("Monthly goal progress:",r)}return{progress:r,target:t.target,percentage:Math.min(r/t.target*100,100),completed:r>=t.target}}catch(r){return console.error("Error calculating goal progress:",r),{progress:0,target:t.target,percentage:0,completed:!1}}}function Wt({userData:t}){const[s,n]=p.useState([]),[r,a]=p.useState({}),[l,d]=p.useState(!1);async function f(){const y=await Yt();if(n(y),t&&y.length>0){const i={};for(const x of y)i[x.id]=await ve(x,t.stats,t.submissionCalendar);a(i)}}async function c(){const y={};for(const i of s)y[i.id]=await ve(i,t.stats,t.submissionCalendar);a(y)}p.useEffect(()=>{f()},[]),p.useEffect(()=>{t&&s.length>0&&c()},[t?.stats?.total,t?.submissionCalendar,s]);async function v(y){const i=[...s,y];await ye(i),n(i),d(!1)}async function g(y){const i=s.filter(x=>x.id!==y);await ye(i),n(i)}const S=qt.filter(y=>!s.some(i=>i.id===y.id));return s.length===0&&!l?e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"üéØ"}),e.jsx("p",{className:"text-text-muted mb-4",children:"No goals set yet"}),e.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-primary hover:bg-primaryHover text-inverted rounded-lg font-semibold text-sm transition-colors",children:"Set Your First Goal"})]}):e.jsxs("div",{className:"space-y-3",children:[s.map(y=>{const i=r[y.id]||{progress:0,target:y.target,percentage:0,completed:!1};return e.jsxs("div",{className:`
              bg-surface border rounded-xl p-4 transition-all duration-300
              ${i.completed?"border-accent/50 bg-accent/5":"border-primary/30"}
            `,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"text-2xl",children:y.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-text-primary text-sm",children:y.title}),e.jsx("p",{className:"text-xs text-text-muted capitalize",children:y.type})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i.completed&&e.jsx("span",{className:"text-accent text-xl",children:"‚úì"}),e.jsx("button",{onClick:()=>g(y.id),className:"text-text-muted hover:text-red-500 transition-colors",title:"Remove goal",children:"‚úï"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Progress"}),e.jsxs("span",{className:"font-semibold text-text-primary",children:[i.progress," / ",i.target]})]}),e.jsx("div",{className:"h-2 bg-surfaceHover rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${i.completed?"bg-accent":"bg-primary"}`,style:{width:`${i.percentage}%`}})}),i.completed&&e.jsx("p",{className:"text-xs text-accent text-center font-medium mt-2",children:"üéä Goal achieved! Amazing work!"})]})]},y.id)}),l&&S.length>0&&e.jsxs("div",{className:"bg-surfaceHover border border-primary/30 rounded-xl p-4 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-text-primary text-sm",children:"Add New Goal"}),e.jsx("button",{onClick:()=>d(!1),className:"text-text-muted hover:text-text-primary transition-colors",children:"‚úï"})]}),e.jsx("div",{className:"space-y-2",children:S.map(y=>e.jsxs("button",{onClick:()=>v(y),className:"w-full text-left p-3 bg-surface hover:bg-surfaceHover border border-transparent hover:border-primary/30 rounded-lg transition-all duration-200 flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:y.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-text-primary",children:y.title}),e.jsx("p",{className:"text-xs text-text-muted capitalize",children:y.type})]}),e.jsx("span",{className:"text-xs text-primary",children:"Add ‚Üí"})]},y.id))})]}),!l&&S.length>0&&e.jsxs("button",{onClick:()=>d(!0),className:"w-full py-3 border-2 border-dashed border-primary/30 hover:border-primary/50 rounded-xl text-primary hover:bg-primary/5 transition-all duration-200 flex items-center justify-center gap-2 font-semibold text-sm",children:[e.jsx("span",{className:"text-lg",children:"+"}),e.jsx("span",{children:"Add Another Goal"})]}),s.length>0&&S.length===0&&e.jsx("div",{className:"bg-gradient-to-br from-accent/5 to-primary/5 border border-accent/20 rounded-xl p-4 text-center",children:e.jsx("p",{className:"text-xs text-text-muted",children:"üéâ You've added all available goals! Keep crushing them!"})})]})}function Bt(t){if(typeof t!="string")return!1;const s=/^ghp_[A-Za-z0-9]{36}$/,n=/^github_pat_[A-Za-z0-9_]{82}$/;return s.test(t)||n.test(t)}const Vt="https://leetcode.com/graphql",Qt=`
  query questionOfToday {
    activeDailyCodingChallengeQuestion {
      date
      link
      question {
        questionId
        questionFrontendId
        title
        titleSlug
        difficulty
        likes
        dislikes
        topicTags {
          name
          slug
        }
      }
    }
  }
`;async function Kt(){try{const t=await fetch(Vt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:Qt})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();if(s.errors)throw console.error("GraphQL errors:",s.errors),new Error(s.errors[0]?.message||"GraphQL query failed");const n=s.data?.activeDailyCodingChallengeQuestion;if(!n)throw new Error("No daily question data received");return{date:n.date,link:`https://leetcode.com${n.link}`,questionId:n.question.questionFrontendId,title:n.question.title,titleSlug:n.question.titleSlug,difficulty:n.question.difficulty,likes:n.question.likes,dislikes:n.question.dislikes,topics:n.question.topicTags.map(r=>r.name)}}catch(t){return console.error("Error fetching daily question:",t),null}}function Jt(){const[t,s]=p.useState(null),[n,r]=p.useState(!0),[a,l]=p.useState(!1),d=async()=>{r(!0);const g=await Kt();s(g),r(!1)};p.useEffect(()=>{d()},[]);const f=g=>{switch(g?.toLowerCase()){case"easy":return{color:"text-leetcode-easy",bgLight:"bg-leetcode-easy/10",border:"border-leetcode-easy/30",badgeColor:"text-leetcode-easy bg-leetcode-easy/10 border-leetcode-easy/20",icon:"üü¢"};case"medium":return{color:"text-leetcode-medium",bgLight:"bg-leetcode-medium/10",border:"border-leetcode-medium/30",badgeColor:"text-leetcode-medium bg-leetcode-medium/10 border-leetcode-medium/20",icon:"üü°"};case"hard":return{color:"text-leetcode-hard",bgLight:"bg-leetcode-hard/10",border:"border-leetcode-hard/30",badgeColor:"text-leetcode-hard bg-leetcode-hard/10 border-leetcode-hard/20",icon:"üî¥"};default:return{color:"text-primary",bgLight:"bg-primary/5",border:"border-primary/20",badgeColor:"text-primary bg-primary/10 border-primary/20",icon:"‚ùì"}}},c=()=>{t?.link&&chrome.tabs.create({url:t.link})},v=t?f(t.difficulty):null;return n?e.jsxs("div",{className:"bg-gradient-to-r from-primary/5 to-accent/5 p-5 rounded-2xl border border-primary/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2.5 bg-primary/20 rounded-xl",children:e.jsx("span",{className:"text-lg",children:"‚ú®"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-sm text-text-primary",children:"Today's Challenge"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Fetching your daily problem..."})]})]}),e.jsx("div",{className:"relative w-full h-2 bg-surfaceHover rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-primary via-accent to-primary rounded-full",style:{animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite",width:"40%"}})})]}):t?e.jsxs("div",{className:`bg-gradient-to-r ${v.bgLight} to-accent/5 rounded-2xl border ${v.border} shadow-lg transition-all duration-300 overflow-hidden`,children:[e.jsx("div",{className:"p-4 border-b border-current border-opacity-10",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:`p-2.5 ${v.bgLight} rounded-xl`,children:e.jsx(oe,{className:`w-4 h-4 ${v.color}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-sm text-text-primary",children:"Today's Challenge"}),e.jsx("p",{className:"text-[9px] text-text-muted",children:new Date(t.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]})]}),e.jsxs("span",{className:`px-3 py-1.5 rounded-full text-[10px] font-bold border ${v.badgeColor}`,children:[v.icon," ",t.difficulty]})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("button",{onClick:()=>l(!a),className:"w-full text-left group transition-all duration-200",children:[e.jsxs("div",{className:"flex items-start gap-2.5 mb-3",children:[e.jsxs("span",{className:`font-bold text-xs mt-0.5 px-2 py-1 rounded-lg ${v.bgLight} ${v.color}`,children:["#",t.questionId]}),e.jsx("div",{className:"flex-1",children:e.jsx("h4",{className:"font-bold text-sm text-text-primary group-hover:text-primary transition-colors leading-snug",children:t.title})}),e.jsx("div",{className:`text-text-muted transition-transform ${a?"rotate-180":""}`,children:"‚ñº"})]}),t.topics&&t.topics.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[t.topics.slice(0,3).map((g,S)=>e.jsx("span",{className:`px-2 py-1 text-[9px] font-semibold rounded-lg border transition-colors ${a?v.bgLight:"bg-primary/10"} border-current border-opacity-20`,children:g},S)),t.topics.length>3&&e.jsxs("span",{className:"px-2 py-1 text-[9px] font-medium text-text-muted bg-surfaceHover rounded-lg",children:["+",t.topics.length-3]})]})]}),a&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-current border-opacity-10 space-y-3 animate-slide-up",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"bg-background/40 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-text-primary mb-1",children:"üëç"}),e.jsx("p",{className:"text-xs text-text-muted",children:"Helpful"}),e.jsxs("p",{className:"text-sm font-bold text-primary mt-1",children:[(t.likes/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{className:"bg-background/40 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-text-primary mb-1",children:"üëé"}),e.jsx("p",{className:"text-xs text-text-muted",children:"Unhelpful"}),e.jsx("p",{className:"text-sm font-bold text-accent mt-1",children:t.dislikes?.toLocaleString()||0})]})]}),e.jsxs("div",{className:`${v.bgLight} rounded-lg p-3 border ${v.border}`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"text-sm font-bold",children:"üìä Difficulty Details"})}),e.jsxs("div",{className:"space-y-1.5 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Level"}),e.jsx("span",{className:`font-bold ${v.color}`,children:t.difficulty})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Acceptance Rate"}),e.jsxs("span",{className:"font-bold text-text-primary",children:["~",Math.round(t.likes/(t.likes+t.dislikes)*100),"%"]})]})]})]}),e.jsx("button",{onClick:c,className:`w-full py-3 rounded-xl font-bold text-sm transition-all duration-200 flex items-center justify-center gap-2 ${v.color==="text-leetcode-easy"?"bg-leetcode-easy/20 text-leetcode-easy hover:bg-leetcode-easy/30":v.color==="text-leetcode-medium"?"bg-leetcode-medium/20 text-leetcode-medium hover:bg-leetcode-medium/30":v.color==="text-leetcode-hard"?"bg-leetcode-hard/20 text-leetcode-hard hover:bg-leetcode-hard/30":"bg-primary/20 text-primary hover:bg-primary/30"}`,children:"üöÄ Solve Now"})]}),!a&&e.jsxs("div",{className:"flex items-center justify-between text-[10px] text-text-muted pt-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-semibold",children:["üëç ",(t.likes/1e3).toFixed(1),"K"]}),e.jsx("span",{className:"text-text-muted/50",children:"‚Ä¢"}),e.jsxs("span",{className:"font-semibold",children:[t.topics?.length||0," topics"]})]}),e.jsx("span",{className:"text-primary font-bold group-hover:translate-x-1 transition-transform flex items-center gap-1",children:"View ‚Üí"})]})]})]}):e.jsxs("div",{className:"bg-gradient-to-br from-background to-zinc-900 p-5 rounded-2xl border border-zinc-800 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2.5 bg-orange-500/10 rounded-xl",children:e.jsx("span",{className:"text-lg",children:"‚ö†Ô∏è"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-text-primary",children:"Unable to Load"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Daily question unavailable"})]})]}),e.jsx("p",{className:"text-xs text-text-muted text-center py-3",children:"Check back later or try refreshing the extension"}),e.jsx("button",{onClick:d,className:"w-full mt-2 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-lg text-xs font-semibold transition-colors",children:"üîÑ Try Again"})]})}function Zt(){const[t,s]=p.useState([]),[n,r]=p.useState(""),[a,l]=p.useState(!1),d=async o=>{try{console.log("checkAndUpdateCompletedProblems called with:",o?.length,"problems");const u=await chrome.storage.local.get(["my_leetcode_username","friends_data"]),{my_leetcode_username:w}=u,C=u.friends_data||{};if(console.log("Username:",w,"Problems count:",o?.length),!w||!o||o.length===0){console.log("Missing username or problems list, skipping check");return}let b=C[w]||C[w.toLowerCase()];if(!b){console.log("No user data in friends_data, fetching stats...");const m=await chrome.runtime.sendMessage({type:"FETCH_STATS",forceRefresh:!0});if(!m.success||!m.friends){console.log("Failed to fetch stats or no friends data");return}if(b=m.friends[w]||m.friends[w.toLowerCase()],console.log("After fetch, found data:",!!b,"Looking for:",w,"Available keys:",Object.keys(m.friends||{})),!b){console.log("User data not found even after fetch");return}}console.log("Got user data, checking submissions...");const k=new Set,H=b?.recentSubmissions||[];console.log(`Found ${H.length} recent submissions`),H.forEach(m=>{m.statusDisplay==="Accepted"&&(m.titleSlug&&k.add(m.titleSlug),m.slug&&k.add(m.slug))});const W=b?.allAcceptedSubmissions||[];console.log(`Found ${W.length} all-time accepted submissions`),W.forEach(m=>{m.titleSlug&&k.add(m.titleSlug),m.slug&&k.add(m.slug)}),console.log("All accepted slugs:",Array.from(k));const Y=o.map(m=>{const T=[m.slug,m.url?S(m.url):null,S(m.title),String(m.id)].filter(Boolean);return console.log(`Problem "${m.title}" - variations:`,T),T.some(_=>k.has(_))&&m.status!=="completed"?(console.log(`‚úÖ Marking "${m.title}" as completed`),{...m,status:"completed"}):m});Y.some((m,T)=>m.status!==o[T]?.status)?(console.log("Saving updated queue with completed statuses"),await chrome.storage.local.set({problem_queue:Y}),s(Y)):console.log("No changes to queue needed")}catch(u){console.error("Error checking completed problems:",u)}},f=async()=>{try{const u=(await chrome.storage.local.get("problem_queue")).problem_queue||[],w=u.map((C,b)=>(C.id||(C.id=C.slug||`problem-${Date.now()}-${b}`),C));u.some(C=>!C.id)&&await chrome.storage.local.set({problem_queue:w}),s(w),d(w)}catch(o){console.error("Error loading problems:",o)}};p.useEffect(()=>{f();const o=(u,w)=>{w==="local"&&u.problem_queue&&f()};return chrome.storage.onChanged.addListener(o),()=>{chrome.storage.onChanged.removeListener(o)}},[]);const c=async o=>{try{await chrome.storage.local.set({problem_queue:o}),s(o)}catch(u){console.error("Error saving problems:",u)}},v=async()=>{if(!n.trim())return;const o=S(n.trim()),u=i(n.trim());if(t.some(k=>(k.slug||S(k.url||""))===o)){alert("This problem is already in your queue!");return}let C="pending";try{const{my_leetcode_username:k}=await chrome.storage.local.get("my_leetcode_username");if(k){const H=await chrome.runtime.sendMessage({type:"FETCH_STATS",forceRefresh:!1});H.success&&H.friends&&H.friends[k]&&(H.friends[k]?.profile?.recentSubmissions||[]).some(m=>m.titleSlug===o&&m.statusDisplay==="Accepted")&&(C="completed")}}catch(k){console.error("Error checking submission status:",k)}const b={id:o||Date.now(),title:n.trim(),slug:o,url:u,addedAt:Date.now(),status:C,difficulty:"Medium"};c([...t,b]),r(""),l(!1)},g=(o,u)=>{const w=t.map(C=>C.id===o||C.slug===o?{...C,status:u}:C);c(w)},S=o=>{if(o.includes("leetcode.com/problems/")){const w=o.match(/problems\/([^/]+)/);return w?w[1]:o}return o.toLowerCase().replace(/^\d+\.\s+/,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-")},y=o=>{c(t.filter(u=>u.id!==o&&u.slug!==o))},i=o=>o.startsWith("http")?o:`https://leetcode.com/problems/${o.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-")}/`,x=o=>{chrome.tabs.create({url:o})};return e.jsxs("div",{className:"bg-surface rounded-3xl shadow-xl p-6 border border-surfaceHover transition-all duration-300 hover:shadow-2xl hover:shadow-primary/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"üìù"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xs text-text-main",children:"Problem Queue"}),e.jsx("p",{className:"text-[9px] text-text-muted",children:"Save problems to solve later"})]})]}),e.jsx("button",{onClick:()=>l(!a),className:"px-2.5 py-1 text-[10px] font-semibold bg-primary text-white rounded-md hover:bg-primaryHover transition-all active:scale-95",children:a?"‚úï":"+ Add"})]}),a&&e.jsxs("div",{className:"mb-3 p-2.5 bg-background/50 rounded-lg border border-surfaceHover",children:[e.jsx("input",{type:"text",value:n,onChange:o=>r(o.target.value),onKeyPress:o=>o.key==="Enter"&&v(),placeholder:"Problem name or URL...",className:"w-full px-2.5 py-1.5 text-[10px] bg-surface border border-surfaceHover rounded-md focus:outline-none focus:border-primary text-text-main placeholder-text-muted mb-2",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:v,className:"flex-1 py-1.5 text-[10px] font-semibold bg-primary text-white rounded-md hover:bg-primaryHover transition-all",children:"Add to Queue"}),e.jsx("button",{onClick:o=>{o.stopPropagation(),l(!1),r("")},className:"px-3 py-1.5 text-[10px] font-semibold text-text-muted hover:text-text-main bg-surface hover:bg-surfaceHover rounded-md transition-all active:scale-95",children:"Cancel"})]})]}),t.length===0?e.jsxs("div",{className:"text-center py-4 text-text-muted",children:[e.jsx("span",{className:"text-2xl mb-1 block",children:"üìã"}),e.jsx("p",{className:"text-[10px]",children:"No problems saved yet"}),e.jsx("p",{className:"text-[9px] mt-0.5",children:'Visit LeetCode problems and click "Add to Queue"'})]}):e.jsx("div",{className:"space-y-1.5 max-h-48 overflow-y-auto pr-1 scrollbar-hide",children:t.map(o=>{const u={Easy:"text-leetcode-easy",Medium:"text-leetcode-medium",Hard:"text-leetcode-hard"},w={pending:"‚è≥","in-progress":"üöÄ",completed:"‚úÖ"},C=o.status==="completed";return e.jsxs("div",{className:`flex items-center gap-2 p-2 rounded-lg border transition-all group ${C?"bg-green-500/5 border-green-500/20 hover:border-green-500/40":"bg-background/50 border-surfaceHover hover:border-primary/40"}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx("span",{className:"text-[10px]",children:w[o.status]||"üìã"}),e.jsx("div",{className:`text-[10px] font-semibold truncate group-hover:text-primary transition-colors ${C?"text-green-400":"text-text-main"}`,children:o.title}),C&&e.jsx("span",{className:"ml-auto flex-shrink-0 px-1.5 py-0.5 text-[8px] font-bold bg-green-500/20 text-green-400 rounded-full border border-green-500/30 whitespace-nowrap",children:"‚úì Submitted"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[8px] text-text-muted",children:[e.jsx("span",{className:`font-semibold ${u[o.difficulty]||"text-text-muted"}`,children:o.difficulty}),o.number&&e.jsxs("span",{children:["#",o.number]}),e.jsx("span",{children:"‚Ä¢"}),e.jsxs("span",{children:["Added ",new Date(o.addedAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[o.status!=="completed"&&e.jsx("button",{onClick:b=>{b.stopPropagation(),g(o.id,o.status==="pending"?"in-progress":"completed")},className:"px-2 py-1 text-[9px] font-semibold text-accent hover:text-accent bg-accent/10 hover:bg-accent/20 rounded transition-all active:scale-95",title:o.status==="pending"?"Start":"Complete",children:o.status==="pending"?"‚ñ∂":"‚úì"}),e.jsx("button",{onClick:()=>x(o.url),className:"px-2 py-1 text-[9px] font-semibold text-primary hover:text-primaryHover bg-primary/10 hover:bg-primary/20 rounded transition-all whitespace-nowrap",title:"Open problem",children:"Open"}),e.jsx("button",{onClick:b=>{b.stopPropagation(),y(o.id)},className:"px-1.5 py-1 text-[9px] font-semibold text-red-400 hover:text-red-300 bg-red-400/10 hover:bg-red-400/20 rounded transition-all active:scale-95",title:"Remove",children:"‚úï"})]})]},o.id)})}),t.length>0&&e.jsx("div",{className:"mt-2 pt-2 border-t border-surfaceHover",children:e.jsxs("div",{className:"flex justify-between items-center text-[9px] text-text-muted",children:[e.jsxs("span",{children:[t.length," problem",t.length!==1?"s":""," in queue"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{children:["‚è≥ ",t.filter(o=>o.status==="pending").length]}),e.jsxs("span",{children:["üöÄ ",t.filter(o=>o.status==="in-progress").length]}),e.jsxs("span",{children:["‚úÖ ",t.filter(o=>o.status==="completed").length]})]})]})})]})}function Xt(t){if(!t)return;const{profile:s,stats:n,submissionCalendar:r}=t;let a=`LeetCode Statistics Report

`;a+=`Username,${s.username}
`,a+=`Real Name,${s.realName||"N/A"}
`,a+=`Current Streak,${n.streak||0} days
`,a+=`Total Problems,${n.total||0}
`,a+=`Easy Problems,${n.easy||0}
`,a+=`Medium Problems,${n.medium||0}
`,a+=`Hard Problems,${n.hard||0}
`,a+=`Global Ranking,${s.ranking||"N/A"}

`,a+=`Date,Submissions
`,r&&Object.entries(r).filter(([v,g])=>parseInt(g)>0).sort(([v],[g])=>parseInt(g)-parseInt(v)).slice(0,30).forEach(([v,g])=>{const y=new Date(parseInt(v)*1e3).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"});a+=`${y},${g}
`});const l=new Blob([a],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),f=URL.createObjectURL(l);d.setAttribute("href",f),d.setAttribute("download",`leetcode_stats_${s.username}_${Date.now()}.csv`),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)}function es(t){if(!t)return;const{profile:s,stats:n}=t,r=`
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>LeetCode Stats - ${s.username}</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      color: #333;
    }
    .header {
      text-align: center;
      margin-bottom: 40px;
      border-bottom: 3px solid #FF6B35;
      padding-bottom: 20px;
    }
    .header h1 {
      color: #FF6B35;
      margin: 0;
      font-size: 32px;
    }
    .header p {
      color: #666;
      margin: 10px 0 0 0;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin: 30px 0;
    }
    .stat-card {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 12px;
      border-left: 4px solid #FF6B35;
    }
    .stat-card h3 {
      margin: 0 0 10px 0;
      color: #666;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .stat-card .value {
      font-size: 32px;
      font-weight: bold;
      color: #FF6B35;
    }
    .difficulty-section {
      margin: 30px 0;
    }
    .difficulty-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-top: 15px;
    }
    .difficulty-card {
      padding: 15px;
      border-radius: 8px;
      text-align: center;
    }
    .difficulty-card.easy {
      background: #d4edda;
      border: 2px solid #28a745;
    }
    .difficulty-card.medium {
      background: #fff3cd;
      border: 2px solid #ffc107;
    }
    .difficulty-card.hard {
      background: #f8d7da;
      border: 2px solid #dc3545;
    }
    .difficulty-card .value {
      font-size: 28px;
      font-weight: bold;
      margin: 5px 0;
    }
    .difficulty-card.easy .value { color: #28a745; }
    .difficulty-card.medium .value { color: #ffc107; }
    .difficulty-card.hard .value { color: #dc3545; }
    .footer {
      margin-top: 40px;
      text-align: center;
      color: #999;
      font-size: 12px;
      border-top: 1px solid #ddd;
      padding-top: 20px;
    }
    @media print {
      body { margin: 0; }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>üöÄ LeetCode Statistics</h1>
    <p><strong>${s.username}</strong>${s.realName?` ‚Ä¢ ${s.realName}`:""}</p>
  </div>

  <div class="stats-grid">
    <div class="stat-card">
      <h3>üî• Current Streak</h3>
      <div class="value">${n.streak||0}</div>
      <p style="margin: 5px 0 0 0; color: #666;">days</p>
    </div>
    <div class="stat-card">
      <h3>üìä Total Problems</h3>
      <div class="value">${n.total||0}</div>
      <p style="margin: 5px 0 0 0; color: #666;">solved</p>
    </div>
  </div>

  <div class="difficulty-section">
    <h2 style="color: #333; margin-bottom: 15px;">Problem Breakdown</h2>
    <div class="difficulty-grid">
      <div class="difficulty-card easy">
        <h4 style="margin: 0; color: #28a745;">Easy</h4>
        <div class="value">${n.easy||0}</div>
      </div>
      <div class="difficulty-card medium">
        <h4 style="margin: 0; color: #ffc107;">Medium</h4>
        <div class="value">${n.medium||0}</div>
      </div>
      <div class="difficulty-card hard">
        <h4 style="margin: 0; color: #dc3545;">Hard</h4>
        <div class="value">${n.hard||0}</div>
      </div>
    </div>
  </div>

  ${s.ranking?`
  <div class="stat-card" style="margin: 30px 0;">
    <h3>üèÜ Global Ranking</h3>
    <div class="value">#${s.ranking.toLocaleString()}</div>
  </div>
  `:""}

  <div class="footer">
    <p>Generated by LeetStreak on ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}</p>
    <p>Profile: https://leetcode.com/${s.username}</p>
  </div>
</body>
</html>
  `,a=window.open("","_blank");a.document.write(r),a.document.close(),a.onload=()=>{a.focus(),setTimeout(()=>{a.print()},250)}}function ts({friends:t,currentStreak:s,onRefresh:n,refreshing:r}){const[a,l]=p.useState(0),[d,f]=p.useState(null),[c,v]=p.useState(!1),[g,S]=p.useState(new Set),[y,i]=p.useState(!1);p.useEffect(()=>{[7,30,100,365].includes(s)&&!g.has(s)&&(v(!0),S(m=>new Set([...m,s])))},[s,g]);const x=p.useMemo(()=>{if(y||!t||t.length===0)return!1;const h=t[0];if(!h?.submissionCalendar)return!1;const m=new Date,T=new Date(Date.UTC(m.getFullYear(),m.getMonth(),m.getDate())),D=Math.floor(T.getTime()/1e3).toString(),_=parseInt(h.submissionCalendar[D])||0;return s>0&&_===0},[t,s,y]);if(!t||t.length===0)return e.jsx("div",{className:"flex items-center justify-center h-full p-8 text-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-5xl mb-4",children:"üìä"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No data available"}),e.jsx("button",{onClick:n,className:"px-4 py-2 bg-orange-500 text-white rounded-full text-sm",children:"Load Data"})]})});const o=t.length>0?t.reduce((h,m)=>(m.stats?.streak||0)>(h.stats?.streak||0)?m:h):null,u=t.reduce((h,m)=>({easy:h.easy+(m.stats?.easy||0),medium:h.medium+(m.stats?.medium||0),hard:h.hard+(m.stats?.hard||0),total:h.total+(m.stats?.total||0)}),{easy:0,medium:0,hard:0,total:0}),w=t[0],C=w?.submissionCalendar,b=h=>h===0?0:h<=2?1:h<=4?2:h<=6?3:4,H=(()=>{const h=[],m=new Date,T=m.getDay(),D=new Date(m);D.setDate(m.getDate()-T);for(let _=0;_<7;_++){const N=new Date(D);N.setDate(D.getDate()+_);let M=0;if(C){const E=new Date(Date.UTC(N.getFullYear(),N.getMonth(),N.getDate())),A=Math.floor(E.getTime()/1e3).toString();M=parseInt(C[A])||0}h.push({label:["S","M","T","W","T","F","S"][_],date:N.getDate(),count:M,isToday:N.toDateString()===m.toDateString(),isPast:N<m,isFuture:N>m})}return h})(),W=(h=0)=>{if(!C)return null;try{const m=C;if(!m||typeof m!="object")return null;console.log("Calendar data:",m),console.log("Calendar keys sample:",Object.keys(m).slice(0,10));const T=new Date,D=new Date(Date.UTC(T.getFullYear(),T.getMonth(),T.getDate())),_=new Date(D.getFullYear(),D.getMonth()-h,1),N=_.getFullYear(),M=_.getMonth(),E=_.toLocaleDateString("en-US",{month:"long"}),A=new Date(N,M,1).getDay(),K=new Date(N,M+1,0).getDate(),O=[];let F=[];for(let R=0;R<A;R++)F.push(null);for(let R=1;R<=K;R++){const U=new Date(N,M,R),B=new Date(Date.UTC(U.getFullYear(),U.getMonth(),U.getDate())),L=Math.floor(B.getTime()/1e3).toString(),V=parseInt(m[L])||0,Q=U.toDateString()===T.toDateString();(Q||V>0)&&console.log("Day "+R+":",{date:U.toISOString(),timestamp:L,count:V,calendarValue:m[L],isToday:Q}),F.push({date:U,day:R,count:V,dateStr:L,isToday:Q}),F.length===7&&(O.push(F),F=[])}if(F.length>0){for(;F.length<7;)F.push(null);O.push(F)}return{monthName:E,year:N,weeks:O}}catch(m){return console.error("Error generating calendar data:",m),null}},Y=(h,m=!1)=>{const T=b(h),D=["bg-surfaceHover border-surfaceHover","bg-secondary/40 border-secondary/60 shadow-sm","bg-secondary/60 border-secondary/80 shadow","bg-secondary/80 border-secondary shadow-md","bg-secondary border-secondary shadow-lg"];return m?D[T]+" ring-2 ring-primary/80 ring-offset-1 ring-offset-background":D[T]};return e.jsxs("div",{className:"h-full overflow-y-auto pb-6 bg-background scrollbar-hide",children:[c&&e.jsx(Gt,{streak:s,onClose:()=>v(!1)}),x&&e.jsx("div",{className:"mx-6 mt-6 mb-4 px-4 py-3 bg-gradient-to-r from-amber-500/20 to-orange-500/20 border-2 border-amber-500/40 rounded-xl backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"‚ö†Ô∏è"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-bold text-sm text-amber-400",children:"Streak at Risk!"}),e.jsx("button",{onClick:()=>i(!0),className:"ml-auto text-text-muted hover:text-text-main text-xs",children:"‚úï"})]}),e.jsxs("p",{className:"text-xs text-text-muted leading-relaxed",children:["You haven't solved any problems today. Your ",e.jsxs("strong",{className:"text-amber-400",children:[s,"-day streak"]})," will break at midnight! üî•"]}),e.jsxs("a",{href:"https://leetcode.com/problemset/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 mt-2 text-xs font-semibold text-amber-400 hover:text-amber-300 transition-colors",children:[e.jsx("span",{children:"Solve a problem now"}),e.jsx("span",{children:"‚Üí"})]})]})]})}),e.jsxs("div",{className:"text-center pt-8 pb-6 animate-fade-in",children:[e.jsx("div",{className:"text-8xl font-black bg-gradient-to-r from-primary via-orange-500 to-red-500 bg-clip-text text-transparent mb-2 drop-shadow-2xl",children:s}),e.jsx("div",{className:"text-xl font-bold text-text-main mb-1",children:"Day Streak üéØ"}),e.jsxs("p",{className:"text-sm text-text-muted",children:["You are doing really great",o?`, ${o.profile.username}`:"","!"]}),(w?.profile?.ranking||w?.contestRanking?.globalRanking)&&e.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"üåç"}),e.jsxs("span",{className:"text-sm font-bold text-primary",children:["Global Rank #",(w.profile.ranking||w.contestRanking.globalRanking).toLocaleString()]})]}),e.jsx("button",{onClick:n,disabled:r,className:"mt-4 px-6 py-2.5 text-sm font-semibold text-inverted bg-primary hover:bg-primaryHover rounded-full transition-all duration-300 disabled:opacity-50 shadow-lg hover:shadow-primary/30 active:scale-95 flex items-center gap-2 mx-auto",children:r?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"inline-block animate-spin",children:"‚ü≥"}),e.jsx("span",{children:"Refreshing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"üîÑ"}),e.jsx("span",{children:"Refresh Data"})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4",children:[e.jsxs("button",{onClick:()=>Xt(w),className:"px-4 py-2 text-xs font-semibold text-text-main bg-surface hover:bg-surfaceHover border border-surfaceHover rounded-lg transition-all duration-300 shadow-sm hover:shadow-md active:scale-95 flex items-center gap-2",children:[e.jsx("span",{children:"üìÑ"}),e.jsx("span",{children:"Export CSV"})]}),e.jsxs("button",{onClick:()=>es(w),className:"px-4 py-2 text-xs font-semibold text-text-main bg-surface hover:bg-surfaceHover border border-surfaceHover rounded-lg transition-all duration-300 shadow-sm hover:shadow-md active:scale-95 flex items-center gap-2",children:[e.jsx("span",{children:"üìã"}),e.jsx("span",{children:"Export PDF"})]})]}),e.jsx("p",{className:"text-xs text-text-muted text-center mt-2",children:"Auto-syncs every 30 minutes"})]}),e.jsx("div",{className:"px-6 mb-6 animate-slide-up",children:e.jsxs("div",{className:"bg-surface rounded-3xl p-5 shadow-xl border border-surfaceHover transition-all duration-300 hover:shadow-2xl hover:shadow-primary/5",children:[e.jsx("h3",{className:"text-xs font-semibold text-text-muted uppercase tracking-wide mb-4 text-center",children:"This Week"}),e.jsx("div",{className:"flex justify-between items-center gap-2 relative",children:H.map((h,m)=>{const T=b(h.count);let D,_;return T===0?(D="bg-surfaceHover",_="text-text-muted"):T===1?(D="bg-secondary/40",_="text-white"):T===2?(D="bg-secondary/60",_="text-white"):T===3?(D="bg-secondary/80",_="text-white"):(D="bg-secondary",_="text-white"),e.jsxs("div",{className:"flex-1 text-center group relative",children:[e.jsx("div",{className:"text-xs text-text-muted font-medium mb-2 group-hover:text-text-main transition-colors",children:h.label}),e.jsx("div",{className:`
                      w-full aspect-square rounded-2xl flex items-center justify-center text-sm font-bold shadow-sm transition-all duration-300 cursor-pointer
                      ${D} ${_}
                      ${h.isToday?"ring-2 ring-primary/80 ring-offset-1 ring-offset-background scale-110":""}
                      ${h.isFuture?"opacity-40":""}
                      hover:scale-110 hover:shadow-lg
                    `,title:`${h.count} submission${h.count!==1?"s":""}`,children:h.count>0?h.count:h.date}),e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-surface border border-primary/40 rounded-lg shadow-xl transition-opacity duration-200 pointer-events-none z-50 whitespace-nowrap",children:[e.jsx("div",{className:"text-xs font-semibold text-primary",children:h.count===0?"No submissions":`${h.count} submission${h.count!==1?"s":""}`}),e.jsx("div",{className:"text-[10px] text-text-muted mt-1",children:new Date(new Date().setDate(new Date().getDate()-new Date().getDay()+m)).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),h.isToday&&e.jsx("div",{className:"text-[10px] text-amber-400 font-semibold mt-1",children:"Today"})]})]},m)})})]})}),e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.1s"},children:e.jsxs("div",{className:"bg-surface rounded-3xl shadow-xl p-6 border border-surfaceHover transition-all duration-300 hover:shadow-2xl hover:shadow-primary/5",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-muted mb-4 text-center",children:"Your Stats üìä"}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"text-center py-3 bg-leetcode-easy/10 rounded-2xl shadow-sm border border-leetcode-easy/20 hover:bg-leetcode-easy/20 transition-colors",children:[e.jsx("div",{className:"text-xl font-bold text-leetcode-easy",children:u.easy}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Easy"})]}),e.jsxs("div",{className:"text-center py-3 bg-leetcode-medium/10 rounded-2xl shadow-sm border border-leetcode-medium/20 hover:bg-leetcode-medium/20 transition-colors",children:[e.jsx("div",{className:"text-xl font-bold text-leetcode-medium",children:u.medium}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Medium"})]}),e.jsxs("div",{className:"text-center py-3 bg-leetcode-hard/10 rounded-2xl shadow-sm border border-leetcode-hard/20 hover:bg-leetcode-hard/20 transition-colors",children:[e.jsx("div",{className:"text-xl font-bold text-leetcode-hard",children:u.hard}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Hard"})]}),e.jsxs("div",{className:"text-center py-3 bg-surfaceHover rounded-2xl shadow-sm border border-surfaceHover hover:bg-surfaceHover/80 transition-colors",children:[e.jsx("div",{className:"text-xl font-bold text-text-main",children:u.total}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Total"})]})]})]})}),e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.1s"},children:e.jsx(Jt,{})}),e.jsxs("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.15s"},children:[e.jsxs("h3",{className:"text-sm font-semibold text-text-muted mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-base",children:"üéØ"}),e.jsx("span",{children:"My Goals"})]}),e.jsx(Wt,{userData:w})]}),o&&o.stats.streak>=7&&e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.25s"},children:e.jsx("div",{className:"bg-gradient-to-br from-primary/10 to-surface rounded-3xl p-6 border border-primary/20 shadow-lg transition-all duration-300 hover:shadow-primary/10",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-primaryHover rounded-full flex items-center justify-center shadow-lg shadow-primary/20",children:e.jsx("span",{className:"text-3xl animate-bounce-slow",children:"üèÖ"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-text-muted mb-1",children:"Earned a Badge"}),e.jsx("div",{className:"text-xl font-bold text-text-main",children:"Challenger üéñÔ∏è"})]})]})})}),C&&(()=>{const h=W(a);return h?e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.3s"},children:e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-4 rounded-xl border border-surfaceHover shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üìÖ"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm text-text-main",children:"Activity Calendar"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Browse monthly submissions"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:n,disabled:r,className:"p-1.5 text-text-muted hover:text-primary rounded-lg transition-all duration-300 disabled:opacity-50 hover:bg-surface",title:"Refresh data",children:r?e.jsx("span",{className:"inline-block animate-spin text-sm",children:"‚ü≥"}):e.jsx("span",{className:"text-sm",children:"üîÑ"})}),e.jsxs("div",{className:"flex items-center gap-1 bg-background/60 px-2 py-1.5 rounded-lg border border-surfaceHover/50",children:[e.jsx("span",{className:"text-[9px] text-text-muted mr-1",children:"Less"}),[0,1,2,3,4].map(m=>e.jsx("div",{className:`w-[10px] h-[10px] rounded-[2px] border ${Y(m*2)}`},m)),e.jsx("span",{className:"text-[9px] text-text-muted ml-1",children:"More"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{onClick:m=>{m.stopPropagation(),a<11&&l(a+1)},disabled:a>=11,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 border border-primary/30 disabled:opacity-30 disabled:cursor-not-allowed transition-all group",children:e.jsx("svg",{className:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-bold text-primary",children:[h.monthName," ",h.year]}),e.jsx("div",{className:"text-[10px] text-text-muted",children:(()=>{const m=h.weeks.flat().filter(T=>T&&T.count>0).reduce((T,D)=>T+D.count,0);return`${m} submission${m!==1?"s":""}`})()})]}),e.jsx("button",{onClick:m=>{m.stopPropagation(),a>0&&l(a-1)},disabled:a<=0,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 border border-primary/30 disabled:opacity-30 disabled:cursor-not-allowed transition-all group",children:e.jsx("svg",{className:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"bg-background/70 backdrop-blur-sm rounded-xl p-3 border border-surfaceHover/60 relative",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((m,T)=>e.jsx("div",{className:"text-[9px] text-text-muted text-center font-semibold",children:m},T))}),h.weeks.map((m,T)=>e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:m.map((D,_)=>{const N=T<2;let M="left-1/2 transform -translate-x-1/2";return _===0?M="left-0":_===6&&(M="right-0"),e.jsx("div",{className:`aspect-square rounded-md flex items-center justify-center text-[9px] font-bold transition-all duration-300 relative group ${D?`${Y(D.count,D.isToday)} cursor-pointer hover:scale-125 hover:shadow-xl hover:z-20 ${d?.dateStr===D.dateStr?"scale-125 shadow-xl z-20":""}`:"bg-transparent"}`,onMouseEnter:()=>D&&f(D),onMouseLeave:()=>f(null),children:D&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`${D.count>0?"text-white font-bold drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]":"text-text-muted font-semibold"}`,children:D.day}),D.isToday&&e.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-1.5 h-1.5 bg-amber-400 rounded-full animate-pulse"}),d?.dateStr===D.dateStr&&e.jsxs("div",{className:`absolute ${N?"top-full mt-2":"bottom-full mb-2"} ${M} bg-gradient-to-br from-surface to-surfaceHover border-2 border-primary/40 rounded-xl px-4 py-3 shadow-2xl z-50 animate-fade-in pointer-events-none backdrop-blur-sm whitespace-nowrap`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[D.isToday&&e.jsx("span",{className:"text-base",children:"‚≠ê"}),e.jsx("div",{className:"text-sm font-bold text-primary",children:D.count===0?"No activity":`${D.count} submission${D.count!==1?"s":""}`})]}),e.jsx("div",{className:"text-[11px] text-text-muted",children:D.date.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),D.isToday&&e.jsx("div",{className:"text-[10px] text-amber-400 font-semibold mt-1",children:"Today"})]})]})},_)})},T))]})]})}):null})(),t.length>0&&e.jsxs("div",{className:"mx-6 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-muted mb-3",children:"Recent Activity üéØ"}),e.jsx("div",{className:"space-y-3",children:t.slice(0,3).filter(h=>h&&h.profile&&h.stats).map((h,m)=>e.jsx("div",{className:"bg-surface rounded-3xl p-4 shadow-md border border-surfaceHover transition-all duration-300 hover:shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:h.profile?.avatar||"https://via.placeholder.com/40",alt:h.profile?.username||"User",className:"w-6 h-6 rounded-full shadow-md"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-sm text-text-main",children:h.profile?.username||"Unknown"}),e.jsxs("div",{className:"text-xs text-text-muted",children:[h.stats?.total||0," problems solved"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-primary font-bold bg-primary/10 px-3 py-1 rounded-full border border-primary/20",children:[e.jsx("span",{children:"üî•"}),e.jsx("span",{children:h.stats?.streak||0})]})]})},m))})]}),e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.35s"},children:e.jsx(Zt,{})})]})}const je=1.7,Ne=30,we=19,ke=4,xe="schedule_preferences";async function ie(){try{return(await chrome.storage.local.get(xe))[xe]||{activeInterval:je,quietInterval:Ne,activeStartHour:we,activeEndHour:ke}}catch(t){return console.error("Error loading schedule preferences:",t),{activeInterval:je,quietInterval:Ne,activeStartHour:we,activeEndHour:ke}}}async function ss(t){try{return await chrome.storage.local.set({[xe]:t}),{success:!0}}catch(s){return console.error("Error saving schedule preferences:",s),{success:!1,error:s.message}}}async function pe(t=null){t||(t=await ie());const n=new Date().getHours(),{activeStartHour:r,activeEndHour:a}=t;return r>a?n>=r||n<a:n>=r&&n<a}async function as(){const t=await ie();return await pe(t)?t.activeInterval:t.quietInterval}async function rs(){const t=await ie(),s=new Date,n=s.getHours(),r=s.getMinutes();let a;await pe(t)?a=t.activeEndHour:a=t.activeStartHour;let l=a-n;return l<0&&(l+=24),l===0&&r>0&&(l=24),l*60-r}function Se(t){return t===0?"12:00 AM":t<12?`${t}:00 AM`:t===12?"12:00 PM":`${t-12}:00 PM`}async function ns(){const t=await ie(),s=await pe(t),n=await as(),r=await rs();return{activeInterval:t.activeInterval,quietInterval:t.quietInterval,activeStartHour:t.activeStartHour,activeEndHour:t.activeEndHour,activeStart:Se(t.activeStartHour),activeEnd:Se(t.activeEndHour),currentMode:s?"active":"quiet",currentInterval:n,nextTransition:r}}function os(t){const s=[];(t.activeInterval<1||t.activeInterval>30)&&s.push("Active interval must be between 1 and 30 minutes"),(t.quietInterval<5||t.quietInterval>60)&&s.push("Quiet interval must be between 5 and 60 minutes"),(t.activeStartHour<0||t.activeStartHour>23)&&s.push("Active start hour must be between 0 and 23"),(t.activeEndHour<0||t.activeEndHour>23)&&s.push("Active end hour must be between 0 and 23");let n=t.activeEndHour-t.activeStartHour;return n<0&&(n+=24),n<2&&s.push("Active hours should be at least 2 hours long"),{valid:s.length===0,errors:s}}function is({isOpen:t,onClose:s}){const[n,r]=p.useState(null),[a,l]=p.useState(!0),[d,f]=p.useState(!1),[c,v]=p.useState(null),[g,S]=p.useState(null),[y,i]=p.useState(!1),[x,o]=p.useState({activeStartHour:19,activeEndHour:4}),[u,w]=p.useState("");p.useEffect(()=>{t&&(b(),C())},[t]);const C=async()=>{const h=await ns();S(h),o({activeStartHour:h.activeStartHour,activeEndHour:h.activeEndHour})},b=async()=>{try{l(!0);const h=await chrome.runtime.sendMessage({type:"GET_NOTIFICATION_STATE"});if(h.success){r(h.state);const m=new Date().toISOString().split("T")[0],T=h.state.mutedUntilUTC&&h.state.mutedUntilUTC>m;f(T),v(h.state.mutedUntilUTC)}}catch(h){console.error("Error loading notification state:",h)}finally{l(!1)}},k=async()=>{try{const h=new Date;h.setUTCDate(h.getUTCDate()+1);const m=h.toISOString().split("T")[0];(await chrome.runtime.sendMessage({type:"MUTE_NOTIFICATIONS",untilUTC:m})).success&&(f(!0),v(m))}catch(h){console.error("Error muting notifications:",h)}},H=async()=>{try{(await chrome.runtime.sendMessage({type:"MUTE_NOTIFICATIONS",untilUTC:null})).success&&(f(!1),v(null))}catch(h){console.error("Error unmuting notifications:",h)}},W=async()=>{w("");const h={activeInterval:g.activeInterval,quietInterval:g.quietInterval,activeStartHour:x.activeStartHour,activeEndHour:x.activeEndHour},m=os(h);if(!m.valid){w(m.errors.join(". "));return}(await ss(h)).success?(await C(),i(!1),await chrome.runtime.sendMessage({type:"RESCHEDULE_ALARMS"})):w("Failed to save preferences")},Y=()=>{o({activeStartHour:g.activeStartHour,activeEndHour:g.activeEndHour}),w(""),i(!1)};return t?e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface border border-zinc-700 rounded-lg max-w-md w-full shadow-2xl flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-700 flex-shrink-0",children:[e.jsx("h2",{className:"text-lg font-semibold text-zinc-100",children:"Notification Settings"}),e.jsx("button",{onClick:s,className:"text-zinc-400 hover:text-zinc-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-4 space-y-4 overflow-y-auto flex-1 modal-scroll",children:a?e.jsx("div",{className:"text-center text-zinc-400 py-8",children:e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[g&&e.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-accent/10 rounded-lg p-4 border border-primary/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"‚è∞"}),e.jsx("h3",{className:"text-sm font-semibold text-zinc-100",children:"Sync Schedule"})]}),!y&&e.jsx("button",{onClick:()=>i(!0),className:"text-xs px-2 py-1 bg-primary/20 hover:bg-primary/30 text-primary rounded transition-colors",children:"Edit"})]}),y?e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-zinc-300 font-medium mb-1",children:"Set Your Active Coding Hours"}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Frequent checks every 1.7 minutes during these hours"})]}),e.jsxs("div",{className:"relative h-16 bg-background rounded-xl border border-zinc-700 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex",children:[...Array(24)].map((h,m)=>e.jsx("div",{className:"flex-1 border-r border-zinc-800 last:border-r-0"},m))}),e.jsx("div",{className:"absolute top-0 bottom-0 bg-gradient-to-r from-primary/40 via-accent/40 to-primary/40 transition-all duration-500 ease-out",style:{left:`${x.activeStartHour/24*100}%`,right:x.activeStartHour>x.activeEndHour?`${(24-x.activeEndHour)/24*100}%`:`${(24-x.activeEndHour)/24*100}%`,width:x.activeStartHour>x.activeEndHour?`${(24-x.activeStartHour+x.activeEndHour)/24*100}%`:`${(x.activeEndHour-x.activeStartHour)/24*100}%`}}),e.jsxs("div",{className:"absolute top-0 bottom-0 w-1 bg-primary transition-all duration-300 shadow-lg shadow-primary/50",style:{left:`${x.activeStartHour/24*100}%`},children:[e.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-3 h-3 bg-primary rounded-full animate-pulse shadow-lg shadow-primary/50"}),e.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-3 h-3 bg-primary rounded-full animate-pulse shadow-lg shadow-primary/50"})]}),e.jsxs("div",{className:"absolute top-0 bottom-0 w-1 bg-accent transition-all duration-300 shadow-lg shadow-accent/50",style:{left:`${x.activeEndHour/24*100}%`},children:[e.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-3 h-3 bg-accent rounded-full animate-pulse shadow-lg shadow-accent/50"}),e.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-3 h-3 bg-accent rounded-full animate-pulse shadow-lg shadow-accent/50"})]}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-2 pointer-events-none",children:[e.jsx("span",{className:"text-[10px] text-zinc-600 font-medium",children:"12AM"}),e.jsx("span",{className:"text-[10px] text-zinc-600 font-medium",children:"6AM"}),e.jsx("span",{className:"text-[10px] text-zinc-600 font-medium",children:"12PM"}),e.jsx("span",{className:"text-[10px] text-zinc-600 font-medium",children:"6PM"}),e.jsx("span",{className:"text-[10px] text-zinc-600 font-medium",children:"11PM"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-xs text-zinc-400 font-medium",children:"üü† Start Hour"}),e.jsx("span",{className:"text-sm text-primary font-bold",children:x.activeStartHour===0?"12:00 AM":x.activeStartHour<12?`${x.activeStartHour}:00 AM`:x.activeStartHour===12?"12:00 PM":`${x.activeStartHour-12}:00 PM`})]}),e.jsx("input",{type:"range",min:"0",max:"23",value:x.activeStartHour,onChange:h=>o({...x,activeStartHour:parseInt(h.target.value)}),className:"w-full h-2 bg-zinc-800 rounded-lg appearance-none cursor-pointer slider-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-xs text-zinc-400 font-medium",children:"üü£ End Hour"}),e.jsx("span",{className:"text-sm text-accent font-bold",children:x.activeEndHour===0?"12:00 AM":x.activeEndHour<12?`${x.activeEndHour}:00 AM`:x.activeEndHour===12?"12:00 PM":`${x.activeEndHour-12}:00 PM`})]}),e.jsx("input",{type:"range",min:"0",max:"23",value:x.activeEndHour,onChange:h=>o({...x,activeEndHour:parseInt(h.target.value)}),className:"w-full h-2 bg-zinc-800 rounded-lg appearance-none cursor-pointer slider-accent"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-primary/10 to-accent/10 rounded-lg p-3 border border-primary/20",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-zinc-300",children:[e.jsx("span",{className:"text-primary font-bold",children:"‚ö°"}),e.jsxs("span",{children:["Active for ",x.activeStartHour>x.activeEndHour?24-x.activeStartHour+x.activeEndHour:x.activeEndHour-x.activeStartHour," hours"]}),e.jsx("span",{className:"text-zinc-500",children:"|"}),e.jsxs("span",{children:["Quiet for ",x.activeStartHour>x.activeEndHour?x.activeStartHour-x.activeEndHour:24-(x.activeEndHour-x.activeStartHour)," hours"]})]})}),u&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 animate-shake",children:e.jsx("p",{className:"text-xs text-red-400 text-center",children:u})}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:W,className:"flex-1 px-4 py-3 bg-gradient-to-r from-primary to-primaryHover text-white rounded-xl text-sm font-bold transition-all duration-200 hover:shadow-xl hover:shadow-primary/30 hover:-translate-y-0.5 active:translate-y-0",children:"üíæ Save Schedule"}),e.jsx("button",{onClick:Y,className:"px-4 py-3 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded-xl text-sm font-medium transition-all duration-200 hover:-translate-y-0.5 active:translate-y-0",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-zinc-400",children:"Current Mode:"}),e.jsx("span",{className:`font-semibold px-2 py-0.5 rounded-full ${g.currentMode==="active"?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"}`,children:g.currentMode==="active"?"üî• Active":"üí§ Quiet"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-zinc-400",children:"Check Interval:"}),e.jsxs("span",{className:"text-zinc-200 font-medium",children:["Every ",g.currentInterval.toFixed(1)," min"]})]}),e.jsxs("div",{className:"border-t border-zinc-700/50 pt-2 mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Active Hours:"}),e.jsxs("span",{className:"text-zinc-400",children:[g.activeStart," - ",g.activeEnd]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Active Interval:"}),e.jsxs("span",{className:"text-zinc-400",children:[g.activeInterval," min"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Quiet Interval:"}),e.jsxs("span",{className:"text-zinc-400",children:[g.quietInterval," min"]})]})]}),g.nextTransition&&e.jsx("div",{className:"border-t border-zinc-700/50 pt-2 mt-2",children:e.jsxs("span",{className:"text-zinc-500",children:["Next mode switch in ",Math.round(g.nextTransition)," min"]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-background to-zinc-900 rounded-xl p-4 border border-zinc-800 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`relative p-3 rounded-xl ${d?"bg-orange-500/10":"bg-green-500/10"}`,children:[e.jsx("span",{className:"text-2xl",children:d?"üîï":"üîî"}),!d&&e.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-zinc-100",children:"Notification Status"}),e.jsx("p",{className:`text-xs font-medium ${d?"text-orange-400":"text-green-400"}`,children:d?"Muted":"Active & Monitoring"})]})]}),d?e.jsx("button",{onClick:H,className:"px-3 py-2 bg-green-500/20 hover:bg-green-500/30 text-green-400 border border-green-500/30 rounded-lg text-xs font-medium transition-all duration-200 hover:-translate-y-0.5",children:"Unmute"}):e.jsx("button",{onClick:k,className:"px-3 py-2 bg-orange-500/20 hover:bg-orange-500/30 text-orange-400 border border-orange-500/30 rounded-lg text-xs font-medium transition-all duration-200 hover:-translate-y-0.5",children:"Mute 24h"})]}),d&&c&&e.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-lg p-2 mt-2",children:e.jsxs("p",{className:"text-xs text-orange-300 text-center",children:["‚è∏Ô∏è Muted until ",e.jsx("span",{className:"font-bold",children:c})," UTC"]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-primary/5 to-accent/5 rounded-xl p-4 border border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-lg",children:"‚ú®"}),e.jsx("h3",{className:"text-sm font-semibold text-zinc-100",children:"Notification Features"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary mt-0.5",children:"üéØ"}),e.jsxs("p",{className:"text-xs text-zinc-400",children:[e.jsx("span",{className:"text-zinc-300 font-medium",children:"Friend Activity:"})," Get notified when friends solve problems"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-secondary mt-0.5",children:"üî•"}),e.jsxs("p",{className:"text-xs text-zinc-400",children:[e.jsx("span",{className:"text-zinc-300 font-medium",children:"Milestones:"})," Celebrate 7, 30, and 100 day streaks"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-accent mt-0.5",children:"‚ö°"}),e.jsxs("p",{className:"text-xs text-zinc-400",children:[e.jsx("span",{className:"text-zinc-300 font-medium",children:"Smart Batching:"})," Max 1 notification per friend per day"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-orange-500 mt-0.5",children:"üìä"}),e.jsxs("p",{className:"text-xs text-zinc-400",children:[e.jsx("span",{className:"text-zinc-300 font-medium",children:"Gap Analysis:"})," See ranking changes and progress updates"]})]})]})]}),n?.lastNotified&&Object.keys(n.lastNotified).length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-background to-zinc-900 rounded-xl p-4 border border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-lg",children:"üìú"}),e.jsx("h3",{className:"text-sm font-semibold text-zinc-100",children:"Recent Notifications"}),e.jsx("span",{className:"ml-auto text-xs text-zinc-500 bg-zinc-800 px-2 py-0.5 rounded-full",children:Object.keys(n.lastNotified).length})]}),e.jsx("div",{className:"notification-scroll",style:{maxHeight:"160px",overflowY:"auto"},children:e.jsx("div",{className:"space-y-2",children:Object.entries(n.lastNotified).map(([h,m])=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-background/50 rounded-lg hover:bg-background transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),e.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:h})]}),e.jsx("span",{className:"text-xs text-zinc-500",children:m})]},h))})})]})]})})]})}):null}function ls({notifications:t,onDismiss:s}){const n=t&&t.length>0,r=()=>{t&&t.length>0&&s(t[0].id)};if(!n||!t||t.length===0)return null;const a=t[0],l=t.length,d=()=>{switch(a.type){case"new_submission":case"solved_today":return e.jsx(Te,{className:"w-8 h-8 text-primary"});case"milestone":return e.jsx(ne,{className:"w-8 h-8 text-orange-500"});case"streak_at_risk":return e.jsx(he,{className:"w-8 h-8 text-yellow-500"});default:return e.jsx(fe,{className:"w-8 h-8 text-primary"})}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 animate-fade-in",onClick:r}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:e.jsx("div",{className:"pointer-events-auto animate-scale-in-center",children:e.jsxs("div",{className:"bg-surface border-2 border-primary/30 rounded-3xl shadow-2xl p-8 w-[340px] relative",children:[e.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-text-muted hover:text-text-main transition-colors p-1 hover:bg-surfaceHover rounded-lg",children:e.jsx(He,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center",children:d()})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg text-text-main mb-2",children:a.username}),e.jsx("div",{className:"text-sm text-text-muted mb-6",children:a.message}),l>1&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 rounded-full text-xs text-primary font-semibold mb-4",children:[e.jsx(fe,{className:"w-3 h-3"}),l-1," more notification",l-1>1?"s":""]}),e.jsx("button",{onClick:r,className:"w-full py-3 bg-primary hover:bg-primaryHover text-inverted font-semibold rounded-xl transition-all duration-200 active:scale-95",children:"Got it!"})]})]})})})]})}function cs({onVideoEnd:t,showLoadingMessage:s=!1}){const[n,r]=p.useState(!1),[a,l]=p.useState(!1);p.useEffect(()=>{const v=setTimeout(()=>{t()},5e3);return()=>clearTimeout(v)},[t]);const d=()=>{t()},f=()=>{console.warn("Failed to load splash video, ending splash screen early"),l(!0),t()};return e.jsx("div",{className:"fixed inset-0 z-[100] bg-background flex items-center justify-center overflow-hidden",children:a?null:e.jsx("video",{autoPlay:!0,muted:!0,playsInline:!0,onCanPlay:()=>r(!0),onEnded:d,onError:f,className:"w-full h-full object-cover",style:{opacity:n?1:0,transition:"opacity 0.3s ease-in-out"},children:e.jsx("source",{src:"User_Dislikes_Generated_Video.mp4",type:"video/mp4"})})})}function ds(t,s,n){if(!t||!s||!n)return 0;const r=typeof t=="string"?JSON.parse(t):t,a=typeof s=="string"?JSON.parse(s):s,l=Ce(r),d=Ce(a);if(l.size===0||d.size===0)return 0;const f=new Set;for(const u of l)d.has(u)&&u>=n&&f.add(u);if(f.size===0)return 0;const c=Array.from(f).sort((u,w)=>w.localeCompare(u)),v=new Date,g=v.toISOString().split("T")[0],S=new Date(v);S.setUTCDate(S.getUTCDate()-1);const y=S.toISOString().split("T")[0],i=c[0];if(i!==g&&i!==y)return 0;let x=0,o=new Date(i+"T00:00:00Z");for(let u=0;u<c.length;u++){const w=o.toISOString().split("T")[0];if(c[u]===w)x++,o.setUTCDate(o.getUTCDate()-1);else break}return x}function Ce(t){const s=new Set;return!t||typeof t!="object"||Object.entries(t).forEach(([n,r])=>{if(r>0){const l=new Date(parseInt(n)*1e3).toISOString().split("T")[0];s.add(l)}}),s}function ms(t){if(!t)return console.log("No submission calendar"),!1;console.log("Submission calendar keys sample:",Object.keys(t).slice(-10));const s=new Date,n=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate())),r=Math.floor(n.getTime()/1e3).toString();console.log("Today timestamp:",r,"Today date:",n),console.log("Value for today:",t[r]);const a=t[r]&&parseInt(t[r])>0;return console.log("Has today submission:",a),a}function xs(t){if(!t)return null;const s=Object.keys(t).map(n=>parseInt(n)).filter(n=>t[n.toString()]>0).sort((n,r)=>r-n);return s.length===0?null:new Date(s[0]*1e3)}function us(t){if(!t)return"Never";const n=new Date-t,r=Math.floor(n/(1e3*60*60*24));return r===0?"Today":r===1?"Yesterday":r<7?`${r} days ago`:r<30?`${Math.floor(r/7)} weeks ago`:r<365?`${Math.floor(r/30)} months ago`:`${Math.floor(r/365)} years ago`}function hs({friend:t,isExpanded:s,onClick:n,isCurrentUser:r,mySubmissionCalendar:a,timeFilter:l="all",rank:d=0}){const[f,c]=p.useState(!1),[v,g]=p.useState(!1),[S,y]=p.useState(null),[i,x]=p.useState(0),o=p.useMemo(()=>{const N=t?.recentSubmissions;if(!N||!Array.isArray(N)||N.length===0)return null;const E=[...N].sort((U,B)=>B.timestamp-U.timestamp)[0],A=new Date().getTime(),K=parseInt(E.timestamp)*1e3,O=A-K,F=Math.floor(O/(1e3*60*60)),R=Math.floor(O/(1e3*60*60*24));if(R===0){if(F===0){const U=Math.floor(O/6e4);return U<60?`${U} min${U!==1?"s":""} ago`:`${F} hour ago`}return`${F} hour${F!==1?"s":""} ago`}else{if(R===1)return"Yesterday";if(R<7)return`${R} days ago`;if(R<30){const U=Math.floor(R/7);return`${U} week${U!==1?"s":""} ago`}else{const U=Math.floor(R/30);return`${U} month${U!==1?"s":""} ago`}}},[t?.recentSubmissions]);if(!t||!t.profile||!t.stats)return null;const{profile:u,stats:w,contest:C,badges:b,recentSubmissions:k,submissionCalendar:H,friendshipStartDate:W,contestRanking:Y}=t,h=r?w.streak||0:a&&H&&W?ds(a,H,W):0,m=N=>N===1?"ü•á":N===2?"ü•à":N===3?"ü•â":`#${N}`,T=(N=0)=>{if(!H)return null;try{const M=H;if(!M||typeof M!="object")return null;const E=new Date,A=new Date(Date.UTC(E.getFullYear(),E.getMonth(),E.getDate())),K=new Date(A.getFullYear(),A.getMonth()-N,1),O=K.getFullYear(),F=K.getMonth(),R=K.toLocaleDateString("en-US",{month:"long"}),U=new Date(O,F,1).getDay(),B=new Date(O,F+1,0).getDate(),L=[];let V=[];for(let Q=0;Q<U;Q++)V.push(null);for(let Q=1;Q<=B;Q++){const z=new Date(O,F,Q),G=new Date(Date.UTC(z.getFullYear(),z.getMonth(),z.getDate())),P=Math.floor(G.getTime()/1e3).toString(),Z=parseInt(M[P])||0,ee=z.toDateString()===E.toDateString();V.push({date:z,day:Q,count:Z,dateStr:P,isToday:ee}),V.length===7&&(L.push(V),V=[])}if(V.length>0){for(;V.length<7;)V.push(null);L.push(V)}return{monthName:R,year:O,weeks:L}}catch(M){return console.error("Error generating calendar data:",M),null}},D=N=>N===0?0:N<=2?1:N<=4?2:N<=6?3:4,_=(N,M=!1)=>{const E=D(N),A=["bg-surfaceHover border-surfaceHover","bg-secondary/40 border-secondary/60 shadow-sm","bg-secondary/60 border-secondary/80 shadow","bg-secondary/80 border-secondary shadow-md","bg-secondary border-secondary shadow-lg"];return M?A[E]+" ring-2 ring-primary/80 ring-offset-1 ring-offset-background":A[E]};return e.jsxs("div",{onClick:n,className:`relative bg-surface rounded-3xl shadow-md border-2 transition-all duration-300 cursor-pointer hover:shadow-lg hover:scale-[1.01] ${r?"border-accent/30 bg-gradient-to-br from-accent/10 to-surface ring-1 ring-accent/20":"border-surfaceHover/50"} ${s?"ring-2 ring-primary/60 shadow-2xl":""}`,children:[t.submissionCalendar&&ms(t.submissionCalendar)&&e.jsx("div",{className:"absolute -top-1 -right-1 z-10 bg-secondary text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-lg animate-pulse pointer-events-none",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ne,{className:"w-3 h-3"})," ACTIVE"]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl font-bold min-w-[36px] text-center drop-shadow-sm",children:m(d)}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:u.avatar||"https://via.placeholder.com/40",alt:u.username,className:"w-10 h-10 rounded-full border-2 border-surface shadow-md object-cover"}),d<=3&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-primary rounded-full border-2 border-surface text-inverted text-xs flex items-center justify-center shadow-sm",children:e.jsx(De,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-base text-text-main truncate",children:u.username}),r&&e.jsx("span",{className:"px-2 py-0.5 bg-accent text-inverted text-[10px] font-bold rounded-full",children:"YOU"}),e.jsx("a",{href:`https://leetcode.com/${u.username}`,target:"_blank",rel:"noopener noreferrer",onClick:N=>N.stopPropagation(),className:"text-text-muted hover:text-primary transition-colors",title:"View LeetCode Profile",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M13.483 0a1.374 1.374 0 0 0-.961.438L7.116 6.226l-3.854 4.126a5.266 5.266 0 0 0-1.209 2.104 5.35 5.35 0 0 0-.125.513 5.527 5.527 0 0 0 .062 2.362 5.83 5.83 0 0 0 .349 1.017 5.938 5.938 0 0 0 1.271 1.818l4.277 4.193.039.038c2.248 2.165 5.852 2.133 8.063-.074l2.396-2.392c.54-.54.54-1.414.003-1.955a1.378 1.378 0 0 0-1.951-.003l-2.396 2.392a3.021 3.021 0 0 1-4.205.038l-.02-.019-4.276-4.193c-.652-.64-.972-1.469-.948-2.263a2.68 2.68 0 0 1 .066-.523 2.545 2.545 0 0 1 .619-1.164L9.13 8.114c1.058-1.134 3.204-1.27 4.43-.278l3.501 2.831c.593.48 1.461.387 1.939-.207a1.384 1.384 0 0 0-.207-1.943l-3.5-2.831c-.8-.647-1.766-1.045-2.774-1.202l2.015-2.158A1.384 1.384 0 0 0 13.483 0zm-2.866 12.815a1.38 1.38 0 0 0-1.38 1.382 1.38 1.38 0 0 0 1.38 1.382H20.79a1.38 1.38 0 0 0 1.38-1.382 1.38 1.38 0 0 0-1.38-1.382z"})})})]}),u.realName&&e.jsx("p",{className:"text-xs text-text-muted truncate",children:u.realName}),e.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[e.jsx("span",{className:"text-[10px] text-text-muted",children:"üïí"}),e.jsx("span",{className:"text-[10px] text-text-muted",children:us(xs(H))})]}),(u.ranking||Y?.globalRanking)&&e.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[e.jsx("span",{className:"text-[10px] text-text-muted",children:"üåç"}),e.jsxs("span",{className:"text-[10px] font-semibold text-primary",children:["Rank #",u.ranking?.toLocaleString()||Y?.globalRanking?.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-primary to-primaryHover text-inverted px-3 py-2 rounded-full shadow-lg shadow-primary/20",children:[e.jsx(ne,{className:"w-5 h-5 text-orange-500"}),e.jsx("span",{className:"text-base font-bold",children:h})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-4 gap-2",children:[e.jsxs("div",{className:"text-center py-2 bg-leetcode-easy/10 rounded-2xl border border-leetcode-easy/20",children:[e.jsx("div",{className:"text-base font-bold text-leetcode-easy",children:w.easy||0}),e.jsx("div",{className:"text-[10px] text-text-muted font-medium",children:"Easy"})]}),e.jsxs("div",{className:"text-center py-2 bg-leetcode-medium/10 rounded-2xl border border-leetcode-medium/20",children:[e.jsx("div",{className:"text-base font-bold text-leetcode-medium",children:w.medium||0}),e.jsx("div",{className:"text-[10px] text-text-muted font-medium",children:"Medium"})]}),e.jsxs("div",{className:"text-center py-2 bg-leetcode-hard/10 rounded-2xl border border-leetcode-hard/20",children:[e.jsx("div",{className:"text-base font-bold text-leetcode-hard",children:w.hard||0}),e.jsx("div",{className:"text-[10px] text-text-muted font-medium",children:"Hard"})]}),e.jsxs("div",{className:"text-center py-2 bg-surfaceHover rounded-2xl border border-surfaceHover",children:[e.jsx("div",{className:"text-base font-bold text-text-main",children:w.total||0}),e.jsx("div",{className:"text-[10px] text-text-muted font-medium",children:l==="week"?"This Week":l==="month"?"This Month":"Total"})]})]}),l!=="all"&&w._filteredByTime&&e.jsx("div",{className:"mt-2 text-center text-[10px] text-text-muted",children:l==="week"?"üìÖ Showing problems solved this week (Mon-Sun)":"üìÖ Showing problems solved this month"}),(o||k&&k.length>0)&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{onClick:N=>{N.stopPropagation(),g(!v)},className:"px-2 py-2 bg-primary/10 hover:bg-primary/20 rounded-xl border border-primary/30 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-semibold text-primary flex items-center gap-1.5",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Submissions"]}),e.jsx("svg",{className:`w-5 h-5 text-primary transition-transform duration-200 ${v?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),v&&e.jsxs("div",{className:"mt-2 space-y-2 animate-slide-up",children:[o&&e.jsx("div",{className:"px-2 py-1.5 bg-background/50 rounded-xl border border-surfaceHover",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Last submission:"}),e.jsx("span",{className:"font-semibold text-text-main",children:o})]})}),k&&k.length>0&&e.jsxs("div",{className:"px-2 py-1.5 bg-background/50 rounded-xl border border-surfaceHover",children:[e.jsxs("div",{onClick:N=>{N.stopPropagation(),c(!f)},className:"flex items-center justify-between cursor-pointer hover:bg-surfaceHover/30 -mx-2 px-2 py-1 rounded-lg transition-colors",children:[e.jsxs("div",{className:"text-xs text-text-muted",children:["Recent Submissions (",k.length,")"]}),e.jsx("svg",{className:`w-4 h-4 text-text-muted transition-transform duration-200 ${f?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f&&e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto mt-2 animate-slide-up scrollbar-hide",children:k.slice(0,5).map((N,M)=>e.jsxs("a",{href:`https://leetcode.com/problems/${N.titleSlug||N.title.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}/`,target:"_blank",rel:"noopener noreferrer",onClick:E=>E.stopPropagation(),className:"block text-xs border-l-2 border-surfaceHover hover:border-primary pl-2 py-1 hover:bg-surface rounded transition-all",children:[e.jsx("div",{className:"font-medium text-text-main hover:text-primary transition-colors",children:N.title}),e.jsxs("div",{className:"text-text-muted flex gap-2 mt-1",children:[e.jsx("span",{className:`
                                ${N.statusDisplay==="Accepted"?"text-secondary":"text-leetcode-hard"}
                              `,children:N.statusDisplay}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:N.lang}),N.runtime&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:N.runtime})]})]})]},M))})]})]})]})]}),s&&e.jsxs("div",{className:"border-t border-surfaceHover p-4 bg-surfaceHover/30 space-y-4 animate-slide-up",children:[C&&C.rating>0&&e.jsxs("div",{className:"bg-surface p-3 rounded-xl border border-surfaceHover shadow-sm",children:[e.jsx("h4",{className:"font-semibold text-sm mb-2 text-text-main",children:"Contest Stats"}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-text-muted",children:"Rating:"}),e.jsx("span",{className:"ml-1 font-semibold text-primary",children:C.rating})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-muted",children:"Attended:"}),e.jsx("span",{className:"ml-1 font-semibold text-text-main",children:C.attended})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-muted",children:"Rank:"}),e.jsxs("span",{className:"ml-1 font-semibold text-text-main",children:["#",C.ranking?.toLocaleString()]})]})]})]}),H&&(()=>{const N=T(i);return N?e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-4 rounded-xl border border-surfaceHover shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üìÖ"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm text-text-main",children:"Activity Calendar"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Browse monthly submissions"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-background/60 px-2 py-1.5 rounded-lg border border-surfaceHover/50",children:[e.jsx("span",{className:"text-[9px] text-text-muted mr-1",children:"Less"}),[0,1,2,3,4].map(M=>e.jsx("div",{className:`w-[10px] h-[10px] rounded-[2px] border ${_(M*2)}`},M)),e.jsx("span",{className:"text-[9px] text-text-muted ml-1",children:"More"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{onClick:M=>{M.stopPropagation(),i<11&&x(i+1)},disabled:i>=11,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 border border-primary/30 disabled:opacity-30 disabled:cursor-not-allowed transition-all group",children:e.jsx("svg",{className:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-bold text-primary",children:[N.monthName," ",N.year]}),e.jsx("div",{className:"text-[10px] text-text-muted",children:(()=>{const M=N.weeks.flat().filter(E=>E&&E.count>0).reduce((E,A)=>E+A.count,0);return`${M} submission${M!==1?"s":""}`})()})]}),e.jsx("button",{onClick:M=>{M.stopPropagation(),i>0&&x(i-1)},disabled:i<=0,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 border border-primary/30 disabled:opacity-30 disabled:cursor-not-allowed transition-all group",children:e.jsx("svg",{className:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"bg-background/70 backdrop-blur-sm rounded-xl p-3 border border-surfaceHover/60",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((M,E)=>e.jsx("div",{className:"text-[9px] text-text-muted text-center font-semibold",children:M},E))}),N.weeks.map((M,E)=>e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:M.map((A,K)=>e.jsx("div",{className:`aspect-square rounded-md flex items-center justify-center text-[9px] font-bold transition-all duration-300 relative group ${A?`${_(A.count,A.isToday)} cursor-pointer hover:scale-125 hover:shadow-xl hover:z-20 ${S?.dateStr===A.dateStr?"scale-125 shadow-xl z-20":""}`:"bg-transparent"}`,onMouseEnter:()=>A&&y(A),onMouseLeave:()=>y(null),children:A&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`${A.count>0?"text-white font-bold drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]":"text-text-muted font-semibold"}`,children:A.day}),A.isToday&&e.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-1.5 h-1.5 bg-amber-400 rounded-full animate-pulse"})]})},K))},E))]}),S&&e.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gradient-to-br from-surface to-surfaceHover border-2 border-primary/40 rounded-xl px-4 py-3 shadow-2xl z-50 animate-fade-in pointer-events-none backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[S.isToday&&e.jsx("span",{className:"text-base",children:"‚≠ê"}),e.jsx("div",{className:"text-sm font-bold text-primary",children:S.count===0?"No activity":`${S.count} submission${S.count!==1?"s":""}`})]}),e.jsx("div",{className:"text-[11px] text-text-muted",children:S.date.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),S.isToday&&e.jsx("div",{className:"text-[10px] text-amber-400 font-semibold mt-1",children:"Today"})]})]}):null})(),b&&b.length>0&&e.jsxs("div",{className:"bg-surface p-3 rounded-xl border border-surfaceHover shadow-sm",children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2 text-text-main",children:["Badges (",b.length,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[b.slice(0,5).map(N=>e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1.5 bg-primary/10 border border-primary/20 rounded-lg text-xs text-primary hover:bg-primary/20 transition-colors",title:N.displayName,children:[N.icon?e.jsx("img",{src:N.icon,alt:N.displayName,className:"w-5 h-5 object-contain",onError:M=>{M.target.style.display="none",M.target.nextSibling.textContent="üèÖ "+M.target.nextSibling.textContent}}):e.jsx("span",{children:"üèÖ"}),e.jsx("span",{className:"max-w-[100px] truncate font-medium",children:N.displayName})]},N.id)),b.length>5&&e.jsxs("span",{className:"px-2 py-1 text-xs text-text-muted",children:["+",b.length-5," more"]})]})]}),!r&&e.jsx("button",{onClick:async N=>{if(N.stopPropagation(),window.confirm(`Remove ${u.username} from friends?`))try{console.log("Sending REMOVE_FRIEND message for:",u.username);const M=await chrome.runtime.sendMessage({type:"REMOVE_FRIEND",username:u.username});console.log("Remove friend response:",M),M&&M.success?setTimeout(()=>{window.location.reload()},100):alert(`Failed to remove friend: ${M?.error||"Unknown error"}`)}catch(M){console.error("Error removing friend:",M),alert("Failed to remove friend. Please try again.")}},className:"w-full py-2 bg-leetcode-hard/10 hover:bg-leetcode-hard/20 text-leetcode-hard font-semibold rounded-xl transition-all duration-300 text-sm border border-leetcode-hard/20 active:scale-95",children:"üóëÔ∏è Remove Friend"})]})]})}function ps({friends:t,myData:s,myUsername:n}){const[r,a]=p.useState(null),[l,d]=p.useState("all"),f=i=>{if(!i)return!1;const x=typeof i=="string"?JSON.parse(i):i,o=new Date().toISOString().split("T")[0];for(const[u,w]of Object.entries(x))if(w>0&&new Date(parseInt(u)*1e3).toISOString().split("T")[0]===o)return!0;return!1},c=(i,x)=>{if(!i)return 0;try{const o=typeof i=="string"?JSON.parse(i):i,u=new Date;u.setHours(0,0,0,0);let w;if(x==="week"){w=new Date(u);const k=u.getDay(),H=k===0?6:k-1;w.setDate(u.getDate()-H)}else if(x==="month")w=new Date(u.getFullYear(),u.getMonth(),1);else return 0;w.setHours(0,0,0,0);const C=Math.floor(w.getTime()/1e3);let b=0;for(const[k,H]of Object.entries(o))parseInt(k)>=C&&H>0&&(b+=H);return b}catch(o){return console.error("Error calculating period problems:",o),0}},v=t.filter(i=>i.profile?.username!==n),g=s?[...v,s]:v,S=[...g].sort((i,x)=>{if(l==="all")return(x.stats?.total||0)-(i.stats?.total||0);if(l==="week"){const o=c(i.submissionCalendar,"week");return c(x.submissionCalendar,"week")-o}else if(l==="month"){const o=c(i.submissionCalendar,"month");return c(x.submissionCalendar,"month")-o}return 0}),y=i=>{!i||!i.profile||a(r?.profile?.username===i.profile.username?null:i)};return e.jsxs("div",{className:"bg-background",children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur-sm border-b border-surfaceHover px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d("all"),className:`flex-1 py-2 px-3 rounded-xl text-xs font-semibold transition-all ${l==="all"?"bg-primary text-inverted shadow-lg":"bg-surface text-text-muted hover:text-text-main"}`,children:"All Time"}),e.jsx("button",{onClick:()=>d("week"),className:`flex-1 py-2 px-3 rounded-xl text-xs font-semibold transition-all ${l==="week"?"bg-primary text-inverted shadow-lg":"bg-surface text-text-muted hover:text-text-main"}`,children:"This Week"}),e.jsx("button",{onClick:()=>d("month"),className:`flex-1 py-2 px-3 rounded-xl text-xs font-semibold transition-all ${l==="month"?"bg-primary text-inverted shadow-lg":"bg-surface text-text-muted hover:text-text-main"}`,children:"This Month"})]}),g.filter(i=>i&&i.submissionCalendar&&f(i.submissionCalendar)).length>0&&e.jsxs("div",{className:"mt-2 px-3 py-1.5 bg-secondary/10 border border-secondary/30 rounded-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-lg animate-bounce",children:"üî•"}),e.jsxs("span",{className:"text-xs text-secondary font-semibold",children:[g.filter(i=>i&&i.submissionCalendar&&f(i.submissionCalendar)).length," ",g.filter(i=>i&&i.submissionCalendar&&f(i.submissionCalendar)).length===1?"person":"people"," solving today!"]})]})]}),S.length===0?e.jsx("div",{className:"p-8 text-center text-text-muted animate-fade-in",children:e.jsx("p",{children:"No friends to display"})}):e.jsx("div",{className:"p-4 space-y-2.5 animate-slide-up",children:S.filter(i=>i&&i.profile).map((i,x)=>{let o=i.stats;if(l!=="all"){const u=c(i.submissionCalendar,l);o={...i.stats,total:u,_filteredByTime:!0}}return e.jsx("div",{children:e.jsx(hs,{friend:{...i,stats:o},rank:x+1,isExpanded:r?.profile?.username===i.profile.username,onClick:()=>y(i),isCurrentUser:n&&i.profile.username===n,mySubmissionCalendar:s?.submissionCalendar,timeFilter:l})},i.profile.username)})})]})}function fs(t){const s=[];if(!t||!t.stats)return s;const{stats:n,submissionCalendar:r,recentSubmissions:a}=t,l=gs(n);l&&s.push(l);const d=bs(r);d&&s.push(d);const f=ys(r);f&&s.push(f);const c=vs(a);c&&s.push(c);const v=js(n);return v&&s.push(v),s}function gs(t){const{easy:s=0,medium:n=0,hard:r=0,total:a=0}=t;if(a===0)return null;const l=s/a*100,d=n/a*100,f=r/a*100;let c,v,g;return f>30?(c=`You're a challenge seeker! ${f.toFixed(0)}% of your solutions are Hard problems. üí™`,v="üî•",g="achievement"):d>50?(c=`Balanced approach! You focus on Medium problems (${d.toFixed(0)}%). Keep pushing! üìà`,v="‚öñÔ∏è",g="neutral"):l>60&&(c="Strong foundation with Easy problems! Ready to tackle more Medium challenges? üéØ",v="üí°",g="suggestion"),{message:c,icon:v,type:g,category:"Difficulty Preference"}}function bs(t){if(!t)return null;try{const s=typeof t=="string"?JSON.parse(t):t,n=new Date;n.setHours(0,0,0,0);let r=0;for(let f=0;f<7;f++){const c=new Date(n);c.setDate(c.getDate()-f);const v=Math.floor(c.getTime()/1e3).toString();s[v]>0&&r++}let a,l,d;return r===7?(a="Perfect week! You solved problems every day for 7 days straight! üåü",l="üéâ",d="achievement"):r>=5?(a=`Great consistency! ${r} active days this week. Keep it up! ‚ö°`,l="‚≠ê",d="achievement"):r>=3?(a=`${r} days active this week. Try to maintain regular practice! üí™`,l="ÔøΩ",d="neutral"):(a=`Only ${r} active days this week. Let's get back on track! üéØ`,l="üí°",d="suggestion"),{message:a,icon:l,type:d,category:"Weekly Consistency"}}catch{return null}}function ys(t){if(!t)return null;try{const s=typeof t=="string"?JSON.parse(t):t,n=Array(7).fill(0),r=new Date;r.setHours(0,0,0,0);for(let c=0;c<30;c++){const v=new Date(r);v.setDate(v.getDate()-c);const g=Math.floor(v.getTime()/1e3).toString();if(s[g]>0){const S=v.getDay();n[S]++}}const a=Math.max(...n);if(a===0)return null;const l=n.indexOf(a),d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return{message:`Your most productive day is ${d[l]}! You've been most active on ${d[l]}s. üìÖ`,icon:"ÔøΩ",type:"neutral",category:"Best Solving Days"}}catch{return null}}function vs(t){if(!t||t.length===0)return null;const s=new Date;s.setHours(0,0,0,0);const n=new Date(s);n.setDate(s.getDate()-3);const r=t.filter(f=>new Date(f.timestamp*1e3)>=n).length;let a,l,d;return r>=5?(a=`On fire! ${r} submissions in the last 3 days! üî•`,l="üöÄ",d="achievement"):r>=2?(a=`Good momentum with ${r} recent submissions! Keep going! ÔøΩ`,l="‚ö°",d="neutral"):r===1?(a="Getting started! Let's build that momentum! ÔøΩ",l="üí°",d="suggestion"):(a="Time to get coding! Start with an easy problem to warm up! üåü",l="üí°",d="suggestion"),{message:a,icon:l,type:d,category:"Recent Activity"}}function js(t){const{total:s=0}=t;if(s===0)return null;let n,r,a;return s>=1e3?(n=`LeetCode Master! Over ${s} problems solved! You're in the elite club! ÔøΩ`,r="üëë",a="achievement"):s>=500?(n="Halfway to 1000! Keep grinding, you're doing amazing! üéØ",r="üéñÔ∏è",a="achievement"):s>=100?(n=`Century club member! ${s} problems solved and counting! ÔøΩ`,r="ÔøΩ",a="achievement"):s>=50?(n=`Great progress! ${s} problems down. Next milestone: 100! üìä`,r="‚≠ê",a="neutral"):(n=`Building momentum! ${s} problems solved. Keep going! üöÄ`,r="üå±",a="neutral"),{message:n,icon:r,type:a,category:"Achievement Level"}}function Ns(t=[]){if(!t||t.length===0)return{topics:[],totalAttempts:0};const s=new Map;return t.forEach(r=>{const a=r.title||"Unknown",l=r.statusDisplay||"";s.has(a)||s.set(a,{title:a,attempts:0,accepted:0,difficulty:_e()});const d=s.get(a);d.attempts++,l==="Accepted"&&d.accepted++}),{topics:Array.from(s.values()).map(r=>({...r,successRate:r.attempts>0?(r.accepted/r.attempts*100).toFixed(1):"0"})).sort((r,a)=>a.attempts-r.attempts).slice(0,10),totalAttempts:t.length}}function ws(t=[]){if(!t||t.length===0)return{totalAttempts:0,accepted:0,successRate:0,byDifficulty:{easy:{accepted:0,total:0},medium:{accepted:0,total:0},hard:{accepted:0,total:0}}};const s={totalAttempts:t.length,accepted:0,byDifficulty:{easy:{accepted:0,total:0},medium:{accepted:0,total:0},hard:{accepted:0,total:0}}};return t.forEach(n=>{const r=n.statusDisplay==="Accepted";r&&s.accepted++;const a=_e(n.title||"").toLowerCase();s.byDifficulty[a]&&(s.byDifficulty[a].total++,r&&s.byDifficulty[a].accepted++)}),s.successRate=s.totalAttempts>0?(s.accepted/s.totalAttempts*100).toFixed(1):0,s}function ks(t,s=[]){if(!t||s.length===0)return null;const n=t.stats||{total:0,easy:0,medium:0,hard:0},r=s.reduce((d,f)=>{const c=f.stats||{total:0,easy:0,medium:0,hard:0};return{total:d.total+c.total,easy:d.easy+c.easy,medium:d.medium+c.medium,hard:d.hard+c.hard,streak:d.streak+(f.streak||0)}},{total:0,easy:0,medium:0,hard:0,streak:0}),a=s.length,l={total:Math.round(r.total/a),easy:Math.round(r.easy/a),medium:Math.round(r.medium/a),hard:Math.round(r.hard/a),streak:Math.round(r.streak/a)};return{user:n,average:l,comparison:{total:n.total-l.total,easy:n.easy-l.easy,medium:n.medium-l.medium,hard:n.hard-l.hard,streak:(t.streak||0)-l.streak}}}function _e(t){return"Medium"}function Ss({userData:t,friendsData:s=[]}){const[n,r]=p.useState([]),[a,l]=p.useState(null),[d,f]=p.useState(!1),[c,v]=p.useState(null),[g,S]=p.useState("insights"),[y]=p.useState(()=>new Date(Date.now()-10080*60*1e3)),i=(b,k="w-8 h-8")=>({flame:e.jsx(ne,{className:k}),rocket:e.jsx(ue,{className:k}),zap:e.jsx(oe,{className:k}),star:e.jsx(be,{className:k}),lightbulb:e.jsx(ut,{className:k}),party:e.jsx(bt,{className:k}),dumbbell:e.jsx(at,{className:k}),crown:e.jsx(tt,{className:k}),medal:e.jsx(ft,{className:k}),trophy:e.jsx(Fe,{className:k}),scale:e.jsx(wt,{className:k}),sprout:e.jsx(Dt,{className:k}),target:e.jsx(Te,{className:k}),chart:e.jsx(me,{className:k})})[b]||e.jsx(be,{className:k});if(p.useEffect(()=>{if(t){const b=fs(t);r(b)}},[t]),!t)return e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl mb-3",children:"üìä"}),e.jsx("p",{className:"text-text-muted text-sm",children:"No data available"}),e.jsx("p",{className:"text-text-muted text-xs mt-1",children:"Add your LeetCode username to see analytics"})]})});const x=ws(t.recentSubmissions||[]),o=Ns(t.recentSubmissions||[]),u=s.length>0?ks(t,s):null,w=(b,k)=>{k.stopPropagation(),v(b),f(!0)},C=async(b,k)=>{k.stopPropagation();const H=`üéØ My LeetCode Insight:

${b.icon} ${b.category}
${b.message}

#LeetCode #CodingJourney`;if(navigator.clipboard)try{await navigator.clipboard.writeText(H),alert("‚úì Insight copied to clipboard!")}catch(W){console.error("Failed to copy:",W)}};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-1 bg-surface border border-surfaceHover rounded-xl p-1",children:[e.jsx("button",{onClick:()=>S("insights"),className:`flex-1 py-2 px-3 rounded-lg text-xs font-semibold transition-all ${g==="insights"?"bg-primary text-white shadow-md":"text-text-muted hover:text-text-primary hover:bg-surfaceHover"}`,children:"üí° Insights"}),e.jsx("button",{onClick:()=>S("analytics"),className:`flex-1 py-2 px-3 rounded-lg text-xs font-semibold transition-all ${g==="analytics"?"bg-primary text-white shadow-md":"text-text-muted hover:text-text-primary hover:bg-surfaceHover"}`,children:"üìä Analytics"}),e.jsx("button",{onClick:()=>S("comparison"),className:`flex-1 py-2 px-3 rounded-lg text-xs font-semibold transition-all ${g==="comparison"?"bg-primary text-white shadow-md":"text-text-muted hover:text-text-primary hover:bg-surfaceHover"}`,children:"üë• vs Friends"})]}),g==="insights"&&e.jsx(e.Fragment,{children:n&&n.length>0?e.jsxs(e.Fragment,{children:[n.map((b,k)=>e.jsxs("div",{className:`
                    bg-surface border rounded-xl p-4 transition-all duration-300 cursor-pointer
                    ${b.type==="achievement"?"border-accent/40 hover:border-accent/60":""}
                    ${b.type==="neutral"?"border-primary/30 hover:border-primary/50":""}
                    ${b.type==="suggestion"?"border-leetcode-medium/30 hover:border-leetcode-medium/50":""}
                    ${a===k?"ring-2 ring-primary/50 scale-[1.02]":"hover:scale-[1.01]"}
                  `,onClick:()=>l(a===k?null:k),children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:i(b.icon,"w-8 h-8 text-primary")}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-semibold text-text-muted uppercase tracking-wide",children:b.category}),b.type==="achievement"&&e.jsx("span",{className:"text-xs bg-accent/20 text-accent px-2 py-0.5 rounded-full",children:"Achievement"}),b.type==="suggestion"&&e.jsx("span",{className:"text-xs bg-leetcode-medium/20 text-leetcode-medium px-2 py-0.5 rounded-full",children:"Tip"})]}),e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:b.message})]}),e.jsx("div",{className:`
                      text-text-muted transition-transform
                      ${a===k?"rotate-180":""}
                    `,children:"‚ñº"})]}),a===k&&e.jsx("div",{className:"mt-4 pt-4 border-t border-surfaceHover animate-slide-up",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:H=>w(b,H),className:"flex-1 py-2 bg-primary/10 hover:bg-primary/20 text-primary rounded-lg text-xs font-semibold transition-colors",children:"View Details"}),e.jsx("button",{onClick:H=>C(b,H),className:"flex-1 py-2 bg-accent/10 hover:bg-accent/20 text-accent rounded-lg text-xs font-semibold transition-colors",children:"Share"})]})})]},k)),e.jsx("div",{className:"bg-gradient-to-br from-primary/5 to-accent/5 border border-primary/20 rounded-xl p-4 text-center",children:e.jsx("p",{className:"text-xs text-text-muted mb-2",children:"üí° Insights update daily based on your solving patterns"})})]}):e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üìä"}),e.jsx("p",{className:"text-text-muted",children:"No insights available yet. Keep solving!"})]})}),g==="analytics"&&e.jsxs("div",{className:"space-y-3",children:[x&&e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"üéØ"}),e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Success Rate"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-surfaceHover rounded-lg p-3",children:[e.jsxs("div",{className:"text-2xl font-bold text-accent",children:[x.successRate,"%"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Overall"})]}),e.jsxs("div",{className:"bg-surfaceHover rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:x.accepted}),e.jsx("div",{className:"text-xs text-text-muted",children:"Accepted"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Easy"}),e.jsx("span",{className:"font-semibold text-leetcode-easy",children:x.byDifficulty.easy.total>0?`${(x.byDifficulty.easy.accepted/x.byDifficulty.easy.total*100).toFixed(0)}%`:"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Medium"}),e.jsx("span",{className:"font-semibold text-leetcode-medium",children:x.byDifficulty.medium.total>0?`${(x.byDifficulty.medium.accepted/x.byDifficulty.medium.total*100).toFixed(0)}%`:"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Hard"}),e.jsx("span",{className:"font-semibold text-leetcode-hard",children:x.byDifficulty.hard.total>0?`${(x.byDifficulty.hard.accepted/x.byDifficulty.hard.total*100).toFixed(0)}%`:"N/A"})]})]})]}),o&&o.topics.length>0&&e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"üìö"}),e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Topic Performance"})]}),e.jsx("div",{className:"space-y-2",children:o.topics.slice(0,5).map((b,k)=>e.jsxs("div",{className:"bg-surfaceHover rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("span",{className:"text-xs text-text-primary font-medium line-clamp-1 flex-1",children:b.title}),e.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${b.successRate>=80?"bg-green-500/20 text-green-400":b.successRate>=50?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:[b.successRate,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-text-muted",children:[e.jsxs("span",{children:[b.attempts," problems"]}),e.jsx("span",{children:"‚Ä¢"}),e.jsxs("span",{children:[b.accepted," solved"]})]}),e.jsx("div",{className:"w-full bg-surfaceHover rounded-full h-1 mt-2 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${b.successRate>=80?"bg-green-500":b.successRate>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${b.successRate}%`}})})]},k))})]}),!x&&!o&&e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üìä"}),e.jsx("p",{className:"text-text-muted text-sm",children:"No analytics data available yet"}),e.jsx("p",{className:"text-text-muted text-xs mt-1",children:"Start solving to see your stats!"})]})]}),g==="comparison"&&e.jsx("div",{className:"space-y-3",children:u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"üë•"}),e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"You vs Friends Average"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Total Problems"}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:u.user.total}),e.jsxs("div",{className:`text-xs font-semibold mt-1 ${u.comparison.total>=0?"text-accent":"text-leetcode-hard"}`,children:[u.comparison.total>=0?"+":"",u.comparison.total," vs avg"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Current Streak"}),e.jsx("div",{className:"text-2xl font-bold text-accent",children:t.streak||0}),e.jsxs("div",{className:`text-xs font-semibold mt-1 ${u.comparison.streak>=0?"text-accent":"text-leetcode-hard"}`,children:[u.comparison.streak>=0?"+":"",u.comparison.streak," vs avg"]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Easy"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-leetcode-easy",children:u.user.easy}),e.jsxs("span",{className:`text-[10px] ${u.comparison.easy>=0?"text-accent":"text-leetcode-hard"}`,children:["(",u.comparison.easy>=0?"+":"",u.comparison.easy,")"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Medium"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-leetcode-medium",children:u.user.medium}),e.jsxs("span",{className:`text-[10px] ${u.comparison.medium>=0?"text-accent":"text-leetcode-hard"}`,children:["(",u.comparison.medium>=0?"+":"",u.comparison.medium,")"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Hard"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-leetcode-hard",children:u.user.hard}),e.jsxs("span",{className:`text-[10px] ${u.comparison.hard>=0?"text-accent":"text-leetcode-hard"}`,children:["(",u.comparison.hard>=0?"+":"",u.comparison.hard,")"]})]})]})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-accent/5 to-primary/5 border border-accent/20 rounded-xl p-4 text-center",children:e.jsx("p",{className:"text-xs text-text-muted",children:u.comparison.total>=0?"üéâ You're ahead of the average! Keep pushing!":"üí™ Keep grinding! You'll catch up in no time!"})})]}):e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üë•"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Add friends to see comparisons"}),e.jsx("p",{className:"text-text-muted text-xs mt-1",children:"Compare your progress with others!"})]})}),d&&c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto scrollbar-hide",onClick:()=>f(!1),children:e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-2xl p-6 max-w-2xl w-full shadow-2xl animate-bounce-in my-8",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i(c.icon,"w-12 h-12 text-primary"),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-1",children:c.category}),c.type==="achievement"&&e.jsx("span",{className:"text-xs bg-accent/20 text-accent px-2 py-1 rounded-full",children:"üèÜ Achievement"}),c.type==="suggestion"&&e.jsx("span",{className:"text-xs bg-leetcode-medium/20 text-leetcode-medium px-2 py-1 rounded-full",children:"üí° Tip"})]}),e.jsx("button",{onClick:()=>f(!1),className:"text-text-muted hover:text-text-primary transition-colors text-xl",children:"‚úï"})]}),e.jsx("div",{className:"bg-surfaceHover rounded-xl p-4 mb-4",children:e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:c.message})}),c.category==="Difficulty Preference"&&e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"bg-leetcode-easy/10 border border-leetcode-easy/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Easy"}),e.jsx("div",{className:"text-xl font-bold text-leetcode-easy",children:t?.stats?.easy||0}),e.jsxs("div",{className:"text-[10px] text-text-muted mt-1",children:[((t?.stats?.easy||0)/(t?.stats?.total||1)*100).toFixed(0),"% of total"]})]}),e.jsxs("div",{className:"bg-leetcode-medium/10 border border-leetcode-medium/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Medium"}),e.jsx("div",{className:"text-xl font-bold text-leetcode-medium",children:t?.stats?.medium||0}),e.jsxs("div",{className:"text-[10px] text-text-muted mt-1",children:[((t?.stats?.medium||0)/(t?.stats?.total||1)*100).toFixed(0),"% of total"]})]}),e.jsxs("div",{className:"bg-leetcode-hard/10 border border-leetcode-hard/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Hard"}),e.jsx("div",{className:"text-xl font-bold text-leetcode-hard",children:t?.stats?.hard||0}),e.jsxs("div",{className:"text-[10px] text-text-muted mt-1",children:[((t?.stats?.hard||0)/(t?.stats?.total||1)*100).toFixed(0),"% of total"]})]})]}),c.category==="Weekly Consistency"&&e.jsxs("div",{className:"bg-primary/10 border border-primary/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-primary mb-3",children:"üìä Weekly Breakdown"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-text-muted",children:"Target: 5+ days/week"}),e.jsx("span",{className:"text-xs font-bold text-primary",children:"Current: Check your calendar"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-text-muted",children:["Streak: ",t?.stats?.streak||0," days"]}),e.jsx("span",{className:"text-xs font-bold text-accent",children:"üî• Keep it going!"})]})]})]}),c.category==="Best Solving Days"&&e.jsxs("div",{className:"bg-accent/10 border border-accent/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-accent mb-3",children:"üìÖ Optimize Your Schedule"}),e.jsx("p",{className:"text-xs text-text-muted mb-3",children:"You're most productive at a certain time. Block this time for deep work and problem-solving practice."}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].slice(0,7).map((b,k)=>e.jsxs("div",{className:"bg-surface rounded p-2 text-center border border-surfaceHover",children:[e.jsx("div",{className:"text-[10px] font-semibold text-text-muted",children:b}),e.jsx("div",{className:"text-xs mt-1 h-6 flex items-center justify-center",children:k===new Date().getDay()?"‚óè":"‚óã"})]},k))})]}),c.category==="Recent Activity"&&e.jsxs("div",{className:"bg-leetcode-medium/10 border border-leetcode-medium/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-leetcode-medium mb-3",children:"üéØ Recent Submissions"}),t?.recentSubmissions&&t.recentSubmissions.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Last 7 days:"}),e.jsxs("span",{className:"font-bold",children:[t.recentSubmissions.filter(b=>new Date(b.timestamp*1e3)>y).length," submissions"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Acceptance rate:"}),e.jsxs("span",{className:"font-bold",children:[(t.recentSubmissions.filter(b=>b.statusDisplay==="Accepted").length/t.recentSubmissions.length*100).toFixed(1),"%"]})]})]}):e.jsx("p",{className:"text-xs text-text-muted",children:"No recent activity yet. Start solving problems!"})]}),c.category==="Achievement Level"&&e.jsxs("div",{className:"bg-accent/10 border border-accent/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-accent mb-3",children:"üéñÔ∏è Progress Metrics"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-text-muted",children:"Total Solved:"}),e.jsx("span",{className:"text-sm font-bold text-accent",children:t?.stats?.total||0})]}),e.jsx("div",{className:"w-full bg-surfaceHover rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-accent to-primary h-full transition-all",style:{width:`${Math.min((t?.stats?.total||0)/1e3*100,100)}%`}})}),e.jsxs("div",{className:"flex justify-between text-[10px] text-text-muted",children:[e.jsx("span",{children:"0"}),e.jsx("span",{children:"1000 (Master)"})]})]})]}),c.type==="suggestion"&&e.jsxs("div",{className:"bg-primary/10 border border-primary/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-primary mb-2",children:"üí° Actionable Tips"}),e.jsxs("ul",{className:"text-xs text-text-muted space-y-1.5",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚úì"}),e.jsx("span",{children:"Set a daily goal: Complete at least 1 problem every day"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚úì"}),e.jsx("span",{children:"Use the problem queue to track what to solve next"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚úì"}),e.jsx("span",{children:"Review solutions before moving to the next problem"})]})]})]}),c.type==="achievement"&&e.jsxs("div",{className:"bg-accent/10 border border-accent/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-accent mb-2",children:"üéâ Next Steps"}),e.jsxs("ul",{className:"text-xs text-text-muted space-y-1.5",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚Üí"}),e.jsx("span",{children:"Maintain this momentum and consistency"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚Üí"}),e.jsx("span",{children:"Challenge yourself with harder problems"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚Üí"}),e.jsx("span",{children:"Share your progress with friends for motivation"})]})]})]}),e.jsx("button",{onClick:()=>f(!1),className:"w-full py-3 bg-primary hover:bg-primaryHover text-inverted rounded-xl font-semibold transition-colors",children:"Close"})]})})]})}function Cs({submissionCalendar:t}){const[s,n]=p.useState("bar");if(!t)return e.jsxs("div",{className:"text-center py-8 text-text-muted",children:[e.jsx("span",{className:"text-3xl mb-2 block",children:"üìä"}),e.jsx("p",{className:"text-sm",children:"No data available"})]});const a=(()=>{const y=[],i=new Date;for(let x=29;x>=0;x--){const o=new Date(i);o.setDate(i.getDate()-x);const u=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate())),w=Math.floor(u.getTime()/1e3).toString(),C=parseInt(t[w])||0;y.push({date:o,label:o.getDate().toString(),count:C,isToday:x===0})}return y})(),l=Math.max(...a.map(y=>y.count),1),d=320,f=120,c={top:10,right:10,bottom:20,left:25},v=d-c.left-c.right,g=f-c.top-c.bottom,S=v/a.length;return e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-5 rounded-xl border border-surfaceHover shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"üìà"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Progress Trend"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Last 30 days"})]})]}),e.jsxs("div",{className:"flex gap-1 bg-background/50 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>n("bar"),className:`px-2 py-1 text-[10px] font-semibold rounded transition-all ${s==="bar"?"bg-primary text-white":"text-text-muted hover:text-text-main"}`,children:"Bar"}),e.jsx("button",{onClick:()=>n("line"),className:`px-2 py-1 text-[10px] font-semibold rounded transition-all ${s==="line"?"bg-primary text-white":"text-text-muted hover:text-text-main"}`,children:"Line"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-6 top-1/2 -translate-y-1/2 -rotate-90 origin-center",children:e.jsx("span",{className:"text-[9px] font-semibold text-text-muted uppercase tracking-wide",children:"Submissions"})}),e.jsxs("svg",{width:d,height:f,className:"overflow-visible",children:[[0,Math.ceil(l/2),l].map((y,i)=>e.jsx("text",{x:c.left-5,y:c.top+g-y/l*g,textAnchor:"end",className:"text-[8px] fill-text-muted",dominantBaseline:"middle",children:y},i)),[0,.5,1].map((y,i)=>e.jsx("line",{x1:c.left,y1:c.top+g*(1-y),x2:c.left+v,y2:c.top+g*(1-y),stroke:"currentColor",strokeWidth:"1",className:"stroke-surfaceHover opacity-30",strokeDasharray:"2,2"},i)),s==="bar"?e.jsx(e.Fragment,{children:a.map((y,i)=>{const x=y.count/l*g,o=c.left+i*S,u=c.top+g-x;return e.jsxs("g",{children:[e.jsx("rect",{x:o+S*.15,y:u,width:S*.7,height:x||2,fill:"currentColor",className:`${y.isToday?"fill-primary":y.count>0?"fill-primary/70":"fill-surfaceHover"} transition-all duration-300 hover:fill-primary`,rx:"2"}),i%5===0&&e.jsx("text",{x:o+S/2,y:f-5,textAnchor:"middle",className:"text-[8px] fill-text-muted",children:y.label})]},i)})}):e.jsxs(e.Fragment,{children:[e.jsx("path",{d:a.map((y,i)=>{const x=c.left+i*S+S/2,o=c.top+g-y.count/l*g;return`${i===0?"M":"L"} ${x} ${o}`}).join(" "),fill:"none",stroke:"currentColor",strokeWidth:"2",className:"stroke-primary"}),a.map((y,i)=>{const x=c.left+i*S+S/2,o=c.top+g-y.count/l*g;return e.jsxs("g",{children:[e.jsx("circle",{cx:x,cy:o,r:y.isToday?4:y.count>0?3:2,fill:"currentColor",className:`${y.isToday?"fill-primary":y.count>0?"fill-primary/70":"fill-surfaceHover"} transition-all duration-300 hover:fill-primary hover:r-5`}),i%5===0&&e.jsx("text",{x,y:f-5,textAnchor:"middle",className:"text-[8px] fill-text-muted",children:y.label})]},i)})]})]}),e.jsx("div",{className:"text-center mt-1",children:e.jsx("span",{className:"text-[9px] font-semibold text-text-muted uppercase tracking-wide",children:"Days"})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-bold text-primary",children:a.reduce((y,i)=>y+i.count,0)}),e.jsx("div",{className:"text-[9px] text-text-muted",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-bold text-primary",children:(a.reduce((y,i)=>y+i.count,0)/30).toFixed(1)}),e.jsx("div",{className:"text-[9px] text-text-muted",children:"Avg/Day"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-bold text-primary",children:Math.max(...a.map(y=>y.count))}),e.jsx("div",{className:"text-[9px] text-text-muted",children:"Peak"})]})]})]})}function Ms(){const[t,s]=p.useState(!1),[n,r]=p.useState(""),[a,l]=p.useState("leetcode-solutions"),[d,f]=p.useState({total:0,pending:0,failed:0}),[c,v]=p.useState([]),[g,S]=p.useState("device"),[y,i]=p.useState(!1),[x,o]=p.useState(""),[u,w]=p.useState(""),[C,b]=p.useState("idle"),[k,H]=p.useState(""),[W,Y]=p.useState(""),[h,m]=p.useState(0),[T,D]=p.useState(!1),[_,N]=p.useState(""),[M,E]=p.useState(!1),[A,K]=p.useState(!1),[O,F]=p.useState(!1),[R,U]=p.useState(!1),B=p.useRef(null),L=p.useRef(null);p.useEffect(()=>(Q(),z(),V(),()=>{B.current&&clearInterval(B.current),L.current&&clearInterval(L.current)}),[]);const V=async()=>{try{const I=(await chrome.storage.local.get("github_device_flow_pending")).github_device_flow_pending;I&&I.expiresAt>Date.now()?(H(I.userCode),Y(I.verificationUri),m(Math.floor((I.expiresAt-Date.now())/1e3)),b("waiting"),P(5)):I&&await chrome.storage.local.remove("github_device_flow_pending")}catch(j){console.error("Error checking pending device flow:",j)}};p.useEffect(()=>{if(C==="waiting"&&h>0)return L.current=setInterval(()=>{m(j=>j<=1?(clearInterval(L.current),b("error"),o("Authorization code expired. Please try again."),chrome.storage.local.remove("github_device_flow_pending"),0):j-1)},1e3),()=>clearInterval(L.current)},[C,h]);const Q=async()=>{try{const j=await chrome.runtime.sendMessage({type:"GITHUB_GET_STATUS"});j?.success&&j.connected&&(s(!0),r(j.username||""),l(j.repo||"leetcode-solutions"),f({total:j.syncedCount||0,pending:0,failed:j.failedCount||0}))}catch(j){console.error("Failed to load connection status:",j)}},z=async()=>{try{const j=await chrome.storage.local.get(["synced_submissions","synced_problems","failed_syncs","recent_syncs"]);let I=j.synced_submissions||[];!j.synced_submissions&&j.synced_problems&&(I=j.synced_problems,await chrome.storage.local.set({synced_submissions:I})),f({total:I.length,pending:0,failed:(j.failed_syncs||[]).length}),v((j.recent_syncs||[]).slice(0,5))}catch(j){console.error("Error loading sync stats:",j)}},G=async()=>{o(""),w(""),b("loading");try{const j=await chrome.runtime.sendMessage({type:"GITHUB_DEVICE_CODE_REQUEST"});if(!j?.success){b("error"),j?.errorCode==="INVALID_CLIENT"?(o("GitHub OAuth not configured. Please use Personal Access Token instead."),S("pat")):o(j?.error||"Failed to start authentication");return}H(j.userCode),Y(j.verificationUri),m(j.expiresIn),b("waiting");try{await navigator.clipboard.writeText(j.userCode),D(!0),setTimeout(()=>D(!1),3e3)}catch{console.log("Could not auto-copy code")}await chrome.storage.local.set({github_device_flow_pending:{userCode:j.userCode,verificationUri:j.verificationUri,expiresAt:Date.now()+j.expiresIn*1e3}}),chrome.runtime.sendMessage({type:"SHOW_NOTIFICATION",title:"GitHub Code: "+j.userCode,message:"Enter this code on GitHub to connect. Code copied to clipboard!"}),setTimeout(()=>{window.open(j.verificationUri,"_blank")},1500),P(j.interval||5)}catch(j){console.error("Device flow error:",j),b("error"),o(j.message||"Failed to start authentication")}},P=j=>{const I=j*1e3;B.current=setInterval(async()=>{try{const q=await chrome.runtime.sendMessage({type:"GITHUB_DEVICE_POLL"});q?.success?(clearInterval(B.current),b("success"),await Z(q.token,q.username)):q?.shouldRetry?q?.errorCode==="SLOW_DOWN"&&q.interval&&(clearInterval(B.current),P(q.interval)):(clearInterval(B.current),b("error"),o(q?.error||"Authentication failed"))}catch(q){console.error("Poll error:",q)}},I)},Z=async(j,I)=>{F(!0);try{console.log("üîß completeSetup called with:",{token:!!j,githubUsername:I});const q=await chrome.runtime.sendMessage({type:"GITHUB_ENSURE_REPO",token:j,username:I,repo:a});if(console.log("üì¶ GITHUB_ENSURE_REPO response:",q),!q?.success)throw new Error(q?.error||"Failed to setup repository");const ce=await chrome.runtime.sendMessage({type:"GITHUB_STORE_CREDENTIALS",token:j,username:I,repo:a});if(console.log("üì¶ GITHUB_STORE_CREDENTIALS response:",ce),!ce?.success)throw new Error(ce?.error||"Failed to store credentials");r(I),s(!0),b("idle"),await chrome.storage.local.remove("github_device_flow_pending"),console.log("üíæ Setting github_sync_enabled to true in storage"),await chrome.storage.local.set({github_sync_enabled:!0}),console.log("üì¢ Sending GITHUB_SYNC_ENABLED message"),chrome.runtime.sendMessage({type:"GITHUB_SYNC_ENABLED"}),z();const Le=q.created?" (Repository created!)":"";w(`‚ú® Connected to github.com/${I}/${a}${Le}`)}catch(q){console.error("‚ùå completeSetup failed:",q),o(q.message),b("error")}finally{F(!1)}},ee=async()=>{B.current&&clearInterval(B.current),L.current&&clearInterval(L.current),await chrome.storage.local.remove("github_device_flow_pending"),b("idle"),H(""),Y(""),o("")},X=async()=>{try{await navigator.clipboard.writeText(k),D(!0),setTimeout(()=>D(!1),2e3)}catch(j){console.error("Failed to copy:",j)}},le=async j=>{if(j.preventDefault(),o(""),w(""),!_||!a){o("Please enter both token and repository name");return}if(!Bt(_)){o("Invalid token format. Use a Personal Access Token (ghp_...) or Fine-grained token (github_pat_...)");return}K(!0);try{const I=await chrome.runtime.sendMessage({type:"GITHUB_VALIDATE_TOKEN",token:_});if(!I?.success)throw new Error(I?.error||"Token validation failed");await Z(_,I.username),N("")}catch(I){o(I.message)}finally{K(!1)}},$e=async()=>{U(!0),o("");try{const j=await chrome.runtime.sendMessage({type:"GITHUB_CLEAR_CREDENTIALS"});if(j?.success)s(!1),r(""),f({total:0,pending:0,failed:0}),v([]),w("Disconnected from GitHub"),await chrome.storage.local.set({github_sync_enabled:!1}),chrome.runtime.sendMessage({type:"GITHUB_SYNC_DISABLED"});else throw new Error(j?.error||"Failed to disconnect")}catch(j){o(j.message)}finally{U(!1)}},Ee=async()=>{try{w("Retrying failed syncs...");const j=await chrome.runtime.sendMessage({type:"RETRY_FAILED_SYNCS"});j?.success&&w(`Retried ${j.retried} syncs. ${j.failed} still failed.`),setTimeout(z,2e3)}catch{o("Failed to retry syncs")}},Ae=j=>{const I=Math.floor(j/60),q=j%60;return`${I}:${q.toString().padStart(2,"0")}`},ae=C==="loading"||A||O;return e.jsxs("div",{className:"flex-1 overflow-y-auto scrollbar-hide p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-surface rounded-full flex items-center justify-center mx-auto mb-3 ring-2 ring-surfaceHover shadow-lg",children:e.jsx(te,{className:"w-8 h-8 text-text-main"})}),e.jsx("h2",{className:"text-xl font-bold text-text-main",children:"GitHub Auto-Sync"}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Automatically push accepted solutions to GitHub"})]}),x&&e.jsxs("div",{className:"p-3 bg-red-500/10 rounded-xl border border-red-500/20 text-sm text-red-400 animate-fade-in flex items-start gap-2",children:[e.jsx(he,{className:"w-4 h-4 mt-0.5 shrink-0"}),e.jsx("span",{children:x})]}),u&&e.jsxs("div",{className:"p-3 bg-green-500/10 rounded-xl border border-green-500/20 text-sm text-green-400 animate-fade-in flex items-start gap-2",children:[e.jsx(re,{className:"w-4 h-4 mt-0.5 shrink-0"}),e.jsx("span",{children:u})]}),t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-green-500/10 rounded-xl border border-green-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{className:"text-sm font-semibold text-green-400",children:"Connected"})]}),e.jsx("button",{onClick:$e,disabled:R,className:"text-xs text-text-muted hover:text-red-400 transition-colors disabled:opacity-50",children:R?"Disconnecting...":"Disconnect"})]}),e.jsxs("a",{href:`https://github.com/${n}/${a}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-text-main hover:text-primary transition-colors flex items-center gap-1",children:["github.com/",e.jsxs("span",{className:"font-mono text-primary",children:[n,"/",a]}),e.jsx(de,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl p-4 text-center border border-primary/20 shadow-md",children:[e.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:d.total}),e.jsx("div",{className:"text-xs font-medium text-text-muted",children:"Synced"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-500/5 rounded-xl p-4 text-center border border-blue-500/20 shadow-md",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:d.pending}),e.jsx("div",{className:"text-xs font-medium text-text-muted",children:"Pending"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-500/10 to-red-500/5 rounded-xl p-4 text-center border border-red-500/20 shadow-md",children:[e.jsx("div",{className:"text-3xl font-bold text-red-400 mb-2",children:d.failed}),e.jsx("div",{className:"text-xs font-medium text-text-muted",children:"Failed"})]})]}),d.failed>0&&e.jsxs("button",{onClick:Ee,className:"w-full py-3 bg-red-500/10 hover:bg-red-500/20 border border-red-500/20 rounded-xl text-sm font-medium text-red-400 transition-all flex items-center justify-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4"}),"Retry ",d.failed," Failed Sync",d.failed!==1?"s":""]}),c.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-text-main mb-2",children:"Recent Syncs"}),e.jsx("div",{className:"space-y-2",children:c.map((j,I)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-surface rounded-xl border border-surfaceHover",children:[e.jsx("span",{className:`text-lg ${j.status==="success"?"text-green-400":"text-red-400"}`,children:j.status==="success"?"‚úì":"‚úó"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-text-main truncate",children:j.problemTitle}),e.jsx("div",{className:"text-xs text-text-muted",children:new Date(j.timestamp).toLocaleDateString()})]}),e.jsx("span",{className:"text-xs text-text-muted font-mono",children:j.language})]},I))})]}),e.jsxs("div",{className:"p-4 bg-surface/50 rounded-xl border border-surfaceHover",children:[e.jsxs("p",{className:"text-xs font-medium text-text-main mb-2 flex items-center gap-2",children:[e.jsx(oe,{className:"w-3.5 h-3.5 text-primary"}),"Auto-sync is active"]}),e.jsx("p",{className:"text-xs text-text-muted",children:"Your accepted solutions will be automatically pushed with runtime, memory stats, and organized by topic/difficulty."})]})]}):C==="waiting"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-surface rounded-xl p-6 border border-surfaceHover text-center",children:[e.jsx("p",{className:"text-sm text-text-muted mb-3",children:"Enter this code on GitHub:"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("code",{className:"text-3xl font-mono font-bold text-primary tracking-widest",children:k}),e.jsx("button",{onClick:X,className:"p-2 hover:bg-surfaceHover rounded-lg transition-colors",title:"Copy code",children:T?e.jsx(re,{className:"w-5 h-5 text-green-400"}):e.jsx(Xe,{className:"w-5 h-5 text-text-muted"})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-text-muted mb-4",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsxs("span",{children:["Expires in ",Ae(h)]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-blue-400 mb-4",children:[e.jsx(se,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Waiting for authorization..."})]}),e.jsxs("a",{href:W,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-primary hover:bg-primaryHover text-inverted rounded-lg font-medium transition-colors",children:[e.jsx(te,{className:"w-4 h-4"}),"Open GitHub",e.jsx(de,{className:"w-3 h-3"})]})]}),e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:e.jsxs("ol",{className:"text-sm text-text-muted space-y-2 list-decimal list-inside",children:[e.jsx("li",{children:"GitHub should have opened in a new tab"}),e.jsx("li",{children:"Enter the code shown above"}),e.jsxs("li",{children:["Click ",e.jsx("span",{className:"text-green-400 font-medium",children:'"Authorize"'})]}),e.jsx("li",{children:"This page will update automatically"})]})}),e.jsxs("button",{onClick:ee,className:"w-full py-3 bg-surface hover:bg-surfaceHover border border-surfaceHover rounded-xl text-sm font-medium text-text-muted transition-all flex items-center justify-center gap-2",children:[e.jsx(He,{className:"w-4 h-4"}),"Cancel"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex bg-surface rounded-xl p-1 border border-surfaceHover",children:[e.jsxs("button",{onClick:()=>S("device"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${g==="device"?"bg-primary text-inverted":"text-text-muted hover:text-text-main"}`,children:[e.jsx(oe,{className:"w-4 h-4"}),"Quick Connect"]}),e.jsxs("button",{onClick:()=>S("pat"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${g==="pat"?"bg-primary text-inverted":"text-text-muted hover:text-text-main"}`,children:[e.jsx(mt,{className:"w-4 h-4"}),"Access Token"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"Repository Name"}),e.jsx("input",{type:"text",value:a,onChange:j=>l(j.target.value),placeholder:"leetcode-solutions",className:"w-full px-4 py-3 bg-surface border border-surfaceHover rounded-xl focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary text-text-main placeholder-text-muted text-sm",disabled:ae}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Repository will be created if it doesn't exist"})]}),g==="device"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(St,{className:"w-5 h-5 text-green-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-400 mb-1",children:"Recommended Method"}),e.jsx("p",{className:"text-xs text-text-muted",children:"Sign in with your GitHub account. No need to create or copy any tokens manually."})]})]})}),e.jsx("button",{onClick:G,disabled:ae||!a,className:"w-full py-3 bg-primary hover:bg-primaryHover text-inverted font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-primary/20 flex items-center justify-center gap-2",children:C==="loading"?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-4 h-4 animate-spin"}),"Starting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4"}),"Connect with GitHub"]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>i(!y),className:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-blue-500/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{className:"text-sm font-semibold text-blue-400",children:"How to get a token?"})]}),y?e.jsx(We,{className:"w-4 h-4 text-blue-400"}):e.jsx(qe,{className:"w-4 h-4 text-blue-400"})]}),y&&e.jsxs("div",{className:"px-4 pb-4 space-y-4 text-sm text-text-muted animate-fade-in",children:[e.jsxs("ol",{className:"space-y-2 list-decimal list-inside",children:[e.jsx("li",{children:"Click the button below to open GitHub settings"}),e.jsxs("li",{children:["Check the ",e.jsx("code",{className:"px-1.5 py-0.5 bg-surface rounded text-primary",children:"repo"})," scope"]}),e.jsx("li",{children:'Click "Generate token" at the bottom'}),e.jsxs("li",{children:["Copy the token (starts with ",e.jsx("code",{className:"px-1.5 py-0.5 bg-surface rounded",children:"ghp_"}),")"]})]}),e.jsxs("a",{href:"https://github.com/settings/tokens/new?scopes=repo&description=LeetStreak%20Auto-Sync",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-lg transition-colors justify-center font-medium",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Open GitHub Token Settings"}),e.jsx(de,{className:"w-3 h-3"})]})]})]}),e.jsxs("form",{onSubmit:le,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"Personal Access Token"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:M?"text":"password",value:_,onChange:j=>N(j.target.value),placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",className:"w-full px-4 py-3 bg-surface border border-surfaceHover rounded-xl focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary text-text-main placeholder-text-muted text-sm pr-12",disabled:ae}),e.jsx("button",{type:"button",onClick:()=>E(!M),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-main",children:M?"üëÅÔ∏è":"üëÅÔ∏è‚Äçüó®Ô∏è"})]})]}),e.jsx("button",{type:"submit",disabled:ae||!_||!a,className:"w-full py-3 bg-primary hover:bg-primaryHover text-inverted font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-primary/20 flex items-center justify-center gap-2",children:A||O?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"w-4 h-4"}),"Connect with Token"]})})]})]}),e.jsxs("div",{className:"p-4 bg-surface/50 rounded-xl border border-surfaceHover",children:[e.jsxs("p",{className:"text-xs font-medium text-text-main mb-2 flex items-center gap-2",children:[e.jsx(it,{className:"w-3.5 h-3.5"}),"How it works:"]}),e.jsxs("ul",{className:"text-xs text-text-muted space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Captures your code when you submit"}),e.jsx("li",{children:'Waits for "Accepted" status'}),e.jsx("li",{children:"Pushes to GitHub with runtime/memory stats"}),e.jsx("li",{children:"Organized by topic and difficulty"})]})]})]})]})}function Ds(){const[t,s]=p.useState({}),[n,r]=p.useState(!1),[a,l]=p.useState(!1),[d,f]=p.useState(null),[c,v]=p.useState("streak"),[g,S]=p.useState(null),[y,i]=p.useState(!1),[x,o]=p.useState(""),[u,w]=p.useState(!1),[C,b]=p.useState(""),[k,H]=p.useState(!1),[W,Y]=p.useState("dark"),[h,m]=p.useState([]),[T,D]=p.useState(!0),[_,N]=p.useState(!1),[M,E]=p.useState(!1);p.useEffect(()=>{if(typeof chrome>"u"||!chrome.runtime){console.error("Chrome runtime not available"),f("Extension context not available"),r(!1);return}console.log("Chrome runtime available, initializing..."),(async()=>{try{console.log("Starting app initialization...");const P=await chrome.storage.local.get(["theme","my_leetcode_username","unread_notifications"]);console.log("Storage data retrieved:",{hasTheme:!!P.theme,hasUsername:!!P.my_leetcode_username});const Z=P.theme||"dark";if(Y(Z),document.documentElement.setAttribute("data-theme",Z),P.unread_notifications&&Array.isArray(P.unread_notifications)){const ee=Date.now()-864e5,X=P.unread_notifications.filter(le=>le.timestamp>ee);X.length!==P.unread_notifications.length&&chrome.storage.local.set({unread_notifications:X}).catch(console.error),X.length>0&&m(X)}P.my_leetcode_username?(console.log("Username found, fetching friends..."),S(P.my_leetcode_username),await O()):(console.log("No username, showing setup mode"),i(!0),r(!1)),N(!0),E(!1)}catch(P){console.error("Error initializing app:",P),f(`Initialization error: ${P.message}`),i(!1),r(!1)}})();const G=setTimeout(()=>{!_&&T&&(console.log("Data loading taking long..."),E(!0))},4e3);return()=>clearTimeout(G)},[]);const A=async z=>{const G=h.filter(P=>P.id!==z);m(G);try{await chrome.storage.local.set({unread_notifications:G})}catch(P){console.error("Error clearing notification:",P)}},K=async z=>{if(z.preventDefault(),!x.trim()){b("Please enter your LeetCode username");return}w(!0),b("");try{const G=await chrome.runtime.sendMessage({type:"ADD_FRIEND",username:x.trim()});G.success?(await chrome.storage.local.set({my_leetcode_username:x.trim()}),S(x.trim()),i(!1),await new Promise(P=>setTimeout(P,500)),await O()):b(G.error||"Failed to verify username")}catch(G){console.error("Error during setup:",G),b("Failed to verify username. Please try again.")}finally{w(!1)}},O=async(z=!1)=>{try{r(!0),z&&l(!0),f(null);const G=await chrome.runtime.sendMessage({type:"FETCH_STATS",forceRefresh:z});G.success?s(G.friends):f(G.error||"Failed to fetch data")}catch(G){console.error("Error fetching friends:",G),f("Failed to connect to background service")}finally{r(!1),l(!1)}},F=()=>{O(!0)},R=()=>{O(!0)},U=async()=>{const z=W==="dark"?"light":"dark";Y(z),document.documentElement.setAttribute("data-theme",z);try{await chrome.storage.local.set({theme:z})}catch(G){console.error("Error saving theme:",G)}},B=Object.values(t),L=g?t[g.toLowerCase()]:null;console.log("myUsername:",g),console.log("friends keys:",Object.keys(t)),console.log("myData found:",L?"yes":"no");const V=L?.stats?.streak||0,Q=L!=null;return y?(console.log("Rendering setup mode"),e.jsx("div",{className:"w-[400px] h-[600px] bg-background flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center max-w-sm w-full animate-fade-in mx-auto",children:[e.jsx("div",{className:"w-24 h-24 bg-surface rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg ring-4 ring-surfaceHover",children:e.jsx(ue,{className:"w-12 h-12 text-primary animate-bounce-slow"})}),e.jsx("h1",{className:"text-2xl font-bold text-text-main mb-2 text-center",children:"Welcome to LeetStreak!"}),e.jsx("p",{className:"text-sm text-text-muted mb-8 text-center mx-auto",children:"Enter your LeetCode username to track your coding journey and streaks"}),e.jsxs("form",{onSubmit:K,className:"space-y-4 w-full",children:[e.jsx("div",{className:"relative group w-full",children:e.jsx("input",{type:"text",value:x,onChange:z=>o(z.target.value),placeholder:"Your LeetCode username",disabled:u,className:"w-full px-4 py-4 bg-surface border-2 border-surfaceHover rounded-2xl focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary text-text-main placeholder-text-muted transition-all duration-300 text-center font-medium disabled:opacity-50",autoFocus:!0})}),C&&e.jsx("div",{className:"p-3 bg-red-500/10 rounded-xl border border-red-500/20 text-sm text-red-400 animate-shake text-center w-full",children:C}),e.jsx("button",{type:"submit",disabled:u,className:"w-full py-4 bg-primary hover:bg-primaryHover text-inverted font-bold rounded-2xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-primary/20 active:scale-95",children:e.jsx("span",{className:"flex items-center justify-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"w-4 h-4"})," Get Started"]})})})]}),e.jsx("p",{className:"mt-6 text-xs text-text-muted text-center mx-auto",children:"We'll fetch your LeetCode stats and start tracking your progress"})]})})):(console.log("Rendering main app - loading:",n,"error:",d,"hasData:",Q),e.jsxs(e.Fragment,{children:[T&&e.jsx(cs,{onVideoEnd:()=>D(!1),showLoadingMessage:M}),e.jsxs("div",{className:"w-[400px] h-[600px] bg-gradient-to-br from-background via-background to-surface/20 flex flex-col overflow-hidden text-text-main",children:[n?e.jsx(Rt,{count:3}):d?e.jsx("div",{className:"flex-1 flex items-center justify-center p-6 animate-fade-in",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ct,{className:"w-16 h-16 text-text-muted mb-3 animate-bounce-slow mx-auto"}),e.jsx("p",{className:"text-red-400 font-semibold mb-2",children:"Oops!"}),e.jsx("p",{className:"text-sm text-text-muted mb-6",children:d}),e.jsx("button",{onClick:()=>O(),className:"px-6 py-2 bg-primary hover:bg-primaryHover text-inverted font-medium rounded-full transition-colors shadow-lg hover:shadow-primary/20",children:"Try Again"})]})}):Q?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex border-b border-surfaceHover/50 bg-surface/95 backdrop-blur-md sticky top-0 z-10 shadow-lg",children:[e.jsxs("div",{className:"flex flex-1 gap-0 px-2",children:[e.jsxs("button",{onClick:()=>v("leaderboard"),className:`flex-1 py-3.5 px-2 text-sm font-medium transition-all duration-200 relative group ${c==="leaderboard"?"text-primary":"text-text-muted hover:text-text-main"}`,children:[e.jsx(Ft,{className:`w-5 h-5 mx-auto mb-1.5 transition-transform duration-200 ${c==="leaderboard"?"scale-110":"group-hover:scale-105"}`}),e.jsx("span",{className:"text-[11px] font-semibold",children:"Friends"}),c==="leaderboard"&&e.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent"})]}),e.jsxs("button",{onClick:()=>v("streak"),className:`flex-1 py-3.5 px-2 text-sm font-medium transition-all duration-200 relative group ${c==="streak"?"text-primary":"text-text-muted hover:text-text-main"}`,children:[e.jsx($t,{className:`w-5 h-5 mx-auto mb-1.5 transition-transform duration-200 ${c==="streak"?"scale-110":"group-hover:scale-105"}`}),e.jsx("span",{className:"text-[11px] font-semibold",children:"Progress"}),c==="streak"&&e.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent"})]}),e.jsxs("button",{onClick:()=>v("analytics"),className:`flex-1 py-3.5 px-2 text-sm font-medium transition-all duration-200 relative group ${c==="analytics"?"text-primary":"text-text-muted hover:text-text-main"}`,children:[e.jsx(me,{className:`w-5 h-5 mx-auto mb-1.5 transition-transform duration-200 ${c==="analytics"?"scale-110":"group-hover:scale-105"}`}),e.jsx("span",{className:"text-[11px] font-semibold",children:"Analytics"}),c==="analytics"&&e.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent"})]}),e.jsxs("button",{onClick:()=>v("github"),className:`flex-1 py-3.5 px-2 text-sm font-medium transition-all duration-200 relative group ${c==="github"?"text-primary":"text-text-muted hover:text-text-main"}`,children:[e.jsx(te,{className:`w-5 h-5 mx-auto mb-1.5 transition-transform duration-200 ${c==="github"?"scale-110":"group-hover:scale-105"}`}),e.jsx("span",{className:"text-[11px] font-semibold",children:"GitHub"}),c==="github"&&e.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 pr-2",children:[e.jsx("button",{onClick:U,className:"p-2.5 text-text-muted hover:text-primary transition-all duration-200 hover:bg-surfaceHover/50 rounded-lg",title:"Toggle Theme",children:W==="dark"?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),e.jsx("button",{onClick:()=>H(!0),className:"p-2.5 text-text-muted hover:text-primary transition-all duration-200 hover:bg-surfaceHover/50 rounded-lg",title:"Notification Settings",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})]})]}),e.jsx(is,{isOpen:k,onClose:()=>H(!1)}),e.jsx("div",{className:"flex-1 overflow-hidden bg-background flex flex-col pb-10",children:c==="streak"?Q?e.jsx(ts,{friends:[L],currentStreak:V,onRefresh:F,refreshing:a}):e.jsx("div",{className:"flex items-center justify-center h-full p-8 text-center",children:e.jsxs("div",{children:[e.jsx(ge,{className:"w-20 h-20 text-primary mb-4 animate-pulse mx-auto"}),e.jsx("p",{className:"text-text-muted mb-4",children:"Loading your progress..."}),e.jsx("button",{onClick:F,className:"px-4 py-2 bg-primary text-inverted rounded-full text-sm font-medium",children:"Refresh"})]})}):c==="analytics"?L?e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-hide",children:[L.submissionCalendar&&e.jsx(Cs,{submissionCalendar:typeof L.submissionCalendar=="string"?JSON.parse(L.submissionCalendar):L.submissionCalendar}),e.jsx(Ss,{userData:L,friendsData:B.filter(z=>z.username!==g)})]}):e.jsx("div",{className:"flex items-center justify-center h-full p-8 text-center",children:e.jsxs("div",{children:[e.jsx(me,{className:"w-20 h-20 text-primary mb-4 animate-pulse mx-auto"}),e.jsx("p",{className:"text-text-muted mb-4",children:"Loading analytics data..."}),e.jsx("button",{onClick:F,className:"px-4 py-2 bg-primary text-inverted rounded-full text-sm font-medium",children:"Refresh"})]})}):c==="github"?e.jsx(Ms,{}):e.jsxs(e.Fragment,{children:[e.jsx(Pt,{onFriendAdded:R}),e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide",children:e.jsx(ps,{friends:B,myData:L,myUsername:g,onRefresh:F})})]})})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[e.jsx("div",{className:"w-20 h-20 bg-surface rounded-full flex items-center justify-center mb-6 ring-2 ring-surfaceHover",children:e.jsx(ge,{className:"w-16 h-16 text-primary animate-pulse-slow"})}),e.jsx("h3",{className:"text-xl font-bold text-text-main mb-2",children:"Loading Your Data"}),e.jsx("p",{className:"text-sm text-text-muted mb-8 max-w-xs",children:"Fetching your LeetCode stats..."}),e.jsx("button",{onClick:F,className:"px-6 py-3 bg-primary hover:bg-primaryHover text-inverted rounded-2xl font-semibold transition-all shadow-lg hover:shadow-primary/20",children:"Refresh"})]}),e.jsx(ls,{notifications:h,onDismiss:A}),e.jsx(ze,{})]})]}))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Me):Me();function Me(){const t=document.getElementById("root");t?Ue.createRoot(t).render(e.jsx(Pe.StrictMode,{children:e.jsx(Ds,{})})):console.error("Root element not found!")}
