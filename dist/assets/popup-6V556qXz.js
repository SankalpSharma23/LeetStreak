import{c as P,r as y,j as e,F as K,C as ue,G as J,a as he,R as pe,b as fe}from"./globals-BaLHYQ9a.js";const ge=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],te=P("bell",ge);const be=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],se=P("chart-column",be);const ye=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ve=P("chevron-down",ye);const je=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ne=P("chevron-up",je);const we=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ke=P("circle-check",we);const Se=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ce=P("circle-question-mark",Se);const De=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Te=P("external-link",De);const Me=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]],ae=P("file-chart-column-increasing",Me);const $e=[["path",{d:"M4 12.15V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-3.35",key:"1wthlu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 16-3 3 3 3",key:"331omg"}],["path",{d:"m9 22 3-3-3-3",key:"lsp7cz"}]],He=P("file-code-corner",$e);const _e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Le=P("frown",_e);const Fe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],X=P("loader-circle",Fe);const Ae=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],ie=P("rocket",Ae);const Ee=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ce=P("sparkles",Ee);const Ue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ie=P("target",Ue);const Pe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Re=P("trending-up",Pe);const ze=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Z=P("triangle-alert",ze);const Oe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ye=P("user-plus",Oe);const Ge=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],We=P("users",Ge);const qe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Be=P("x",qe);function Ve(t,s,l){if(!t||!s||!l)return 0;const r=typeof t=="string"?JSON.parse(t):t,a=typeof s=="string"?JSON.parse(s):s,i=re(r),o=re(a);if(i.size===0||o.size===0)return 0;const h=new Set;for(const g of i)o.has(g)&&g>=l&&h.add(g);if(h.size===0)return 0;const x=Array.from(h).sort((g,u)=>u.localeCompare(g)),j=new Date,p=j.toISOString().split("T")[0],w=new Date(j);w.setUTCDate(w.getUTCDate()-1);const d=w.toISOString().split("T")[0],m=x[0];if(m!==p&&m!==d)return 0;let c=0,n=new Date(m+"T00:00:00Z");for(let g=0;g<x.length;g++){const u=n.toISOString().split("T")[0];if(x[g]===u)c++,n.setUTCDate(n.getUTCDate()-1);else break}return c}function re(t){const s=new Set;return!t||typeof t!="object"||Object.entries(t).forEach(([l,r])=>{if(r>0){const i=new Date(parseInt(l)*1e3).toISOString().split("T")[0];s.add(i)}}),s}function Qe(t){if(!t)return console.log("No submission calendar"),!1;console.log("Submission calendar keys sample:",Object.keys(t).slice(-10));const s=new Date,l=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate())),r=Math.floor(l.getTime()/1e3).toString();console.log("Today timestamp:",r,"Today date:",l),console.log("Value for today:",t[r]);const a=t[r]&&parseInt(t[r])>0;return console.log("Has today submission:",a),a}function Ke(t){if(!t)return null;const s=Object.keys(t).map(l=>parseInt(l)).filter(l=>t[l.toString()]>0).sort((l,r)=>r-l);return s.length===0?null:new Date(s[0]*1e3)}function Je(t){if(!t)return"Never";const l=new Date-t,r=Math.floor(l/(1e3*60*60*24));return r===0?"Today":r===1?"Yesterday":r<7?`${r} days ago`:r<30?`${Math.floor(r/7)} weeks ago`:r<365?`${Math.floor(r/30)} months ago`:`${Math.floor(r/365)} years ago`}function Xe({friend:t,rank:s,isExpanded:l,onClick:r,isCurrentUser:a,mySubmissionCalendar:i,timeFilter:o="all"}){const[h,x]=y.useState(!1),[j,p]=y.useState(!1),[w,d]=y.useState(!1),[m,c]=y.useState(null),[n,g]=y.useState(0);if(!t||!t.profile||!t.stats)return null;const{profile:u,stats:v,contest:H,badges:_,recentSubmissions:T,submissionCalendar:U,friendshipStartDate:b,contestRanking:N}=t,D=a?v.streak||0:i&&U&&b?Ve(i,U,b):0,S=f=>f===1?"ü•á":f===2?"ü•à":f===3?"ü•â":`#${f}`,A=(f=0)=>{if(!U)return null;try{const k=U;if(!k||typeof k!="object")return null;const M=new Date,C=new Date(Date.UTC(M.getFullYear(),M.getMonth(),M.getDate())),E=new Date(C.getFullYear(),C.getMonth()-f,1),R=E.getFullYear(),Y=E.getMonth(),L=E.toLocaleDateString("en-US",{month:"long"}),q=new Date(R,Y,1).getDay(),B=new Date(R,Y+1,0).getDate(),F=[];let $=[];for(let z=0;z<q;z++)$.push(null);for(let z=1;z<=B;z++){const G=new Date(R,Y,z),Q=new Date(Date.UTC(G.getFullYear(),G.getMonth(),G.getDate())),ee=Math.floor(Q.getTime()/1e3).toString(),me=parseInt(k[ee])||0,xe=G.toDateString()===M.toDateString();$.push({date:G,day:z,count:me,dateStr:ee,isToday:xe}),$.length===7&&(F.push($),$=[])}if($.length>0){for(;$.length<7;)$.push(null);F.push($)}return{monthName:L,year:R,weeks:F}}catch(k){return console.error("Error generating calendar data:",k),null}},I=f=>f===0?0:f<=2?1:f<=4?2:f<=6?3:4,O=(f,k=!1)=>{const M=I(f),C=["bg-surfaceHover border-surfaceHover","bg-secondary/40 border-secondary/60 shadow-sm","bg-secondary/60 border-secondary/80 shadow","bg-secondary/80 border-secondary shadow-md","bg-secondary border-secondary shadow-lg"];return k?C[M]+" ring-2 ring-primary/80 ring-offset-1 ring-offset-background":C[M]},W=()=>{if(!T||!Array.isArray(T)||T.length===0)return null;const k=[...T].sort((L,q)=>q.timestamp-L.timestamp)[0],M=Date.now(),C=parseInt(k.timestamp)*1e3,E=M-C,R=Math.floor(E/(1e3*60*60)),Y=Math.floor(E/(1e3*60*60*24));if(Y===0){if(R===0){const L=Math.floor(E/6e4);return L<60?`${L} min${L!==1?"s":""} ago`:`${R} hour ago`}return`${R} hour${R!==1?"s":""} ago`}else{if(Y===1)return"Yesterday";if(Y<7)return`${Y} days ago`;if(Y<30){const L=Math.floor(Y/7);return`${L} week${L!==1?"s":""} ago`}else{const L=Math.floor(Y/30);return`${L} month${L!==1?"s":""} ago`}}};return e.jsxs("div",{onClick:r,className:`relative bg-surface rounded-3xl shadow-md border-2 transition-all duration-300 cursor-pointer hover:shadow-lg hover:scale-[1.01] ${a?"border-accent/30 bg-gradient-to-br from-accent/10 to-surface ring-1 ring-accent/20":s<=3?"border-primary/30 bg-gradient-to-br from-primary/5 to-surface":"border-surfaceHover/50"} ${l?"ring-2 ring-primary/60 shadow-2xl":""}`,children:[t.submissionCalendar&&Qe(t.submissionCalendar)&&e.jsx("div",{className:"absolute -top-1 -right-1 z-10 bg-secondary text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-lg animate-pulse pointer-events-none",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(K,{className:"w-3 h-3"})," ACTIVE"]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl font-bold min-w-[36px] text-center drop-shadow-sm",children:S(s)}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:u.avatar||"https://via.placeholder.com/40",alt:u.username,className:"w-10 h-10 rounded-full border-2 border-surface shadow-md object-cover"}),s<=3&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-primary rounded-full border-2 border-surface text-inverted text-xs flex items-center justify-center shadow-sm",children:e.jsx(ce,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-base text-text-main truncate",children:u.username}),a&&e.jsx("span",{className:"px-2 py-0.5 bg-accent text-inverted text-[10px] font-bold rounded-full",children:"YOU"}),e.jsx("a",{href:`https://leetcode.com/${u.username}`,target:"_blank",rel:"noopener noreferrer",onClick:f=>f.stopPropagation(),className:"text-text-muted hover:text-primary transition-colors",title:"View LeetCode Profile",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M13.483 0a1.374 1.374 0 0 0-.961.438L7.116 6.226l-3.854 4.126a5.266 5.266 0 0 0-1.209 2.104 5.35 5.35 0 0 0-.125.513 5.527 5.527 0 0 0 .062 2.362 5.83 5.83 0 0 0 .349 1.017 5.938 5.938 0 0 0 1.271 1.818l4.277 4.193.039.038c2.248 2.165 5.852 2.133 8.063-.074l2.396-2.392c.54-.54.54-1.414.003-1.955a1.378 1.378 0 0 0-1.951-.003l-2.396 2.392a3.021 3.021 0 0 1-4.205.038l-.02-.019-4.276-4.193c-.652-.64-.972-1.469-.948-2.263a2.68 2.68 0 0 1 .066-.523 2.545 2.545 0 0 1 .619-1.164L9.13 8.114c1.058-1.134 3.204-1.27 4.43-.278l3.501 2.831c.593.48 1.461.387 1.939-.207a1.384 1.384 0 0 0-.207-1.943l-3.5-2.831c-.8-.647-1.766-1.045-2.774-1.202l2.015-2.158A1.384 1.384 0 0 0 13.483 0zm-2.866 12.815a1.38 1.38 0 0 0-1.38 1.382 1.38 1.38 0 0 0 1.38 1.382H20.79a1.38 1.38 0 0 0 1.38-1.382 1.38 1.38 0 0 0-1.38-1.382z"})})})]}),u.realName&&e.jsx("p",{className:"text-xs text-text-muted truncate",children:u.realName}),e.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[e.jsx("span",{className:"text-[10px] text-text-muted",children:"üïí"}),e.jsx("span",{className:"text-[10px] text-text-muted",children:Je(Ke(U))})]}),(u.ranking||N?.globalRanking)&&e.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[e.jsx("span",{className:"text-[10px] text-text-muted",children:"üåç"}),e.jsxs("span",{className:"text-[10px] font-semibold text-primary",children:["Rank #",u.ranking?.toLocaleString()||N?.globalRanking?.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-primary to-primaryHover text-inverted px-3 py-2 rounded-full shadow-lg shadow-primary/20",children:[e.jsx(K,{className:"w-5 h-5 text-orange-500"}),e.jsx("span",{className:"text-base font-bold",children:D})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-4 gap-2",children:[e.jsxs("div",{className:"text-center py-2 bg-leetcode-easy/10 rounded-2xl border border-leetcode-easy/20",children:[e.jsx("div",{className:"text-base font-bold text-leetcode-easy",children:v.easy||0}),e.jsx("div",{className:"text-[10px] text-text-muted font-medium",children:"Easy"})]}),e.jsxs("div",{className:"text-center py-2 bg-leetcode-medium/10 rounded-2xl border border-leetcode-medium/20",children:[e.jsx("div",{className:"text-base font-bold text-leetcode-medium",children:v.medium||0}),e.jsx("div",{className:"text-[10px] text-text-muted font-medium",children:"Medium"})]}),e.jsxs("div",{className:"text-center py-2 bg-leetcode-hard/10 rounded-2xl border border-leetcode-hard/20",children:[e.jsx("div",{className:"text-base font-bold text-leetcode-hard",children:v.hard||0}),e.jsx("div",{className:"text-[10px] text-text-muted font-medium",children:"Hard"})]}),e.jsxs("div",{className:"text-center py-2 bg-surfaceHover rounded-2xl border border-surfaceHover",children:[e.jsx("div",{className:"text-base font-bold text-text-main",children:v.total||0}),e.jsx("div",{className:"text-[10px] text-text-muted font-medium",children:o==="week"?"This Week":o==="month"?"This Month":"Total"})]})]}),o!=="all"&&v._filteredByTime&&e.jsx("div",{className:"mt-2 text-center text-[10px] text-text-muted",children:o==="week"?"üìÖ Showing problems solved this week (Mon-Sun)":"üìÖ Showing problems solved this month"}),(W()||T&&T.length>0)&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{onClick:f=>{f.stopPropagation(),d(!w)},className:"px-2 py-2 bg-primary/10 hover:bg-primary/20 rounded-xl border border-primary/30 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-semibold text-primary flex items-center gap-1.5",children:[e.jsx(ue,{className:"w-4 h-4"}),"Submissions"]}),e.jsx("svg",{className:`w-5 h-5 text-primary transition-transform duration-200 ${w?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),w&&e.jsxs("div",{className:"mt-2 space-y-2 animate-slide-up",children:[W()&&e.jsx("div",{className:"px-2 py-1.5 bg-background/50 rounded-xl border border-surfaceHover",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Last submission:"}),e.jsx("span",{className:"font-semibold text-text-main",children:W()})]})}),T&&T.length>0&&e.jsxs("div",{className:"px-2 py-1.5 bg-background/50 rounded-xl border border-surfaceHover",children:[e.jsxs("div",{onClick:f=>{f.stopPropagation(),p(!j)},className:"flex items-center justify-between cursor-pointer hover:bg-surfaceHover/30 -mx-2 px-2 py-1 rounded-lg transition-colors",children:[e.jsxs("div",{className:"text-xs text-text-muted",children:["Recent Submissions (",T.length,")"]}),e.jsx("svg",{className:`w-4 h-4 text-text-muted transition-transform duration-200 ${j?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),j&&e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto mt-2 animate-slide-up scrollbar-hide",children:T.slice(0,5).map((f,k)=>e.jsxs("a",{href:`https://leetcode.com/problems/${f.titleSlug||f.title.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}/`,target:"_blank",rel:"noopener noreferrer",onClick:M=>M.stopPropagation(),className:"block text-xs border-l-2 border-surfaceHover hover:border-primary pl-2 py-1 hover:bg-surface rounded transition-all",children:[e.jsx("div",{className:"font-medium text-text-main hover:text-primary transition-colors",children:f.title}),e.jsxs("div",{className:"text-text-muted flex gap-2 mt-1",children:[e.jsx("span",{className:`
                                ${f.statusDisplay==="Accepted"?"text-secondary":"text-leetcode-hard"}
                              `,children:f.statusDisplay}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:f.lang}),f.runtime&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:f.runtime})]})]})]},k))})]})]})]})]}),l&&e.jsxs("div",{className:"border-t border-surfaceHover p-4 bg-surfaceHover/30 space-y-4 animate-slide-up",children:[H&&H.rating>0&&e.jsxs("div",{className:"bg-surface p-3 rounded-xl border border-surfaceHover shadow-sm",children:[e.jsx("h4",{className:"font-semibold text-sm mb-2 text-text-main",children:"Contest Stats"}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-text-muted",children:"Rating:"}),e.jsx("span",{className:"ml-1 font-semibold text-primary",children:H.rating})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-muted",children:"Attended:"}),e.jsx("span",{className:"ml-1 font-semibold text-text-main",children:H.attended})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-muted",children:"Rank:"}),e.jsxs("span",{className:"ml-1 font-semibold text-text-main",children:["#",H.ranking?.toLocaleString()]})]})]})]}),U&&(()=>{const f=A(n);return f?e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-4 rounded-xl border border-surfaceHover shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üìÖ"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm text-text-main",children:"Activity Calendar"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Browse monthly submissions"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-background/60 px-2 py-1.5 rounded-lg border border-surfaceHover/50",children:[e.jsx("span",{className:"text-[9px] text-text-muted mr-1",children:"Less"}),[0,1,2,3,4].map(k=>e.jsx("div",{className:`w-[10px] h-[10px] rounded-[2px] border ${O(k*2)}`},k)),e.jsx("span",{className:"text-[9px] text-text-muted ml-1",children:"More"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{onClick:k=>{k.stopPropagation(),n<11&&g(n+1)},disabled:n>=11,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 border border-primary/30 disabled:opacity-30 disabled:cursor-not-allowed transition-all group",children:e.jsx("svg",{className:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-bold text-primary",children:[f.monthName," ",f.year]}),e.jsx("div",{className:"text-[10px] text-text-muted",children:(()=>{const k=f.weeks.flat().filter(M=>M&&M.count>0).reduce((M,C)=>M+C.count,0);return`${k} submission${k!==1?"s":""}`})()})]}),e.jsx("button",{onClick:k=>{k.stopPropagation(),n>0&&g(n-1)},disabled:n<=0,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 border border-primary/30 disabled:opacity-30 disabled:cursor-not-allowed transition-all group",children:e.jsx("svg",{className:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"bg-background/70 backdrop-blur-sm rounded-xl p-3 border border-surfaceHover/60",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((k,M)=>e.jsx("div",{className:"text-[9px] text-text-muted text-center font-semibold",children:k},M))}),f.weeks.map((k,M)=>e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:k.map((C,E)=>e.jsx("div",{className:`aspect-square rounded-md flex items-center justify-center text-[9px] font-bold transition-all duration-300 relative group ${C?`${O(C.count,C.isToday)} cursor-pointer hover:scale-125 hover:shadow-xl hover:z-20 ${m?.dateStr===C.dateStr?"scale-125 shadow-xl z-20":""}`:"bg-transparent"}`,onMouseEnter:()=>C&&c(C),onMouseLeave:()=>c(null),children:C&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`${C.count>0?"text-white font-bold drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]":"text-text-muted font-semibold"}`,children:C.day}),C.isToday&&e.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-1.5 h-1.5 bg-amber-400 rounded-full animate-pulse"})]})},E))},M))]}),m&&e.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gradient-to-br from-surface to-surfaceHover border-2 border-primary/40 rounded-xl px-4 py-3 shadow-2xl z-50 animate-fade-in pointer-events-none backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.isToday&&e.jsx("span",{className:"text-base",children:"‚≠ê"}),e.jsx("div",{className:"text-sm font-bold text-primary",children:m.count===0?"No activity":`${m.count} submission${m.count!==1?"s":""}`})]}),e.jsx("div",{className:"text-[11px] text-text-muted",children:m.date.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),m.isToday&&e.jsx("div",{className:"text-[10px] text-amber-400 font-semibold mt-1",children:"Today"})]})]}):null})(),_&&_.length>0&&e.jsxs("div",{className:"bg-surface p-3 rounded-xl border border-surfaceHover shadow-sm",children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2 text-text-main",children:["Badges (",_.length,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[_.slice(0,5).map(f=>e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1.5 bg-primary/10 border border-primary/20 rounded-lg text-xs text-primary hover:bg-primary/20 transition-colors",title:f.displayName,children:[f.icon?e.jsx("img",{src:f.icon,alt:f.displayName,className:"w-5 h-5 object-contain",onError:k=>{k.target.style.display="none",k.target.nextSibling.textContent="üèÖ "+k.target.nextSibling.textContent}}):e.jsx("span",{children:"üèÖ"}),e.jsx("span",{className:"max-w-[100px] truncate font-medium",children:f.displayName})]},f.id)),_.length>5&&e.jsxs("span",{className:"px-2 py-1 text-xs text-text-muted",children:["+",_.length-5," more"]})]})]}),!a&&e.jsx("button",{onClick:async f=>{if(f.stopPropagation(),window.confirm(`Remove ${u.username} from friends?`))try{console.log("Sending REMOVE_FRIEND message for:",u.username);const k=await chrome.runtime.sendMessage({type:"REMOVE_FRIEND",username:u.username});console.log("Remove friend response:",k),k&&k.success?setTimeout(()=>{window.location.reload()},100):alert(`Failed to remove friend: ${k?.error||"Unknown error"}`)}catch(k){console.error("Error removing friend:",k),alert("Failed to remove friend. Please try again.")}},className:"w-full py-2 bg-leetcode-hard/10 hover:bg-leetcode-hard/20 text-leetcode-hard font-semibold rounded-xl transition-all duration-300 text-sm border border-leetcode-hard/20 active:scale-95",children:"üóëÔ∏è Remove Friend"})]})]})}function Ze({friends:t,myData:s,myUsername:l,onRefresh:r}){const[a,i]=y.useState(null),[o,h]=y.useState("all"),x=c=>{if(!c)return!1;const n=typeof c=="string"?JSON.parse(c):c,g=new Date().toISOString().split("T")[0];for(const[u,v]of Object.entries(n))if(v>0&&new Date(parseInt(u)*1e3).toISOString().split("T")[0]===g)return!0;return!1},j=(c,n)=>{if(!c)return 0;try{const g=typeof c=="string"?JSON.parse(c):c,u=new Date;u.setHours(0,0,0,0);let v;if(n==="week"){v=new Date(u);const T=u.getDay(),U=T===0?6:T-1;v.setDate(u.getDate()-U)}else if(n==="month")v=new Date(u.getFullYear(),u.getMonth(),1);else return 0;v.setHours(0,0,0,0);const H=Math.floor(v.getTime()/1e3);let _=0;for(const[T,U]of Object.entries(g))parseInt(T)>=H&&U>0&&(_+=U);return _}catch(g){return console.error("Error calculating period problems:",g),0}},p=t.filter(c=>c.profile?.username!==l),w=s?[...p,s]:p,d=[...w].sort((c,n)=>{if(o==="all")return(n.stats?.total||0)-(c.stats?.total||0);if(o==="week"){const g=j(c.submissionCalendar,"week");return j(n.submissionCalendar,"week")-g}else if(o==="month"){const g=j(c.submissionCalendar,"month");return j(n.submissionCalendar,"month")-g}return 0}),m=c=>{!c||!c.profile||i(a?.profile?.username===c.profile.username?null:c)};return e.jsxs("div",{className:"bg-background",children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur-sm border-b border-surfaceHover px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h("all"),className:`flex-1 py-2 px-3 rounded-xl text-xs font-semibold transition-all ${o==="all"?"bg-primary text-inverted shadow-lg":"bg-surface text-text-muted hover:text-text-main"}`,children:"All Time"}),e.jsx("button",{onClick:()=>h("week"),className:`flex-1 py-2 px-3 rounded-xl text-xs font-semibold transition-all ${o==="week"?"bg-primary text-inverted shadow-lg":"bg-surface text-text-muted hover:text-text-main"}`,children:"This Week"}),e.jsx("button",{onClick:()=>h("month"),className:`flex-1 py-2 px-3 rounded-xl text-xs font-semibold transition-all ${o==="month"?"bg-primary text-inverted shadow-lg":"bg-surface text-text-muted hover:text-text-main"}`,children:"This Month"})]}),w.filter(c=>c&&c.submissionCalendar&&x(c.submissionCalendar)).length>0&&e.jsxs("div",{className:"mt-2 px-3 py-1.5 bg-secondary/10 border border-secondary/30 rounded-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-lg animate-bounce",children:"üî•"}),e.jsxs("span",{className:"text-xs text-secondary font-semibold",children:[w.filter(c=>c&&c.submissionCalendar&&x(c.submissionCalendar)).length," ",w.filter(c=>c&&c.submissionCalendar&&x(c.submissionCalendar)).length===1?"person":"people"," solving today!"]})]})]}),d.length===0?e.jsx("div",{className:"p-8 text-center text-text-muted animate-fade-in",children:e.jsx("p",{children:"No friends to display"})}):e.jsx("div",{className:"p-4 space-y-2.5 animate-slide-up",children:d.filter(c=>c&&c.profile).map((c,n)=>{c.submissionCalendar&&x(c.submissionCalendar);let g=c.stats;if(o!=="all"){const u=j(c.submissionCalendar,o);g={...c.stats,total:u,_filteredByTime:!0}}return e.jsx("div",{children:e.jsx(Xe,{friend:{...c,stats:g},rank:n+1,isExpanded:a?.profile?.username===c.profile.username,onClick:()=>m(c),isCurrentUser:l&&c.profile.username===l,mySubmissionCalendar:s?.submissionCalendar,timeFilter:o})},c.profile.username)})})]})}function et({onFriendAdded:t}){const[s,l]=y.useState(""),[r,a]=y.useState(!1),[i,o]=y.useState(""),[h,x]=y.useState(""),j=async p=>{if(p.preventDefault(),!s.trim()){o("Please enter a username");return}a(!0),o(""),x("");try{const w=await chrome.runtime.sendMessage({type:"ADD_FRIEND",username:s.trim()});w.success?(x(`${s} added successfully!`),l(""),t(),setTimeout(()=>{x("")},1500)):o(w.error||"Failed to add friend")}catch(w){console.error("Error adding friend:",w),o("Failed to add friend. Please try again.")}finally{a(!1)}};return e.jsxs("div",{className:"p-4 bg-surface/50 border-b border-surfaceHover backdrop-blur-sm",children:[e.jsxs("form",{onSubmit:j,className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-muted text-lg group-focus-within:text-primary transition-colors",children:"üë§"}),e.jsx("input",{type:"text",value:s,onChange:p=>l(p.target.value),placeholder:"Add friend...",disabled:r,className:"w-full px-4 py-3 pl-11 bg-background border-2 border-surfaceHover rounded-3xl focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary disabled:opacity-50 transition-all duration-300 text-sm text-text-main placeholder-text-muted shadow-sm hover:border-primary/50"})]}),e.jsx("button",{type:"submit",disabled:r,className:"px-6 py-3 bg-primary hover:bg-primaryHover text-inverted font-bold rounded-3xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-primary/20 active:scale-95 text-sm",children:r?e.jsx(X,{className:"w-4 h-4 animate-spin"}):e.jsx(Ye,{className:"w-4 h-4"})})]}),i&&e.jsxs("div",{className:"mt-2 p-3 bg-red-500/10 rounded-2xl flex items-start gap-2 text-sm shadow-md border border-red-500/20 animate-shake",children:[e.jsx(Z,{className:"w-4 h-4 text-red-400"}),e.jsx("p",{className:"text-red-400 flex-1",children:i})]}),h&&e.jsxs("div",{className:"mt-2 p-3 bg-secondary/10 rounded-2xl flex items-center gap-2 text-sm shadow-md border border-secondary/20 animate-fade-in",children:[e.jsx(ke,{className:"w-4 h-4 text-secondary"}),e.jsx("p",{className:"text-secondary font-medium",children:h})]})]})}function tt({count:t=3}){return e.jsxs("div",{className:"w-[400px] h-[600px] bg-gradient-to-br from-background via-background to-surface/30 flex flex-col items-center justify-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-30",children:[e.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-primary/20 rounded-full blur-3xl animate-float"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-secondary/20 rounded-full blur-3xl animate-float-delayed"})]}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[e.jsx("div",{className:"loader mb-8"}),e.jsx("h2",{className:"text-xl font-bold text-text-main mb-2 animate-fade-in",children:"Loading LeetStreak"}),e.jsx("p",{className:"text-sm text-text-muted animate-fade-in",style:{animationDelay:"0.15s"},children:"Fetching your coding journey..."})]}),e.jsx("style",{children:`
        .loader {
          width: 65px;
          height: 30px;
          position: relative;
        }
        .loader:before {
          content: "";
          position: absolute;
          border-radius: 50px;
          box-shadow: 0 0 0 3px inset var(--color-primary);
          animation: l3 0.75s infinite alternate;
        }
        @keyframes l3 {
          0% {
            inset: 0 35px 0 0;
          }
          50% {
            inset: 0 0 0 0;
          }
          100% {
            inset: 0 0 0 35px;
          }
        }
        @keyframes float {
          0%, 100% { transform: translate(0, 0) scale(1); }
          33% { transform: translate(30px, -30px) scale(1.1); }
          66% { transform: translate(-20px, 20px) scale(0.9); }
        }
        @keyframes float-delayed {
          0%, 100% { transform: translate(0, 0) scale(1); }
          33% { transform: translate(-30px, 30px) scale(0.9); }
          66% { transform: translate(20px, -20px) scale(1.1); }
        }
        .animate-float {
          animation: float 8s ease-in-out infinite;
        }
        .animate-float-delayed {
          animation: float-delayed 8s ease-in-out infinite;
          animation-delay: -4s;
        }
      `})]})}function st({streak:t,onClose:s}){const[l,r]=y.useState(!0);y.useEffect(()=>{const o=setTimeout(()=>{r(!1),setTimeout(s,300)},4e3);return()=>clearTimeout(o)},[s]);const i=(o=>o===7?{emoji:"üî•",title:"Week Warrior!",message:"7 days of dedication!"}:o===30?{emoji:"üöÄ",title:"Month Master!",message:"30 days strong!"}:o===100?{emoji:"üíØ",title:"Century Club!",message:"100 days of excellence!"}:o===365?{emoji:"üëë",title:"Year Legend!",message:"A full year of coding!"}:{emoji:"‚≠ê",title:`${o} Day Streak!`,message:"Keep going!"})(t);return l?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(50)].map((o,h)=>e.jsx("div",{className:"absolute animate-confetti",style:{left:`${Math.random()*100}%`,top:"-10%",animationDelay:`${Math.random()*.5}s`,animationDuration:`${2+Math.random()*2}s`},children:["üéâ","‚≠ê","üî•","üéä","‚ú®","üí´"][Math.floor(Math.random()*6)]},h))}),e.jsxs("div",{className:"relative bg-gradient-to-br from-primary via-accent to-secondary p-8 rounded-3xl shadow-2xl max-w-sm mx-4 animate-bounce-in text-center",children:[e.jsx("div",{className:"absolute inset-0 bg-surface/10 backdrop-blur-xl rounded-3xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"text-8xl mb-4 animate-pulse-slow",children:i.emoji}),e.jsx("h2",{className:"text-3xl font-black text-white mb-2 drop-shadow-lg",children:i.title}),e.jsx("p",{className:"text-lg text-white/90 mb-4",children:i.message}),e.jsx("div",{className:"text-6xl font-black text-white drop-shadow-2xl",children:t}),e.jsx("p",{className:"text-sm text-white/80 mt-2",children:"days streak"}),e.jsx("button",{onClick:()=>{r(!1),setTimeout(s,300)},className:"mt-6 px-6 py-2 bg-white text-primary font-bold rounded-full hover:scale-105 transition-transform shadow-lg",children:"Awesome! üéâ"})]})]})]}):null}const V={DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly"},at=[{id:"daily_1",type:V.DAILY,title:"Solve 1 problem daily",target:1,icon:"üìÖ"},{id:"daily_3",type:V.DAILY,title:"Solve 3 problems daily",target:3,icon:"üî•"},{id:"weekly_10",type:V.WEEKLY,title:"Solve 10 problems this week",target:10,icon:"üìä"},{id:"weekly_20",type:V.WEEKLY,title:"Solve 20 problems this week",target:20,icon:"üí™"},{id:"monthly_50",type:V.MONTHLY,title:"Solve 50 problems this month",target:50,icon:"üéØ"},{id:"monthly_100",type:V.MONTHLY,title:"Solve 100 problems this month",target:100,icon:"üöÄ"}];async function rt(){try{return(await chrome.storage.local.get(["activeGoals"])).activeGoals||[]}catch(t){return console.error("Error getting active goals:",t),[]}}async function ne(t){try{await chrome.storage.local.set({activeGoals:t})}catch(s){console.error("Error setting active goals:",s)}}async function le(t,s,l){try{let r=0;const a=new Date;if(t.type===V.DAILY){const i=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())),o=Math.floor(i.getTime()/1e3).toString(),h=l;r=parseInt(h?.[o])||0,console.log("Daily goal progress:",{todayTimestamp:o,progress:r,calendarValue:h?.[o]})}else if(t.type===V.WEEKLY){const i=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())),o=i.getUTCDay(),h=o===0?6:o-1,x=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()-h)),j=l;for(let p=0;p<7;p++){const w=new Date(Date.UTC(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate()+p));if(w>i)break;const d=Math.floor(w.getTime()/1e3).toString();r+=parseInt(j?.[d])||0}console.log("Weekly goal progress:",r)}else if(t.type===V.MONTHLY){const i=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())),o=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),1)),h=l,x=new Date(i.getUTCFullYear(),i.getUTCMonth()+1,0).getDate(),j=i.getUTCDate();for(let p=1;p<=Math.min(x,j);p++){const w=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),p)),d=Math.floor(w.getTime()/1e3).toString();r+=parseInt(h?.[d])||0}console.log("Monthly goal progress:",r)}return{progress:r,target:t.target,percentage:Math.min(r/t.target*100,100),completed:r>=t.target}}catch(r){return console.error("Error calculating goal progress:",r),{progress:0,target:t.target,percentage:0,completed:!1}}}function nt({userData:t}){const[s,l]=y.useState([]),[r,a]=y.useState({}),[i,o]=y.useState(!1);y.useEffect(()=>{h()},[]),y.useEffect(()=>{t&&s.length>0&&x()},[t?.stats?.total,t?.submissionCalendar,s]);async function h(){const d=await rt();if(l(d),t&&d.length>0){const m={};for(const c of d)m[c.id]=await le(c,t.stats,t.submissionCalendar);a(m)}}async function x(){const d={};for(const m of s)d[m.id]=await le(m,t.stats,t.submissionCalendar);a(d)}async function j(d){const m=[...s,d];await ne(m),l(m),o(!1)}async function p(d){const m=s.filter(c=>c.id!==d);await ne(m),l(m)}const w=at.filter(d=>!s.some(m=>m.id===d.id));return s.length===0&&!i?e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"üéØ"}),e.jsx("p",{className:"text-text-muted mb-4",children:"No goals set yet"}),e.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-primary hover:bg-primaryHover text-inverted rounded-lg font-semibold text-sm transition-colors",children:"Set Your First Goal"})]}):e.jsxs("div",{className:"space-y-3",children:[s.map(d=>{const m=r[d.id]||{progress:0,target:d.target,percentage:0,completed:!1};return e.jsxs("div",{className:`
              bg-surface border rounded-xl p-4 transition-all duration-300
              ${m.completed?"border-accent/50 bg-accent/5":"border-primary/30"}
            `,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"text-2xl",children:d.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-text-primary text-sm",children:d.title}),e.jsx("p",{className:"text-xs text-text-muted capitalize",children:d.type})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[m.completed&&e.jsx("span",{className:"text-accent text-xl",children:"‚úì"}),e.jsx("button",{onClick:()=>p(d.id),className:"text-text-muted hover:text-red-500 transition-colors",title:"Remove goal",children:"‚úï"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Progress"}),e.jsxs("span",{className:"font-semibold text-text-primary",children:[m.progress," / ",m.target]})]}),e.jsx("div",{className:"h-2 bg-surfaceHover rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${m.completed?"bg-accent":"bg-primary"}`,style:{width:`${m.percentage}%`}})}),m.completed&&e.jsx("p",{className:"text-xs text-accent text-center font-medium mt-2",children:"üéä Goal achieved! Amazing work!"})]})]},d.id)}),i&&w.length>0&&e.jsxs("div",{className:"bg-surfaceHover border border-primary/30 rounded-xl p-4 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-text-primary text-sm",children:"Add New Goal"}),e.jsx("button",{onClick:()=>o(!1),className:"text-text-muted hover:text-text-primary transition-colors",children:"‚úï"})]}),e.jsx("div",{className:"space-y-2",children:w.map(d=>e.jsxs("button",{onClick:()=>j(d),className:"w-full text-left p-3 bg-surface hover:bg-surfaceHover border border-transparent hover:border-primary/30 rounded-lg transition-all duration-200 flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:d.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-text-primary",children:d.title}),e.jsx("p",{className:"text-xs text-text-muted capitalize",children:d.type})]}),e.jsx("span",{className:"text-xs text-primary",children:"Add ‚Üí"})]},d.id))})]}),!i&&w.length>0&&e.jsxs("button",{onClick:()=>o(!0),className:"w-full py-3 border-2 border-dashed border-primary/30 hover:border-primary/50 rounded-xl text-primary hover:bg-primary/5 transition-all duration-200 flex items-center justify-center gap-2 font-semibold text-sm",children:[e.jsx("span",{className:"text-lg",children:"+"}),e.jsx("span",{children:"Add Another Goal"})]}),s.length>0&&w.length===0&&e.jsx("div",{className:"bg-gradient-to-br from-accent/5 to-primary/5 border border-accent/20 rounded-xl p-4 text-center",children:e.jsx("p",{className:"text-xs text-text-muted",children:"üéâ You've added all available goals! Keep crushing them!"})})]})}const lt="https://leetcode.com/graphql",ot=`
  query questionOfToday {
    activeDailyCodingChallengeQuestion {
      date
      link
      question {
        questionId
        questionFrontendId
        title
        titleSlug
        difficulty
        likes
        dislikes
        topicTags {
          name
          slug
        }
      }
    }
  }
`;async function it(){try{const t=await fetch(lt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:ot})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();if(s.errors)throw console.error("GraphQL errors:",s.errors),new Error(s.errors[0]?.message||"GraphQL query failed");const l=s.data?.activeDailyCodingChallengeQuestion;if(!l)throw new Error("No daily question data received");return{date:l.date,link:`https://leetcode.com${l.link}`,questionId:l.question.questionFrontendId,title:l.question.title,titleSlug:l.question.titleSlug,difficulty:l.question.difficulty,likes:l.question.likes,dislikes:l.question.dislikes,topics:l.question.topicTags.map(r=>r.name)}}catch(t){return console.error("Error fetching daily question:",t),null}}function ct(){const[t,s]=y.useState(null),[l,r]=y.useState(!0);y.useEffect(()=>{a()},[]);const a=async()=>{r(!0);const h=await it();s(h),r(!1)},i=h=>{switch(h?.toLowerCase()){case"easy":return"text-green-400 bg-green-400/10 border-green-400/30";case"medium":return"text-yellow-400 bg-yellow-400/10 border-yellow-400/30";case"hard":return"text-red-400 bg-red-400/10 border-red-400/30";default:return"text-text-muted bg-surface/50 border-surfaceHover"}},o=()=>{t?.link&&chrome.tabs.create({url:t.link})};return l?e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-5 rounded-xl border border-surfaceHover shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"üìÖ"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Daily Question"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Loading today's challenge..."})]})]}),e.jsx("div",{className:"relative w-full h-1.5 bg-surfaceHover rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-primary via-primaryHover to-primary rounded-full animate-loading-bar",style:{width:"40%",animation:"loading-slide 1.5s ease-in-out infinite"}})}),e.jsx("style",{children:`
          @keyframes loading-slide {
            0% { left: -40%; }
            100% { left: 100%; }
          }
        `})]}):t?e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-5 rounded-xl border border-surfaceHover shadow-lg hover:shadow-primary/5 transition-all duration-300 group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üìÖ"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Daily Question"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:new Date(t.date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]}),e.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-bold border ${i(t.difficulty)}`,children:t.difficulty})]}),e.jsxs("button",{onClick:o,className:"w-full text-left group-hover:scale-[1.01] transition-transform",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[e.jsxs("span",{className:"text-text-muted font-semibold text-xs",children:["#",t.questionId]}),e.jsx("h4",{className:"font-bold text-sm text-text-main group-hover:text-primary transition-colors flex-1 leading-tight",children:t.title})]}),t.topics&&t.topics.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[t.topics.slice(0,4).map((h,x)=>e.jsx("span",{className:"px-2 py-0.5 bg-primary/10 text-primary text-[9px] font-semibold rounded-full border border-primary/20",children:h},x)),t.topics.length>4&&e.jsxs("span",{className:"px-2 py-0.5 bg-surfaceHover text-text-muted text-[9px] font-semibold rounded-full",children:["+",t.topics.length-4," more"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-text-muted",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"üëç"}),e.jsx("span",{className:"font-semibold",children:t.likes?.toLocaleString()||0})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"üëé"}),e.jsx("span",{className:"font-semibold",children:t.dislikes?.toLocaleString()||0})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"text-primary font-bold group-hover:translate-x-1 transition-transform flex items-center gap-1",children:[e.jsx("span",{children:"Solve Now"}),e.jsx("span",{children:"‚Üí"})]})]})]})]}):e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-5 rounded-xl border border-surfaceHover shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"üìÖ"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Daily Question"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Unable to load question"})]})]}),e.jsx("p",{className:"text-xs text-text-muted",children:"Please try again later"})]})}function dt(){const[t,s]=y.useState([]),[l,r]=y.useState(""),[a,i]=y.useState(!1);y.useEffect(()=>{h();const n=(g,u)=>{u==="local"&&g.problem_queue&&h()};return chrome.storage.onChanged.addListener(n),()=>{chrome.storage.onChanged.removeListener(n)}},[]);const o=async n=>{try{const{my_leetcode_username:g}=await chrome.storage.local.get("my_leetcode_username");if(!g||!n||n.length===0)return;const u=await chrome.runtime.sendMessage({type:"FETCH_STATS",forceRefresh:!1});if(u.success&&u.friends&&u.friends[g]){const H=u.friends[g]?.profile?.recentSubmissions||[],_=new Set(H.filter(b=>b.statusDisplay==="Accepted").map(b=>b.titleSlug)),T=n.map(b=>b.slug&&_.has(b.slug)&&b.status!=="completed"?{...b,status:"completed"}:b);T.some((b,N)=>b.status!==n[N]?.status)&&(await chrome.storage.local.set({problem_queue:T}),s(T))}}catch(g){console.error("Error checking completed problems:",g)}},h=async()=>{try{const g=(await chrome.storage.local.get("problem_queue")).problem_queue||[],u=g.map(v=>(v.id||(v.id=v.slug||`problem-${Date.now()}-${Math.random()}`),v));g.some(v=>!v.id)&&await chrome.storage.local.set({problem_queue:u}),s(u),o(u)}catch(n){console.error("Error loading problems:",n)}},x=async n=>{try{await chrome.storage.local.set({problem_queue:n}),s(n)}catch(g){console.error("Error saving problems:",g)}},j=async()=>{if(!l.trim())return;const n=w(l.trim()),g=m(l.trim());if(t.some(_=>(_.slug||w(_.url||""))===n)){alert("This problem is already in your queue!");return}let v="pending";try{const{my_leetcode_username:_}=await chrome.storage.local.get("my_leetcode_username");if(_){const T=await chrome.runtime.sendMessage({type:"FETCH_STATS",forceRefresh:!1});T.success&&T.friends&&T.friends[_]&&(T.friends[_]?.profile?.recentSubmissions||[]).some(D=>D.titleSlug===n&&D.statusDisplay==="Accepted")&&(v="completed")}}catch(_){console.error("Error checking submission status:",_)}const H={id:n||Date.now(),title:l.trim(),slug:n,url:g,addedAt:Date.now(),status:v,difficulty:"Medium"};x([...t,H]),r(""),i(!1)},p=(n,g)=>{const u=t.map(v=>v.id===n||v.slug===n?{...v,status:g}:v);x(u)},w=n=>{if(n.includes("leetcode.com/problems/")){const g=n.match(/problems\/([^/]+)/);return g?g[1]:n}return n.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-")},d=n=>{x(t.filter(g=>g.id!==n&&g.slug!==n))},m=n=>n.startsWith("http")?n:`https://leetcode.com/problems/${n.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-")}/`,c=n=>{chrome.tabs.create({url:n})};return e.jsxs("div",{className:"bg-surface rounded-3xl shadow-xl p-6 border border-surfaceHover transition-all duration-300 hover:shadow-2xl hover:shadow-primary/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"üìù"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xs text-text-main",children:"Problem Queue"}),e.jsx("p",{className:"text-[9px] text-text-muted",children:"Save problems to solve later"})]})]}),e.jsx("button",{onClick:()=>i(!a),className:"px-2.5 py-1 text-[10px] font-semibold bg-primary text-white rounded-md hover:bg-primaryHover transition-all active:scale-95",children:a?"‚úï":"+ Add"})]}),a&&e.jsxs("div",{className:"mb-3 p-2.5 bg-background/50 rounded-lg border border-surfaceHover",children:[e.jsx("input",{type:"text",value:l,onChange:n=>r(n.target.value),onKeyPress:n=>n.key==="Enter"&&j(),placeholder:"Problem name or URL...",className:"w-full px-2.5 py-1.5 text-[10px] bg-surface border border-surfaceHover rounded-md focus:outline-none focus:border-primary text-text-main placeholder-text-muted mb-2",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:j,className:"flex-1 py-1.5 text-[10px] font-semibold bg-primary text-white rounded-md hover:bg-primaryHover transition-all",children:"Add to Queue"}),e.jsx("button",{onClick:n=>{n.stopPropagation(),i(!1),r("")},className:"px-3 py-1.5 text-[10px] font-semibold text-text-muted hover:text-text-main bg-surface hover:bg-surfaceHover rounded-md transition-all active:scale-95",children:"Cancel"})]})]}),t.length===0?e.jsxs("div",{className:"text-center py-4 text-text-muted",children:[e.jsx("span",{className:"text-2xl mb-1 block",children:"üìã"}),e.jsx("p",{className:"text-[10px]",children:"No problems saved yet"}),e.jsx("p",{className:"text-[9px] mt-0.5",children:'Visit LeetCode problems and click "Add to Queue"'})]}):e.jsx("div",{className:"space-y-1.5 max-h-48 overflow-y-auto pr-1 scrollbar-hide",children:t.map(n=>{const g={Easy:"text-leetcode-easy",Medium:"text-leetcode-medium",Hard:"text-leetcode-hard"},u={pending:"‚è≥","in-progress":"üöÄ",completed:"‚úÖ"},v=n.status==="completed";return e.jsxs("div",{className:`flex items-center gap-2 p-2 rounded-lg border transition-all group ${v?"bg-green-500/5 border-green-500/20 hover:border-green-500/40":"bg-background/50 border-surfaceHover hover:border-primary/40"}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx("span",{className:"text-[10px]",children:u[n.status]||"üìã"}),e.jsxs("div",{className:`text-[10px] font-semibold truncate group-hover:text-primary transition-colors ${v?"text-green-400":"text-text-main"}`,children:[n.title,v&&e.jsx("span",{className:"ml-1.5 text-[8px] text-green-400/70",children:"(Submitted)"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[8px] text-text-muted",children:[e.jsx("span",{className:`font-semibold ${g[n.difficulty]||"text-text-muted"}`,children:n.difficulty}),n.number&&e.jsxs("span",{children:["#",n.number]}),e.jsx("span",{children:"‚Ä¢"}),e.jsxs("span",{children:["Added ",new Date(n.addedAt).toLocaleDateString()]}),v&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{className:"text-green-400 font-semibold",children:"‚úì Submitted"})]})]})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[n.status!=="completed"&&e.jsx("button",{onClick:H=>{H.stopPropagation(),p(n.id,n.status==="pending"?"in-progress":"completed")},className:"px-2 py-1 text-[9px] font-semibold text-accent hover:text-accent bg-accent/10 hover:bg-accent/20 rounded transition-all active:scale-95",title:n.status==="pending"?"Start":"Complete",children:n.status==="pending"?"‚ñ∂":"‚úì"}),e.jsx("button",{onClick:()=>c(n.url),className:"px-2 py-1 text-[9px] font-semibold text-primary hover:text-primaryHover bg-primary/10 hover:bg-primary/20 rounded transition-all whitespace-nowrap",title:"Open problem",children:"Open"}),e.jsx("button",{onClick:H=>{H.stopPropagation(),d(n.id)},className:"px-1.5 py-1 text-[9px] font-semibold text-red-400 hover:text-red-300 bg-red-400/10 hover:bg-red-400/20 rounded transition-all active:scale-95",title:"Remove",children:"‚úï"})]})]},n.id)})}),t.length>0&&e.jsx("div",{className:"mt-2 pt-2 border-t border-surfaceHover",children:e.jsxs("div",{className:"flex justify-between items-center text-[9px] text-text-muted",children:[e.jsxs("span",{children:[t.length," problem",t.length!==1?"s":""," in queue"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{children:["‚è≥ ",t.filter(n=>n.status==="pending").length]}),e.jsxs("span",{children:["üöÄ ",t.filter(n=>n.status==="in-progress").length]}),e.jsxs("span",{children:["‚úÖ ",t.filter(n=>n.status==="completed").length]})]})]})})]})}function mt(t){if(!t)return;const{profile:s,stats:l,submissionCalendar:r}=t;let a=`LeetCode Statistics Report

`;a+=`Username,${s.username}
`,a+=`Real Name,${s.realName||"N/A"}
`,a+=`Current Streak,${l.streak||0} days
`,a+=`Total Problems,${l.total||0}
`,a+=`Easy Problems,${l.easy||0}
`,a+=`Medium Problems,${l.medium||0}
`,a+=`Hard Problems,${l.hard||0}
`,a+=`Global Ranking,${s.ranking||"N/A"}

`,a+=`Date,Submissions
`,r&&Object.entries(r).filter(([j,p])=>parseInt(p)>0).sort(([j],[p])=>parseInt(p)-parseInt(j)).slice(0,30).forEach(([j,p])=>{const d=new Date(parseInt(j)*1e3).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"});a+=`${d},${p}
`});const i=new Blob([a],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),h=URL.createObjectURL(i);o.setAttribute("href",h),o.setAttribute("download",`leetcode_stats_${s.username}_${Date.now()}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}function xt(t){if(!t)return;const{profile:s,stats:l,submissionCalendar:r}=t,a=`
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>LeetCode Stats - ${s.username}</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      color: #333;
    }
    .header {
      text-align: center;
      margin-bottom: 40px;
      border-bottom: 3px solid #FF6B35;
      padding-bottom: 20px;
    }
    .header h1 {
      color: #FF6B35;
      margin: 0;
      font-size: 32px;
    }
    .header p {
      color: #666;
      margin: 10px 0 0 0;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin: 30px 0;
    }
    .stat-card {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 12px;
      border-left: 4px solid #FF6B35;
    }
    .stat-card h3 {
      margin: 0 0 10px 0;
      color: #666;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .stat-card .value {
      font-size: 32px;
      font-weight: bold;
      color: #FF6B35;
    }
    .difficulty-section {
      margin: 30px 0;
    }
    .difficulty-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-top: 15px;
    }
    .difficulty-card {
      padding: 15px;
      border-radius: 8px;
      text-align: center;
    }
    .difficulty-card.easy {
      background: #d4edda;
      border: 2px solid #28a745;
    }
    .difficulty-card.medium {
      background: #fff3cd;
      border: 2px solid #ffc107;
    }
    .difficulty-card.hard {
      background: #f8d7da;
      border: 2px solid #dc3545;
    }
    .difficulty-card .value {
      font-size: 28px;
      font-weight: bold;
      margin: 5px 0;
    }
    .difficulty-card.easy .value { color: #28a745; }
    .difficulty-card.medium .value { color: #ffc107; }
    .difficulty-card.hard .value { color: #dc3545; }
    .footer {
      margin-top: 40px;
      text-align: center;
      color: #999;
      font-size: 12px;
      border-top: 1px solid #ddd;
      padding-top: 20px;
    }
    @media print {
      body { margin: 0; }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>üöÄ LeetCode Statistics</h1>
    <p><strong>${s.username}</strong>${s.realName?` ‚Ä¢ ${s.realName}`:""}</p>
  </div>

  <div class="stats-grid">
    <div class="stat-card">
      <h3>üî• Current Streak</h3>
      <div class="value">${l.streak||0}</div>
      <p style="margin: 5px 0 0 0; color: #666;">days</p>
    </div>
    <div class="stat-card">
      <h3>üìä Total Problems</h3>
      <div class="value">${l.total||0}</div>
      <p style="margin: 5px 0 0 0; color: #666;">solved</p>
    </div>
  </div>

  <div class="difficulty-section">
    <h2 style="color: #333; margin-bottom: 15px;">Problem Breakdown</h2>
    <div class="difficulty-grid">
      <div class="difficulty-card easy">
        <h4 style="margin: 0; color: #28a745;">Easy</h4>
        <div class="value">${l.easy||0}</div>
      </div>
      <div class="difficulty-card medium">
        <h4 style="margin: 0; color: #ffc107;">Medium</h4>
        <div class="value">${l.medium||0}</div>
      </div>
      <div class="difficulty-card hard">
        <h4 style="margin: 0; color: #dc3545;">Hard</h4>
        <div class="value">${l.hard||0}</div>
      </div>
    </div>
  </div>

  ${s.ranking?`
  <div class="stat-card" style="margin: 30px 0;">
    <h3>üèÜ Global Ranking</h3>
    <div class="value">#${s.ranking.toLocaleString()}</div>
  </div>
  `:""}

  <div class="footer">
    <p>Generated by LeetStreak on ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}</p>
    <p>Profile: https://leetcode.com/${s.username}</p>
  </div>
</body>
</html>
  `,i=window.open("","_blank");i.document.write(a),i.document.close(),i.onload=()=>{i.focus(),setTimeout(()=>{i.print()},250)}}function ut({friends:t,currentStreak:s,onRefresh:l,refreshing:r}){const[a,i]=y.useState(0),[o,h]=y.useState(null),[x,j]=y.useState(!1),[p,w]=y.useState(new Set),[d,m]=y.useState(!1);if(y.useEffect(()=>{[7,30,100,365].includes(s)&&!p.has(s)&&(j(!0),w(N=>new Set([...N,s])))},[s,p]),y.useEffect(()=>{if(!t||t.length===0)return;const b=t[0];if(!b?.submissionCalendar)return;const N=new Date,D=new Date(Date.UTC(N.getFullYear(),N.getMonth(),N.getDate())),S=Math.floor(D.getTime()/1e3).toString(),A=parseInt(b.submissionCalendar[S])||0;s>0&&A===0?m(!0):m(!1)},[t,s]),!t||t.length===0)return e.jsx("div",{className:"flex items-center justify-center h-full p-8 text-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-5xl mb-4",children:"üìä"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No data available"}),e.jsx("button",{onClick:l,className:"px-4 py-2 bg-orange-500 text-white rounded-full text-sm",children:"Load Data"})]})});const c=t.length>0?t.reduce((b,N)=>(N.stats?.streak||0)>(b.stats?.streak||0)?N:b):null,n=t.reduce((b,N)=>({easy:b.easy+(N.stats?.easy||0),medium:b.medium+(N.stats?.medium||0),hard:b.hard+(N.stats?.hard||0),total:b.total+(N.stats?.total||0)}),{easy:0,medium:0,hard:0,total:0}),g=t[0],u=g?.submissionCalendar,v=b=>b===0?0:b<=2?1:b<=4?2:b<=6?3:4,_=(()=>{const b=[],N=new Date,D=N.getDay(),S=new Date(N);S.setDate(N.getDate()-D);for(let A=0;A<7;A++){const I=new Date(S);I.setDate(S.getDate()+A);let O=0;if(u){const W=new Date(Date.UTC(I.getFullYear(),I.getMonth(),I.getDate())),f=Math.floor(W.getTime()/1e3).toString();O=parseInt(u[f])||0}b.push({label:["S","M","T","W","T","F","S"][A],date:I.getDate(),count:O,isToday:I.toDateString()===N.toDateString(),isPast:I<N,isFuture:I>N})}return b})(),T=(b=0)=>{if(!u)return null;try{const N=u;if(!N||typeof N!="object")return null;console.log("Calendar data:",N),console.log("Calendar keys sample:",Object.keys(N).slice(0,10));const D=new Date,S=new Date(Date.UTC(D.getFullYear(),D.getMonth(),D.getDate())),A=new Date(S.getFullYear(),S.getMonth()-b,1),I=A.getFullYear(),O=A.getMonth(),W=A.toLocaleDateString("en-US",{month:"long"}),f=new Date(I,O,1).getDay(),k=new Date(I,O+1,0).getDate(),M=[];let C=[];for(let E=0;E<f;E++)C.push(null);for(let E=1;E<=k;E++){const R=new Date(I,O,E),Y=new Date(Date.UTC(R.getFullYear(),R.getMonth(),R.getDate())),L=Math.floor(Y.getTime()/1e3).toString(),q=parseInt(N[L])||0,B=R.toDateString()===D.toDateString();(B||q>0)&&console.log("Day "+E+":",{date:R.toISOString(),timestamp:L,count:q,calendarValue:N[L],isToday:B}),C.push({date:R,day:E,count:q,dateStr:L,isToday:B}),C.length===7&&(M.push(C),C=[])}if(C.length>0){for(;C.length<7;)C.push(null);M.push(C)}return{monthName:W,year:I,weeks:M}}catch(N){return console.error("Error generating calendar data:",N),null}},U=(b,N=!1)=>{const D=v(b),S=["bg-surfaceHover border-surfaceHover","bg-secondary/40 border-secondary/60 shadow-sm","bg-secondary/60 border-secondary/80 shadow","bg-secondary/80 border-secondary shadow-md","bg-secondary border-secondary shadow-lg"];return N?S[D]+" ring-2 ring-primary/80 ring-offset-1 ring-offset-background":S[D]};return e.jsxs("div",{className:"h-full overflow-y-auto pb-6 bg-background scrollbar-hide",children:[x&&e.jsx(st,{streak:s,onClose:()=>j(!1)}),d&&e.jsx("div",{className:"mx-6 mt-6 mb-4 px-4 py-3 bg-gradient-to-r from-amber-500/20 to-orange-500/20 border-2 border-amber-500/40 rounded-xl backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"‚ö†Ô∏è"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-bold text-sm text-amber-400",children:"Streak at Risk!"}),e.jsx("button",{onClick:()=>m(!1),className:"ml-auto text-text-muted hover:text-text-main text-xs",children:"‚úï"})]}),e.jsxs("p",{className:"text-xs text-text-muted leading-relaxed",children:["You haven't solved any problems today. Your ",e.jsxs("strong",{className:"text-amber-400",children:[s,"-day streak"]})," will break at midnight! üî•"]}),e.jsxs("a",{href:"https://leetcode.com/problemset/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 mt-2 text-xs font-semibold text-amber-400 hover:text-amber-300 transition-colors",children:[e.jsx("span",{children:"Solve a problem now"}),e.jsx("span",{children:"‚Üí"})]})]})]})}),e.jsxs("div",{className:"text-center pt-8 pb-6 animate-fade-in",children:[e.jsx("div",{className:"text-8xl font-black bg-gradient-to-r from-primary via-orange-500 to-red-500 bg-clip-text text-transparent mb-2 drop-shadow-2xl",children:s}),e.jsx("div",{className:"text-xl font-bold text-text-main mb-1",children:"Day Streak üéØ"}),e.jsxs("p",{className:"text-sm text-text-muted",children:["You are doing really great",c?`, ${c.profile.username}`:"","!"]}),(g?.profile?.ranking||g?.contestRanking?.globalRanking)&&e.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"üåç"}),e.jsxs("span",{className:"text-sm font-bold text-primary",children:["Global Rank #",(g.profile.ranking||g.contestRanking.globalRanking).toLocaleString()]})]}),e.jsx("button",{onClick:l,disabled:r,className:"mt-4 px-6 py-2.5 text-sm font-semibold text-inverted bg-primary hover:bg-primaryHover rounded-full transition-all duration-300 disabled:opacity-50 shadow-lg hover:shadow-primary/30 active:scale-95 flex items-center gap-2 mx-auto",children:r?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"inline-block animate-spin",children:"‚ü≥"}),e.jsx("span",{children:"Refreshing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"üîÑ"}),e.jsx("span",{children:"Refresh Data"})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4",children:[e.jsxs("button",{onClick:()=>mt(g),className:"px-4 py-2 text-xs font-semibold text-text-main bg-surface hover:bg-surfaceHover border border-surfaceHover rounded-lg transition-all duration-300 shadow-sm hover:shadow-md active:scale-95 flex items-center gap-2",children:[e.jsx("span",{children:"üìÑ"}),e.jsx("span",{children:"Export CSV"})]}),e.jsxs("button",{onClick:()=>xt(g),className:"px-4 py-2 text-xs font-semibold text-text-main bg-surface hover:bg-surfaceHover border border-surfaceHover rounded-lg transition-all duration-300 shadow-sm hover:shadow-md active:scale-95 flex items-center gap-2",children:[e.jsx("span",{children:"üìã"}),e.jsx("span",{children:"Export PDF"})]})]}),e.jsx("p",{className:"text-xs text-text-muted text-center mt-2",children:"Auto-syncs every 30 minutes"})]}),e.jsx("div",{className:"px-6 mb-6 animate-slide-up",children:e.jsxs("div",{className:"bg-surface rounded-3xl p-5 shadow-xl border border-surfaceHover transition-all duration-300 hover:shadow-2xl hover:shadow-primary/5",children:[e.jsx("h3",{className:"text-xs font-semibold text-text-muted uppercase tracking-wide mb-4 text-center",children:"This Week"}),e.jsx("div",{className:"flex justify-between items-center gap-2 relative",children:_.map((b,N)=>{const D=v(b.count);let S,A;return D===0?(S="bg-surfaceHover",A="text-text-muted"):D===1?(S="bg-secondary/40",A="text-white"):D===2?(S="bg-secondary/60",A="text-white"):D===3?(S="bg-secondary/80",A="text-white"):(S="bg-secondary",A="text-white"),e.jsxs("div",{className:"flex-1 text-center group relative",children:[e.jsx("div",{className:"text-xs text-text-muted font-medium mb-2 group-hover:text-text-main transition-colors",children:b.label}),e.jsx("div",{className:`
                      w-full aspect-square rounded-2xl flex items-center justify-center text-sm font-bold shadow-sm transition-all duration-300 cursor-pointer
                      ${S} ${A}
                      ${b.isToday?"ring-2 ring-primary/80 ring-offset-1 ring-offset-background scale-110":""}
                      ${b.isFuture?"opacity-40":""}
                      hover:scale-110 hover:shadow-lg
                    `,title:`${b.count} submission${b.count!==1?"s":""}`,children:b.count>0?b.count:b.date}),e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-surface border border-primary/40 rounded-lg shadow-xl transition-opacity duration-200 pointer-events-none z-50 whitespace-nowrap",children:[e.jsx("div",{className:"text-xs font-semibold text-primary",children:b.count===0?"No submissions":`${b.count} submission${b.count!==1?"s":""}`}),e.jsx("div",{className:"text-[10px] text-text-muted mt-1",children:new Date(new Date().setDate(new Date().getDate()-new Date().getDay()+N)).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),b.isToday&&e.jsx("div",{className:"text-[10px] text-amber-400 font-semibold mt-1",children:"Today"})]})]},N)})})]})}),e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.1s"},children:e.jsxs("div",{className:"bg-surface rounded-3xl shadow-xl p-6 border border-surfaceHover transition-all duration-300 hover:shadow-2xl hover:shadow-primary/5",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-muted mb-4 text-center",children:"Your Stats üìä"}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"text-center py-3 bg-leetcode-easy/10 rounded-2xl shadow-sm border border-leetcode-easy/20 hover:bg-leetcode-easy/20 transition-colors",children:[e.jsx("div",{className:"text-xl font-bold text-leetcode-easy",children:n.easy}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Easy"})]}),e.jsxs("div",{className:"text-center py-3 bg-leetcode-medium/10 rounded-2xl shadow-sm border border-leetcode-medium/20 hover:bg-leetcode-medium/20 transition-colors",children:[e.jsx("div",{className:"text-xl font-bold text-leetcode-medium",children:n.medium}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Medium"})]}),e.jsxs("div",{className:"text-center py-3 bg-leetcode-hard/10 rounded-2xl shadow-sm border border-leetcode-hard/20 hover:bg-leetcode-hard/20 transition-colors",children:[e.jsx("div",{className:"text-xl font-bold text-leetcode-hard",children:n.hard}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Hard"})]}),e.jsxs("div",{className:"text-center py-3 bg-surfaceHover rounded-2xl shadow-sm border border-surfaceHover hover:bg-surfaceHover/80 transition-colors",children:[e.jsx("div",{className:"text-xl font-bold text-text-main",children:n.total}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Total"})]})]})]})}),e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.1s"},children:e.jsx(ct,{})}),e.jsxs("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.15s"},children:[e.jsxs("h3",{className:"text-sm font-semibold text-text-muted mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-base",children:"üéØ"}),e.jsx("span",{children:"My Goals"})]}),e.jsx(nt,{userData:g})]}),c&&c.stats.streak>=7&&e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.25s"},children:e.jsx("div",{className:"bg-gradient-to-br from-primary/10 to-surface rounded-3xl p-6 border border-primary/20 shadow-lg transition-all duration-300 hover:shadow-primary/10",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-primaryHover rounded-full flex items-center justify-center shadow-lg shadow-primary/20",children:e.jsx("span",{className:"text-3xl animate-bounce-slow",children:"üèÖ"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-text-muted mb-1",children:"Earned a Badge"}),e.jsx("div",{className:"text-xl font-bold text-text-main",children:"Challenger üéñÔ∏è"})]})]})})}),u&&(()=>{const b=T(a);return b?e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.3s"},children:e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-4 rounded-xl border border-surfaceHover shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üìÖ"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm text-text-main",children:"Activity Calendar"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Browse monthly submissions"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:l,disabled:r,className:"p-1.5 text-text-muted hover:text-primary rounded-lg transition-all duration-300 disabled:opacity-50 hover:bg-surface",title:"Refresh data",children:r?e.jsx("span",{className:"inline-block animate-spin text-sm",children:"‚ü≥"}):e.jsx("span",{className:"text-sm",children:"üîÑ"})}),e.jsxs("div",{className:"flex items-center gap-1 bg-background/60 px-2 py-1.5 rounded-lg border border-surfaceHover/50",children:[e.jsx("span",{className:"text-[9px] text-text-muted mr-1",children:"Less"}),[0,1,2,3,4].map(N=>e.jsx("div",{className:`w-[10px] h-[10px] rounded-[2px] border ${U(N*2)}`},N)),e.jsx("span",{className:"text-[9px] text-text-muted ml-1",children:"More"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{onClick:N=>{N.stopPropagation(),a<11&&i(a+1)},disabled:a>=11,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 border border-primary/30 disabled:opacity-30 disabled:cursor-not-allowed transition-all group",children:e.jsx("svg",{className:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-bold text-primary",children:[b.monthName," ",b.year]}),e.jsx("div",{className:"text-[10px] text-text-muted",children:(()=>{const N=b.weeks.flat().filter(D=>D&&D.count>0).reduce((D,S)=>D+S.count,0);return`${N} submission${N!==1?"s":""}`})()})]}),e.jsx("button",{onClick:N=>{N.stopPropagation(),a>0&&i(a-1)},disabled:a<=0,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 border border-primary/30 disabled:opacity-30 disabled:cursor-not-allowed transition-all group",children:e.jsx("svg",{className:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"bg-background/70 backdrop-blur-sm rounded-xl p-3 border border-surfaceHover/60 relative",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((N,D)=>e.jsx("div",{className:"text-[9px] text-text-muted text-center font-semibold",children:N},D))}),b.weeks.map((N,D)=>e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:N.map((S,A)=>{const I=D<2;let O="left-1/2 transform -translate-x-1/2";return A===0?O="left-0":A===6&&(O="right-0"),e.jsx("div",{className:`aspect-square rounded-md flex items-center justify-center text-[9px] font-bold transition-all duration-300 relative group ${S?`${U(S.count,S.isToday)} cursor-pointer hover:scale-125 hover:shadow-xl hover:z-20 ${o?.dateStr===S.dateStr?"scale-125 shadow-xl z-20":""}`:"bg-transparent"}`,onMouseEnter:()=>S&&h(S),onMouseLeave:()=>h(null),children:S&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`${S.count>0?"text-white font-bold drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]":"text-text-muted font-semibold"}`,children:S.day}),S.isToday&&e.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-1.5 h-1.5 bg-amber-400 rounded-full animate-pulse"}),o?.dateStr===S.dateStr&&e.jsxs("div",{className:`absolute ${I?"top-full mt-2":"bottom-full mb-2"} ${O} bg-gradient-to-br from-surface to-surfaceHover border-2 border-primary/40 rounded-xl px-4 py-3 shadow-2xl z-50 animate-fade-in pointer-events-none backdrop-blur-sm whitespace-nowrap`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[S.isToday&&e.jsx("span",{className:"text-base",children:"‚≠ê"}),e.jsx("div",{className:"text-sm font-bold text-primary",children:S.count===0?"No activity":`${S.count} submission${S.count!==1?"s":""}`})]}),e.jsx("div",{className:"text-[11px] text-text-muted",children:S.date.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),S.isToday&&e.jsx("div",{className:"text-[10px] text-amber-400 font-semibold mt-1",children:"Today"})]})]})},A)})},D))]})]})}):null})(),t.length>0&&e.jsxs("div",{className:"mx-6 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-muted mb-3",children:"Recent Activity üéØ"}),e.jsx("div",{className:"space-y-3",children:t.slice(0,3).filter(b=>b&&b.profile&&b.stats).map((b,N)=>e.jsx("div",{className:"bg-surface rounded-3xl p-4 shadow-md border border-surfaceHover transition-all duration-300 hover:shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:b.profile?.avatar||"https://via.placeholder.com/40",alt:b.profile?.username||"User",className:"w-6 h-6 rounded-full shadow-md"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-sm text-text-main",children:b.profile?.username||"Unknown"}),e.jsxs("div",{className:"text-xs text-text-muted",children:[b.stats?.total||0," problems solved"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-primary font-bold bg-primary/10 px-3 py-1 rounded-full border border-primary/20",children:[e.jsx("span",{children:"üî•"}),e.jsx("span",{children:b.stats?.streak||0})]})]})},N))})]}),e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.35s"},children:e.jsx(dt,{})})]})}function ht({isOpen:t,onClose:s}){const[l,r]=y.useState(null),[a,i]=y.useState(!0),[o,h]=y.useState(!1),[x,j]=y.useState(null);y.useEffect(()=>{t&&p()},[t]);const p=async()=>{try{i(!0);const m=await chrome.runtime.sendMessage({type:"GET_NOTIFICATION_STATE"});if(m.success){r(m.state);const c=new Date().toISOString().split("T")[0],n=m.state.mutedUntilUTC&&m.state.mutedUntilUTC>c;h(n),j(m.state.mutedUntilUTC)}}catch(m){console.error("Error loading notification state:",m)}finally{i(!1)}},w=async()=>{try{const m=new Date;m.setUTCDate(m.getUTCDate()+1);const c=m.toISOString().split("T")[0];(await chrome.runtime.sendMessage({type:"MUTE_NOTIFICATIONS",untilUTC:c})).success&&(h(!0),j(c))}catch(m){console.error("Error muting notifications:",m)}},d=async()=>{try{(await chrome.runtime.sendMessage({type:"MUTE_NOTIFICATIONS",untilUTC:null})).success&&(h(!1),j(null))}catch(m){console.error("Error unmuting notifications:",m)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface border border-zinc-700 rounded-lg max-w-md w-full shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-zinc-100",children:"Notification Settings"}),e.jsx("button",{onClick:s,className:"text-zinc-400 hover:text-zinc-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-4 space-y-4",children:a?e.jsx("div",{className:"text-center text-zinc-400 py-8",children:e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-background rounded-lg p-4 border border-zinc-800",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-zinc-400",children:"Status"}),e.jsx("span",{className:`text-sm font-medium ${o?"text-orange-400":"text-green-400"}`,children:o?"üîï Muted":"üîî Active"})]}),o&&x&&e.jsxs("p",{className:"text-xs text-zinc-500 mt-2",children:["Muted until ",x," UTC"]})]}),e.jsxs("div",{className:"text-sm text-zinc-400 space-y-2",children:[e.jsx("p",{children:"‚Ä¢ Max 1 notification per friend per day (UTC)"}),e.jsx("p",{children:"‚Ä¢ Notifications for: solved today, milestones (7/30/100 days)"}),e.jsx("p",{children:"‚Ä¢ Batched notifications sent after sync"})]}),e.jsx("div",{className:"flex gap-2",children:o?e.jsx("button",{onClick:d,className:"flex-1 bg-green-500/20 hover:bg-green-500/30 text-green-400 border border-green-500/50 rounded-lg px-4 py-2 font-medium transition-colors",children:"Unmute Notifications"}):e.jsx("button",{onClick:w,className:"flex-1 bg-orange-500/20 hover:bg-orange-500/30 text-orange-400 border border-orange-500/50 rounded-lg px-4 py-2 font-medium transition-colors",children:"Mute Until Tomorrow"})}),l?.lastNotified&&Object.keys(l.lastNotified).length>0&&e.jsxs("div",{className:"border-t border-zinc-700 pt-4 mt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-zinc-300 mb-2",children:"Recent Notifications"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto scrollbar-hide",children:Object.entries(l.lastNotified).map(([m,c])=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-zinc-400",children:m}),e.jsx("span",{className:"text-zinc-500",children:c})]},m))})]})]})}),e.jsx("div",{className:"p-4 border-t border-zinc-700 bg-background/50",children:e.jsx("button",{onClick:s,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-zinc-100 rounded-lg px-4 py-2 font-medium transition-colors",children:"Close"})})]})}):null}function pt({notifications:t,onDismiss:s}){const[l,r]=y.useState(!1);y.useEffect(()=>{t&&t.length>0?r(!0):r(!1)},[t]);const a=()=>{r(!1),setTimeout(()=>{t&&t.length>0&&s(t[0].id)},300)};if(!l||!t||t.length===0)return null;const i=t[0],o=t.length,h=()=>{switch(i.type){case"new_submission":case"solved_today":return e.jsx(Ie,{className:"w-8 h-8 text-primary"});case"milestone":return e.jsx(K,{className:"w-8 h-8 text-orange-500"});case"streak_at_risk":return e.jsx(Z,{className:"w-8 h-8 text-yellow-500"});default:return e.jsx(te,{className:"w-8 h-8 text-primary"})}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 animate-fade-in",onClick:a}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:e.jsx("div",{className:"pointer-events-auto animate-scale-in-center",children:e.jsxs("div",{className:"bg-surface border-2 border-primary/30 rounded-3xl shadow-2xl p-8 w-[340px] relative",children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-text-muted hover:text-text-main transition-colors p-1 hover:bg-surfaceHover rounded-lg",children:e.jsx(Be,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center",children:h()})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg text-text-main mb-2",children:i.username}),e.jsx("div",{className:"text-sm text-text-muted mb-6",children:i.message}),o>1&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 rounded-full text-xs text-primary font-semibold mb-4",children:[e.jsx(te,{className:"w-3 h-3"}),o-1," more notification",o-1>1?"s":""]}),e.jsx("button",{onClick:a,className:"w-full py-3 bg-primary hover:bg-primaryHover text-inverted font-semibold rounded-xl transition-all duration-200 active:scale-95",children:"Got it!"})]})]})})})]})}function ft(t){const s=[];if(!t||!t.stats)return s;const{stats:l,submissionCalendar:r,recentSubmissions:a}=t,i=gt(l);i&&s.push(i);const o=bt(r);o&&s.push(o);const h=yt(r);h&&s.push(h);const x=vt(a);x&&s.push(x);const j=jt(l);return j&&s.push(j),s}function gt(t){const{easy:s=0,medium:l=0,hard:r=0,total:a=0}=t;if(a===0)return null;const i=s/a*100,o=l/a*100,h=r/a*100;let x,j,p;return h>30?(x=`You're a challenge seeker! ${h.toFixed(0)}% of your solutions are Hard problems. üí™`,j="üî•",p="achievement"):o>50?(x=`Balanced approach! You focus on Medium problems (${o.toFixed(0)}%). Keep pushing! üìà`,j="‚öñÔ∏è",p="neutral"):i>60&&(x="Strong foundation with Easy problems! Ready to tackle more Medium challenges? üéØ",j="üí°",p="suggestion"),{message:x,icon:j,type:p,category:"Difficulty Preference"}}function bt(t){if(!t)return null;try{const s=typeof t=="string"?JSON.parse(t):t,l=new Date;l.setHours(0,0,0,0);let r=0;for(let h=0;h<7;h++){const x=new Date(l);x.setDate(x.getDate()-h);const j=Math.floor(x.getTime()/1e3).toString();s[j]>0&&r++}let a,i,o;return r===7?(a="Perfect week! You solved problems every day for 7 days straight! üåü",i="üéâ",o="achievement"):r>=5?(a=`Great consistency! ${r} active days this week. Keep it up! ‚ö°`,i="‚≠ê",o="achievement"):r>=3?(a=`${r} days active this week. Try to maintain regular practice! üí™`,i="ÔøΩ",o="neutral"):(a=`Only ${r} active days this week. Let's get back on track! üéØ`,i="üí°",o="suggestion"),{message:a,icon:i,type:o,category:"Weekly Consistency"}}catch{return null}}function yt(t){if(!t)return null;try{const s=typeof t=="string"?JSON.parse(t):t,l=Array(7).fill(0),r=new Date;r.setHours(0,0,0,0);for(let x=0;x<30;x++){const j=new Date(r);j.setDate(j.getDate()-x);const p=Math.floor(j.getTime()/1e3).toString();if(s[p]>0){const w=j.getDay();l[w]++}}const a=Math.max(...l);if(a===0)return null;const i=l.indexOf(a),o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return{message:`Your most productive day is ${o[i]}! You've been most active on ${o[i]}s. üìÖ`,icon:"ÔøΩ",type:"neutral",category:"Best Solving Days"}}catch{return null}}function vt(t){if(!t||t.length===0)return null;const s=new Date;s.setHours(0,0,0,0);const l=new Date(s);l.setDate(s.getDate()-3);const r=t.filter(h=>new Date(h.timestamp*1e3)>=l).length;let a,i,o;return r>=5?(a=`On fire! ${r} submissions in the last 3 days! üî•`,i="üöÄ",o="achievement"):r>=2?(a=`Good momentum with ${r} recent submissions! Keep going! ÔøΩ`,i="‚ö°",o="neutral"):r===1?(a="Getting started! Let's build that momentum! ÔøΩ",i="üí°",o="suggestion"):(a="Time to get coding! Start with an easy problem to warm up! üåü",i="üí°",o="suggestion"),{message:a,icon:i,type:o,category:"Recent Activity"}}function jt(t){const{easy:s=0,medium:l=0,hard:r=0,total:a=0}=t;if(a===0)return null;let i,o,h;return a>=1e3?(i=`LeetCode Master! Over ${a} problems solved! You're in the elite club! ÔøΩ`,o="üëë",h="achievement"):a>=500?(i="Halfway to 1000! Keep grinding, you're doing amazing! üéØ",o="üéñÔ∏è",h="achievement"):a>=100?(i=`Century club member! ${a} problems solved and counting! ÔøΩ`,o="ÔøΩ",h="achievement"):a>=50?(i=`Great progress! ${a} problems down. Next milestone: 100! üìä`,o="‚≠ê",h="neutral"):(i=`Building momentum! ${a} problems solved. Keep going! üöÄ`,o="üå±",h="neutral"),{message:i,icon:o,type:h,category:"Achievement Level"}}function Nt(t=[]){if(!t||t.length===0)return{topics:[],totalAttempts:0};const s=new Map;return t.forEach(r=>{const a=r.title||"Unknown",i=r.statusDisplay||"";s.has(a)||s.set(a,{title:a,attempts:0,accepted:0,difficulty:de()});const o=s.get(a);o.attempts++,i==="Accepted"&&o.accepted++}),{topics:Array.from(s.values()).map(r=>({...r,successRate:r.attempts>0?(r.accepted/r.attempts*100).toFixed(1):"0"})).sort((r,a)=>a.attempts-r.attempts).slice(0,10),totalAttempts:t.length}}function wt(t=[]){if(!t||t.length===0)return{totalAttempts:0,accepted:0,successRate:0,byDifficulty:{easy:{accepted:0,total:0},medium:{accepted:0,total:0},hard:{accepted:0,total:0}}};const s={totalAttempts:t.length,accepted:0,byDifficulty:{easy:{accepted:0,total:0},medium:{accepted:0,total:0},hard:{accepted:0,total:0}}};return t.forEach(l=>{const r=l.statusDisplay==="Accepted";r&&s.accepted++;const a=de(l.title||"").toLowerCase();s.byDifficulty[a]&&(s.byDifficulty[a].total++,r&&s.byDifficulty[a].accepted++)}),s.successRate=s.totalAttempts>0?(s.accepted/s.totalAttempts*100).toFixed(1):0,s}function kt(t,s=[]){if(!t||s.length===0)return null;const l=t.stats||{total:0,easy:0,medium:0,hard:0},r=s.reduce((o,h)=>{const x=h.stats||{total:0,easy:0,medium:0,hard:0};return{total:o.total+x.total,easy:o.easy+x.easy,medium:o.medium+x.medium,hard:o.hard+x.hard,streak:o.streak+(h.streak||0)}},{total:0,easy:0,medium:0,hard:0,streak:0}),a=s.length,i={total:Math.round(r.total/a),easy:Math.round(r.easy/a),medium:Math.round(r.medium/a),hard:Math.round(r.hard/a),streak:Math.round(r.streak/a)};return{user:l,average:i,comparison:{total:l.total-i.total,easy:l.easy-i.easy,medium:l.medium-i.medium,hard:l.hard-i.hard,streak:(t.streak||0)-i.streak}}}function de(t){return"Medium"}function St({userData:t,friendsData:s=[]}){const[l,r]=y.useState([]),[a,i]=y.useState(null),[o,h]=y.useState(!1),[x,j]=y.useState(null),[p,w]=y.useState("insights");if(y.useEffect(()=>{if(t){const u=ft(t);r(u)}},[t]),!t)return e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl mb-3",children:"üìä"}),e.jsx("p",{className:"text-text-muted text-sm",children:"No data available"}),e.jsx("p",{className:"text-text-muted text-xs mt-1",children:"Add your LeetCode username to see analytics"})]})});const d=wt(t.recentSubmissions||[]),m=Nt(t.recentSubmissions||[]),c=s.length>0?kt(t,s):null,n=(u,v)=>{v.stopPropagation(),j(u),h(!0)},g=async(u,v)=>{v.stopPropagation();const H=`üéØ My LeetCode Insight:

${u.icon} ${u.category}
${u.message}

#LeetCode #CodingJourney`;if(navigator.clipboard)try{await navigator.clipboard.writeText(H),alert("‚úì Insight copied to clipboard!")}catch(_){console.error("Failed to copy:",_)}};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-1 bg-surface border border-surfaceHover rounded-xl p-1",children:[e.jsx("button",{onClick:()=>w("insights"),className:`flex-1 py-2 px-3 rounded-lg text-xs font-semibold transition-all ${p==="insights"?"bg-primary text-white shadow-md":"text-text-muted hover:text-text-primary hover:bg-surfaceHover"}`,children:"üí° Insights"}),e.jsx("button",{onClick:()=>w("analytics"),className:`flex-1 py-2 px-3 rounded-lg text-xs font-semibold transition-all ${p==="analytics"?"bg-primary text-white shadow-md":"text-text-muted hover:text-text-primary hover:bg-surfaceHover"}`,children:"üìä Analytics"}),e.jsx("button",{onClick:()=>w("comparison"),className:`flex-1 py-2 px-3 rounded-lg text-xs font-semibold transition-all ${p==="comparison"?"bg-primary text-white shadow-md":"text-text-muted hover:text-text-primary hover:bg-surfaceHover"}`,children:"üë• vs Friends"})]}),p==="insights"&&e.jsx(e.Fragment,{children:l&&l.length>0?e.jsxs(e.Fragment,{children:[l.map((u,v)=>e.jsxs("div",{className:`
                    bg-surface border rounded-xl p-4 transition-all duration-300 cursor-pointer
                    ${u.type==="achievement"?"border-accent/40 hover:border-accent/60":""}
                    ${u.type==="neutral"?"border-primary/30 hover:border-primary/50":""}
                    ${u.type==="suggestion"?"border-leetcode-medium/30 hover:border-leetcode-medium/50":""}
                    ${a===v?"ring-2 ring-primary/50 scale-[1.02]":"hover:scale-[1.01]"}
                  `,onClick:()=>i(a===v?null:v),children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:u.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-semibold text-text-muted uppercase tracking-wide",children:u.category}),u.type==="achievement"&&e.jsx("span",{className:"text-xs bg-accent/20 text-accent px-2 py-0.5 rounded-full",children:"Achievement"}),u.type==="suggestion"&&e.jsx("span",{className:"text-xs bg-leetcode-medium/20 text-leetcode-medium px-2 py-0.5 rounded-full",children:"Tip"})]}),e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:u.message})]}),e.jsx("div",{className:`
                      text-text-muted transition-transform
                      ${a===v?"rotate-180":""}
                    `,children:"‚ñº"})]}),a===v&&e.jsx("div",{className:"mt-4 pt-4 border-t border-surfaceHover animate-slide-up",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:H=>n(u,H),className:"flex-1 py-2 bg-primary/10 hover:bg-primary/20 text-primary rounded-lg text-xs font-semibold transition-colors",children:"View Details"}),e.jsx("button",{onClick:H=>g(u,H),className:"flex-1 py-2 bg-accent/10 hover:bg-accent/20 text-accent rounded-lg text-xs font-semibold transition-colors",children:"Share"})]})})]},v)),e.jsx("div",{className:"bg-gradient-to-br from-primary/5 to-accent/5 border border-primary/20 rounded-xl p-4 text-center",children:e.jsx("p",{className:"text-xs text-text-muted mb-2",children:"üí° Insights update daily based on your solving patterns"})})]}):e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üìä"}),e.jsx("p",{className:"text-text-muted",children:"No insights available yet. Keep solving!"})]})}),p==="analytics"&&e.jsxs("div",{className:"space-y-3",children:[d&&e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"üéØ"}),e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Success Rate"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-surfaceHover rounded-lg p-3",children:[e.jsxs("div",{className:"text-2xl font-bold text-accent",children:[d.successRate,"%"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Overall"})]}),e.jsxs("div",{className:"bg-surfaceHover rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:d.accepted}),e.jsx("div",{className:"text-xs text-text-muted",children:"Accepted"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Easy"}),e.jsx("span",{className:"font-semibold text-leetcode-easy",children:d.byDifficulty.easy.total>0?`${(d.byDifficulty.easy.accepted/d.byDifficulty.easy.total*100).toFixed(0)}%`:"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Medium"}),e.jsx("span",{className:"font-semibold text-leetcode-medium",children:d.byDifficulty.medium.total>0?`${(d.byDifficulty.medium.accepted/d.byDifficulty.medium.total*100).toFixed(0)}%`:"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Hard"}),e.jsx("span",{className:"font-semibold text-leetcode-hard",children:d.byDifficulty.hard.total>0?`${(d.byDifficulty.hard.accepted/d.byDifficulty.hard.total*100).toFixed(0)}%`:"N/A"})]})]})]}),m&&m.topics.length>0&&e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"üìö"}),e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Topic Performance"})]}),e.jsx("div",{className:"space-y-2",children:m.topics.slice(0,5).map((u,v)=>e.jsxs("div",{className:"bg-surfaceHover rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("span",{className:"text-xs text-text-primary font-medium line-clamp-1 flex-1",children:u.title}),e.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${u.successRate>=80?"bg-green-500/20 text-green-400":u.successRate>=50?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:[u.successRate,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-text-muted",children:[e.jsxs("span",{children:[u.attempts," problems"]}),e.jsx("span",{children:"‚Ä¢"}),e.jsxs("span",{children:[u.accepted," solved"]})]}),e.jsx("div",{className:"w-full bg-surfaceHover rounded-full h-1 mt-2 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${u.successRate>=80?"bg-green-500":u.successRate>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${u.successRate}%`}})})]},v))})]}),!d&&!m&&e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üìä"}),e.jsx("p",{className:"text-text-muted text-sm",children:"No analytics data available yet"}),e.jsx("p",{className:"text-text-muted text-xs mt-1",children:"Start solving to see your stats!"})]})]}),p==="comparison"&&e.jsx("div",{className:"space-y-3",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"üë•"}),e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"You vs Friends Average"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Total Problems"}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:c.user.total}),e.jsxs("div",{className:`text-xs font-semibold mt-1 ${c.comparison.total>=0?"text-accent":"text-leetcode-hard"}`,children:[c.comparison.total>=0?"+":"",c.comparison.total," vs avg"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Current Streak"}),e.jsx("div",{className:"text-2xl font-bold text-accent",children:t.streak||0}),e.jsxs("div",{className:`text-xs font-semibold mt-1 ${c.comparison.streak>=0?"text-accent":"text-leetcode-hard"}`,children:[c.comparison.streak>=0?"+":"",c.comparison.streak," vs avg"]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Easy"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-leetcode-easy",children:c.user.easy}),e.jsxs("span",{className:`text-[10px] ${c.comparison.easy>=0?"text-accent":"text-leetcode-hard"}`,children:["(",c.comparison.easy>=0?"+":"",c.comparison.easy,")"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Medium"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-leetcode-medium",children:c.user.medium}),e.jsxs("span",{className:`text-[10px] ${c.comparison.medium>=0?"text-accent":"text-leetcode-hard"}`,children:["(",c.comparison.medium>=0?"+":"",c.comparison.medium,")"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Hard"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-leetcode-hard",children:c.user.hard}),e.jsxs("span",{className:`text-[10px] ${c.comparison.hard>=0?"text-accent":"text-leetcode-hard"}`,children:["(",c.comparison.hard>=0?"+":"",c.comparison.hard,")"]})]})]})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-accent/5 to-primary/5 border border-accent/20 rounded-xl p-4 text-center",children:e.jsx("p",{className:"text-xs text-text-muted",children:c.comparison.total>=0?"üéâ You're ahead of the average! Keep pushing!":"üí™ Keep grinding! You'll catch up in no time!"})})]}):e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üë•"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Add friends to see comparisons"}),e.jsx("p",{className:"text-text-muted text-xs mt-1",children:"Compare your progress with others!"})]})}),o&&x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto scrollbar-hide",onClick:()=>h(!1),children:e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-2xl p-6 max-w-2xl w-full shadow-2xl animate-bounce-in my-8",onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"text-4xl",children:x.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-1",children:x.category}),x.type==="achievement"&&e.jsx("span",{className:"text-xs bg-accent/20 text-accent px-2 py-1 rounded-full",children:"üèÜ Achievement"}),x.type==="suggestion"&&e.jsx("span",{className:"text-xs bg-leetcode-medium/20 text-leetcode-medium px-2 py-1 rounded-full",children:"üí° Tip"})]}),e.jsx("button",{onClick:()=>h(!1),className:"text-text-muted hover:text-text-primary transition-colors text-xl",children:"‚úï"})]}),e.jsx("div",{className:"bg-surfaceHover rounded-xl p-4 mb-4",children:e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:x.message})}),x.category==="Difficulty Preference"&&e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"bg-leetcode-easy/10 border border-leetcode-easy/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Easy"}),e.jsx("div",{className:"text-xl font-bold text-leetcode-easy",children:t?.stats?.easy||0}),e.jsxs("div",{className:"text-[10px] text-text-muted mt-1",children:[((t?.stats?.easy||0)/(t?.stats?.total||1)*100).toFixed(0),"% of total"]})]}),e.jsxs("div",{className:"bg-leetcode-medium/10 border border-leetcode-medium/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Medium"}),e.jsx("div",{className:"text-xl font-bold text-leetcode-medium",children:t?.stats?.medium||0}),e.jsxs("div",{className:"text-[10px] text-text-muted mt-1",children:[((t?.stats?.medium||0)/(t?.stats?.total||1)*100).toFixed(0),"% of total"]})]}),e.jsxs("div",{className:"bg-leetcode-hard/10 border border-leetcode-hard/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Hard"}),e.jsx("div",{className:"text-xl font-bold text-leetcode-hard",children:t?.stats?.hard||0}),e.jsxs("div",{className:"text-[10px] text-text-muted mt-1",children:[((t?.stats?.hard||0)/(t?.stats?.total||1)*100).toFixed(0),"% of total"]})]})]}),x.category==="Weekly Consistency"&&e.jsxs("div",{className:"bg-primary/10 border border-primary/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-primary mb-3",children:"üìä Weekly Breakdown"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-text-muted",children:"Target: 5+ days/week"}),e.jsx("span",{className:"text-xs font-bold text-primary",children:"Current: Check your calendar"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-text-muted",children:["Streak: ",t?.stats?.streak||0," days"]}),e.jsx("span",{className:"text-xs font-bold text-accent",children:"üî• Keep it going!"})]})]})]}),x.category==="Best Solving Days"&&e.jsxs("div",{className:"bg-accent/10 border border-accent/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-accent mb-3",children:"üìÖ Optimize Your Schedule"}),e.jsx("p",{className:"text-xs text-text-muted mb-3",children:"You're most productive at a certain time. Block this time for deep work and problem-solving practice."}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].slice(0,7).map((u,v)=>e.jsxs("div",{className:"bg-surface rounded p-2 text-center border border-surfaceHover",children:[e.jsx("div",{className:"text-[10px] font-semibold text-text-muted",children:u}),e.jsx("div",{className:"text-xs mt-1 h-6 flex items-center justify-center",children:v===new Date().getDay()?"‚óè":"‚óã"})]},v))})]}),x.category==="Recent Activity"&&e.jsxs("div",{className:"bg-leetcode-medium/10 border border-leetcode-medium/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-leetcode-medium mb-3",children:"üéØ Recent Submissions"}),t?.recentSubmissions&&t.recentSubmissions.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Last 7 days:"}),e.jsxs("span",{className:"font-bold",children:[t.recentSubmissions.filter(u=>{const v=new Date(u.timestamp*1e3),H=new Date(Date.now()-10080*60*1e3);return v>H}).length," submissions"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Acceptance rate:"}),e.jsxs("span",{className:"font-bold",children:[(t.recentSubmissions.filter(u=>u.statusDisplay==="Accepted").length/t.recentSubmissions.length*100).toFixed(1),"%"]})]})]}):e.jsx("p",{className:"text-xs text-text-muted",children:"No recent activity yet. Start solving problems!"})]}),x.category==="Achievement Level"&&e.jsxs("div",{className:"bg-accent/10 border border-accent/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-accent mb-3",children:"üéñÔ∏è Progress Metrics"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-text-muted",children:"Total Solved:"}),e.jsx("span",{className:"text-sm font-bold text-accent",children:t?.stats?.total||0})]}),e.jsx("div",{className:"w-full bg-surfaceHover rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-accent to-primary h-full transition-all",style:{width:`${Math.min((t?.stats?.total||0)/1e3*100,100)}%`}})}),e.jsxs("div",{className:"flex justify-between text-[10px] text-text-muted",children:[e.jsx("span",{children:"0"}),e.jsx("span",{children:"1000 (Master)"})]})]})]}),x.type==="suggestion"&&e.jsxs("div",{className:"bg-primary/10 border border-primary/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-primary mb-2",children:"üí° Actionable Tips"}),e.jsxs("ul",{className:"text-xs text-text-muted space-y-1.5",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚úì"}),e.jsx("span",{children:"Set a daily goal: Complete at least 1 problem every day"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚úì"}),e.jsx("span",{children:"Use the problem queue to track what to solve next"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚úì"}),e.jsx("span",{children:"Review solutions before moving to the next problem"})]})]})]}),x.type==="achievement"&&e.jsxs("div",{className:"bg-accent/10 border border-accent/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-accent mb-2",children:"üéâ Next Steps"}),e.jsxs("ul",{className:"text-xs text-text-muted space-y-1.5",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚Üí"}),e.jsx("span",{children:"Maintain this momentum and consistency"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚Üí"}),e.jsx("span",{children:"Challenge yourself with harder problems"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚Üí"}),e.jsx("span",{children:"Share your progress with friends for motivation"})]})]})]}),e.jsx("button",{onClick:()=>h(!1),className:"w-full py-3 bg-primary hover:bg-primaryHover text-inverted rounded-xl font-semibold transition-colors",children:"Close"})]})})]})}function Ct({submissionCalendar:t}){const[s,l]=y.useState("bar");if(!t)return e.jsxs("div",{className:"text-center py-8 text-text-muted",children:[e.jsx("span",{className:"text-3xl mb-2 block",children:"üìä"}),e.jsx("p",{className:"text-sm",children:"No data available"})]});const a=(()=>{const d=[],m=new Date;for(let c=29;c>=0;c--){const n=new Date(m);n.setDate(m.getDate()-c);const g=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate())),u=Math.floor(g.getTime()/1e3).toString(),v=parseInt(t[u])||0;d.push({date:n,label:n.getDate().toString(),count:v,isToday:c===0})}return d})(),i=Math.max(...a.map(d=>d.count),1),o=320,h=120,x={top:10,right:10,bottom:20,left:25},j=o-x.left-x.right,p=h-x.top-x.bottom,w=j/a.length;return e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-5 rounded-xl border border-surfaceHover shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"üìà"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Progress Trend"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Last 30 days"})]})]}),e.jsxs("div",{className:"flex gap-1 bg-background/50 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>l("bar"),className:`px-2 py-1 text-[10px] font-semibold rounded transition-all ${s==="bar"?"bg-primary text-white":"text-text-muted hover:text-text-main"}`,children:"Bar"}),e.jsx("button",{onClick:()=>l("line"),className:`px-2 py-1 text-[10px] font-semibold rounded transition-all ${s==="line"?"bg-primary text-white":"text-text-muted hover:text-text-main"}`,children:"Line"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-6 top-1/2 -translate-y-1/2 -rotate-90 origin-center",children:e.jsx("span",{className:"text-[9px] font-semibold text-text-muted uppercase tracking-wide",children:"Submissions"})}),e.jsxs("svg",{width:o,height:h,className:"overflow-visible",children:[[0,Math.ceil(i/2),i].map((d,m)=>e.jsx("text",{x:x.left-5,y:x.top+p-d/i*p,textAnchor:"end",className:"text-[8px] fill-text-muted",dominantBaseline:"middle",children:d},m)),[0,.5,1].map((d,m)=>e.jsx("line",{x1:x.left,y1:x.top+p*(1-d),x2:x.left+j,y2:x.top+p*(1-d),stroke:"currentColor",strokeWidth:"1",className:"stroke-surfaceHover opacity-30",strokeDasharray:"2,2"},m)),s==="bar"?e.jsx(e.Fragment,{children:a.map((d,m)=>{const c=d.count/i*p,n=x.left+m*w,g=x.top+p-c;return e.jsxs("g",{children:[e.jsx("rect",{x:n+w*.15,y:g,width:w*.7,height:c||2,fill:"currentColor",className:`${d.isToday?"fill-primary":d.count>0?"fill-primary/70":"fill-surfaceHover"} transition-all duration-300 hover:fill-primary`,rx:"2"}),m%5===0&&e.jsx("text",{x:n+w/2,y:h-5,textAnchor:"middle",className:"text-[8px] fill-text-muted",children:d.label})]},m)})}):e.jsxs(e.Fragment,{children:[e.jsx("path",{d:a.map((d,m)=>{const c=x.left+m*w+w/2,n=x.top+p-d.count/i*p;return`${m===0?"M":"L"} ${c} ${n}`}).join(" "),fill:"none",stroke:"currentColor",strokeWidth:"2",className:"stroke-primary"}),a.map((d,m)=>{const c=x.left+m*w+w/2,n=x.top+p-d.count/i*p;return e.jsxs("g",{children:[e.jsx("circle",{cx:c,cy:n,r:d.isToday?4:d.count>0?3:2,fill:"currentColor",className:`${d.isToday?"fill-primary":d.count>0?"fill-primary/70":"fill-surfaceHover"} transition-all duration-300 hover:fill-primary hover:r-5`}),m%5===0&&e.jsx("text",{x:c,y:h-5,textAnchor:"middle",className:"text-[8px] fill-text-muted",children:d.label})]},m)})]})]}),e.jsx("div",{className:"text-center mt-1",children:e.jsx("span",{className:"text-[9px] font-semibold text-text-muted uppercase tracking-wide",children:"Days"})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-bold text-primary",children:a.reduce((d,m)=>d+m.count,0)}),e.jsx("div",{className:"text-[9px] text-text-muted",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-bold text-primary",children:(a.reduce((d,m)=>d+m.count,0)/30).toFixed(1)}),e.jsx("div",{className:"text-[9px] text-text-muted",children:"Avg/Day"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-bold text-primary",children:Math.max(...a.map(d=>d.count))}),e.jsx("div",{className:"text-[9px] text-text-muted",children:"Peak"})]})]})]})}function Dt(){const[t,s]=y.useState(!1),[l,r]=y.useState(""),[a,i]=y.useState(""),[o,h]=y.useState("leetcode-solutions"),[x,j]=y.useState(!1),[p,w]=y.useState(!1),[d,m]=y.useState(""),[c,n]=y.useState(""),[g,u]=y.useState({total:0,pending:0,failed:0}),[v,H]=y.useState([]),[_,T]=y.useState(!1),[U,b]=y.useState(!1);y.useEffect(()=>{N(),D()},[]);const N=async()=>{try{const f=await chrome.storage.local.get(["github_sync_enabled","github_username","github_repo"]);s(f.github_sync_enabled||!1),i(f.github_username||""),h(f.github_repo||"leetcode-solutions")}catch(f){console.error("Error loading settings:",f)}},D=async()=>{try{const f=await chrome.storage.local.get(["synced_problems","failed_syncs","recent_syncs"]),k=f.synced_problems||[],M=f.failed_syncs||[],C=f.recent_syncs||[];u({total:k.length,pending:0,failed:M.length}),H(C.slice(0,5))}catch(f){console.error("Error loading sync stats:",f)}},S=async f=>{try{const k=await fetch("https://api.github.com/user",{headers:{Authorization:`token ${f}`,Accept:"application/vnd.github.v3+json"}});if(!k.ok)throw k.status===401?new Error("Invalid token. Please check and try again."):new Error(`GitHub API error: ${k.status}`);return{valid:!0,username:(await k.json()).login}}catch(k){throw new Error(k.message||"Failed to validate token")}},A=async f=>{if(f.preventDefault(),m(""),n(""),!l||!o){m("Please enter both token and repository name");return}j(!0);try{const{valid:k,username:M}=await S(l);if(!k)throw new Error("Token validation failed");w(!0),await chrome.storage.local.set({github_token:l,github_username:M,github_repo:o,github_sync_enabled:!0}),i(M),s(!0),n(`Connected to github.com/${M}/${o}`),r(""),chrome.runtime.sendMessage({type:"GITHUB_SYNC_ENABLED"})}catch(k){m(k.message)}finally{j(!1),w(!1)}},I=async()=>{try{await chrome.storage.local.set({github_sync_enabled:!1}),s(!1),n("GitHub sync disabled")}catch{m("Failed to disable sync")}},O=async()=>{try{n("Manual sync started... (Feature coming soon)"),chrome.runtime.sendMessage({type:"MANUAL_SYNC_REQUESTED"})}catch{m("Failed to start manual sync")}},W=async()=>{try{n("Retrying failed syncs..."),chrome.runtime.sendMessage({type:"RETRY_FAILED_SYNCS"}),setTimeout(D,2e3)}catch{m("Failed to retry syncs")}};return e.jsxs("div",{className:"flex-1 overflow-y-auto scrollbar-hide p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-surface rounded-full flex items-center justify-center mx-auto mb-3 ring-2 ring-surfaceHover shadow-lg",children:e.jsx(J,{className:"w-8 h-8 text-text-main"})}),e.jsx("h2",{className:"text-xl font-bold text-text-main",children:"GitHub Auto-Sync"}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Automatically push your accepted solutions to GitHub"})]}),d&&e.jsx("div",{className:"p-3 bg-red-500/10 rounded-xl border border-red-500/20 text-sm text-red-400 animate-fade-in",children:d}),c&&e.jsx("div",{className:"p-3 bg-green-500/10 rounded-xl border border-green-500/20 text-sm text-green-400 animate-fade-in",children:c}),t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-green-500/10 rounded-xl border border-green-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-400 text-xl",children:"‚úì"}),e.jsx("span",{className:"text-sm font-semibold text-green-400",children:"Connected"})]}),e.jsx("button",{onClick:I,className:"text-xs text-text-muted hover:text-red-400 transition-colors",children:"Disable"})]}),e.jsxs("p",{className:"text-sm text-text-main",children:["github.com/",e.jsxs("span",{className:"font-mono text-primary",children:[a,"/",o]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-surface rounded-xl p-3 text-center border border-surfaceHover",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:g.total}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Synced"})]}),e.jsxs("div",{className:"bg-surface rounded-xl p-3 text-center border border-surfaceHover",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:g.pending}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Pending"})]}),e.jsxs("div",{className:"bg-surface rounded-xl p-3 text-center border border-surfaceHover",children:[e.jsx("div",{className:"text-2xl font-bold text-red-400",children:g.failed}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Failed"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:O,className:"py-3 bg-surface hover:bg-surfaceHover border border-surfaceHover rounded-xl text-sm font-medium text-text-main transition-all",children:"üì§ Manual Sync"}),g.failed>0&&e.jsx("button",{onClick:W,className:"py-3 bg-red-500/10 hover:bg-red-500/20 border border-red-500/20 rounded-xl text-sm font-medium text-red-400 transition-all",children:"üîÑ Retry Failed"})]}),v.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-text-main mb-2",children:"Recent Syncs"}),e.jsx("div",{className:"space-y-2",children:v.map((f,k)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-surface rounded-xl border border-surfaceHover",children:[e.jsx("span",{className:"text-lg",children:f.status==="success"?"‚úì":"‚úó"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-text-main truncate",children:f.problemTitle}),e.jsx("div",{className:"text-xs text-text-muted",children:new Date(f.timestamp).toLocaleDateString()})]}),e.jsx("span",{className:"text-xs text-text-muted font-mono",children:f.language})]},k))})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>b(!U),className:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-blue-500/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{className:"text-sm font-semibold text-blue-400",children:"Need help getting started?"})]}),U?e.jsx(Ne,{className:"w-4 h-4 text-blue-400"}):e.jsx(ve,{className:"w-4 h-4 text-blue-400"})]}),U&&e.jsxs("div",{className:"px-4 pb-4 space-y-4 text-sm text-text-muted animate-fade-in",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-text-main mb-2 flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4"}),"Step-by-step guide:"]}),e.jsxs("ol",{className:"space-y-2 list-decimal list-inside ml-1",children:[e.jsxs("li",{className:"leading-relaxed",children:[e.jsx("span",{className:"font-medium text-text-main",children:"Generate a GitHub Token"}),e.jsx("br",{}),e.jsx("span",{className:"ml-5 text-xs",children:"Click the link below to create a new token"})]}),e.jsxs("li",{className:"leading-relaxed",children:[e.jsx("span",{className:"font-medium text-text-main",children:"Set Token Permissions"}),e.jsx("br",{}),e.jsxs("span",{className:"ml-5 text-xs",children:["Make sure to check the ",e.jsx("code",{className:"px-1.5 py-0.5 bg-surface rounded text-primary",children:"repo"})," scope (allows creating/updating repos)"]})]}),e.jsxs("li",{className:"leading-relaxed",children:[e.jsx("span",{className:"font-medium text-text-main",children:"Copy Your Token"}),e.jsx("br",{}),e.jsxs("span",{className:"ml-5 text-xs",children:["Copy the generated token (starts with ",e.jsx("code",{className:"px-1.5 py-0.5 bg-surface rounded",children:"ghp_"}),")"]})]}),e.jsxs("li",{className:"leading-relaxed",children:[e.jsx("span",{className:"font-medium text-text-main",children:"Paste Below & Enable"}),e.jsx("br",{}),e.jsx("span",{className:"ml-5 text-xs",children:'Paste your token in the field below and click "Enable GitHub Sync"'})]})]})]}),e.jsxs("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:[e.jsxs("p",{className:"text-xs font-semibold text-yellow-400 mb-1 flex items-center gap-1.5",children:[e.jsx(Z,{className:"w-3.5 h-3.5"}),"Important:"]}),e.jsxs("ul",{className:"text-xs space-y-1 list-disc list-inside ml-1",children:[e.jsx("li",{children:"Save your token securely - you can't view it again on GitHub"}),e.jsx("li",{children:"Never share your token with anyone"}),e.jsx("li",{children:"The token is stored locally in your browser"})]})]}),e.jsxs("a",{href:"https://github.com/settings/tokens/new?scopes=repo&description=LeetStreak%20Auto-Sync",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-lg transition-colors justify-center font-medium",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:"Generate GitHub Token"}),e.jsx(Te,{className:"w-3 h-3"})]})]})]}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"GitHub Personal Access Token"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:_?"text":"password",value:l,onChange:f=>r(f.target.value),placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",className:"w-full px-4 py-3 bg-surface border border-surfaceHover rounded-xl focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary text-text-main placeholder-text-muted text-sm",disabled:x||p}),e.jsx("button",{type:"button",onClick:()=>T(!_),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-main",children:_?"üëÅÔ∏è":"üëÅÔ∏è‚Äçüó®Ô∏è"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"Repository Name"}),e.jsx("input",{type:"text",value:o,onChange:f=>h(f.target.value),placeholder:"leetcode-solutions",className:"w-full px-4 py-3 bg-surface border border-surfaceHover rounded-xl focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary text-text-main placeholder-text-muted text-sm",disabled:x||p}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Repository will be created if it doesn't exist"})]}),e.jsx("button",{type:"submit",disabled:x||p,className:"w-full py-3 bg-primary hover:bg-primaryHover text-inverted font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-primary/20",children:e.jsx("span",{className:"flex items-center justify-center gap-2",children:x||p?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4 animate-spin"})," Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4"})," Enable GitHub Sync"]})})}),e.jsxs("div",{className:"mt-4 p-4 bg-surface/50 rounded-xl border border-surfaceHover",children:[e.jsx("p",{className:"text-xs font-medium text-text-main mb-2",children:"How it works:"}),e.jsxs("ul",{className:"text-xs text-text-muted space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Captures your code before submission"}),e.jsx("li",{children:'Waits for "Accepted" status'}),e.jsx("li",{children:"Pushes to GitHub with topic-based folders"}),e.jsx("li",{children:"Automatically retries on failure"})]})]})]})]})]})}function Tt(){const[t,s]=y.useState({}),[l,r]=y.useState(!1),[a,i]=y.useState(!1),[o,h]=y.useState(null),[x,j]=y.useState(null),[p,w]=y.useState("streak"),[d,m]=y.useState(null),[c,n]=y.useState(!1),[g,u]=y.useState(""),[v,H]=y.useState(!1),[_,T]=y.useState(""),[U,b]=y.useState(!1),[N,D]=y.useState("dark"),[S,A]=y.useState([]);y.useEffect(()=>{if(typeof chrome>"u"||!chrome.runtime){j("Extension context not available"),r(!1);return}W(),k(),I()},[]);const I=async()=>{try{const $=(await chrome.storage.local.get("unread_notifications")).unread_notifications||[],z=Date.now()-1440*60*1e3,G=$.filter(Q=>Q.timestamp>z);G.length!==$.length&&await chrome.storage.local.set({unread_notifications:G}),G.length>0&&A(G)}catch(F){console.error("Error loading notifications:",F)}},O=async F=>{const $=S.filter(z=>z.id!==F);A($);try{await chrome.storage.local.set({unread_notifications:$})}catch(z){console.error("Error clearing notification:",z)}},W=async()=>{try{const $=(await chrome.storage.local.get("theme")).theme||"dark";D($),document.documentElement.setAttribute("data-theme",$)}catch(F){console.error("Error loading theme:",F)}},f=async()=>{const F=N==="dark"?"light":"dark";D(F),document.documentElement.setAttribute("data-theme",F);try{await chrome.storage.local.set({theme:F})}catch($){console.error("Error saving theme:",$)}},k=async()=>{try{const F=await chrome.storage.local.get("my_leetcode_username");console.log("Setup check result:",F),F.my_leetcode_username?(m(F.my_leetcode_username),await C()):(n(!0),r(!1))}catch(F){console.error("Error checking setup:",F),n(!0),r(!1)}},M=async F=>{if(F.preventDefault(),!g.trim()){T("Please enter your LeetCode username");return}H(!0),T("");try{const $=await chrome.runtime.sendMessage({type:"ADD_FRIEND",username:g.trim()});$.success?(await chrome.storage.local.set({my_leetcode_username:g.trim()}),m(g.trim()),n(!1),await new Promise(z=>setTimeout(z,500)),await C()):T($.error||"Failed to verify username")}catch($){console.error("Error during setup:",$),T("Failed to verify username. Please try again.")}finally{H(!1)}},C=async(F=!1)=>{try{r(!0),F&&i(!0),j(null);const $=await chrome.runtime.sendMessage({type:"FETCH_STATS",forceRefresh:F});if($.success){s($.friends);const z=Object.values($.friends).map(G=>G.lastUpdated);z.length>0&&h(Math.max(...z))}else j($.error||"Failed to fetch data")}catch($){console.error("Error fetching friends:",$),j("Failed to connect to background service")}finally{r(!1),i(!1)}},E=()=>{C(!0)},R=()=>{C(!0)},Y=Object.values(t),L=d?t[d]:null;console.log("myUsername:",d),console.log("friends keys:",Object.keys(t)),console.log("myData found:",L?"yes":"no");const q=L?.stats?.streak||0,B=L!=null;return c?(console.log("Rendering setup mode"),e.jsx("div",{className:"w-[400px] h-[600px] bg-background flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center max-w-sm w-full animate-fade-in mx-auto",children:[e.jsx("div",{className:"w-24 h-24 bg-surface rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg ring-4 ring-surfaceHover",children:e.jsx(ie,{className:"w-12 h-12 text-primary animate-bounce-slow"})}),e.jsx("h1",{className:"text-2xl font-bold text-text-main mb-2 text-center",children:"Welcome to LeetStreak!"}),e.jsx("p",{className:"text-sm text-text-muted mb-8 text-center mx-auto",children:"Enter your LeetCode username to track your coding journey and streaks"}),e.jsxs("form",{onSubmit:M,className:"space-y-4 w-full",children:[e.jsx("div",{className:"relative group w-full",children:e.jsx("input",{type:"text",value:g,onChange:F=>u(F.target.value),placeholder:"Your LeetCode username",disabled:v,className:"w-full px-4 py-4 bg-surface border-2 border-surfaceHover rounded-2xl focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary text-text-main placeholder-text-muted transition-all duration-300 text-center font-medium disabled:opacity-50",autoFocus:!0})}),_&&e.jsx("div",{className:"p-3 bg-red-500/10 rounded-xl border border-red-500/20 text-sm text-red-400 animate-shake text-center w-full",children:_}),e.jsx("button",{type:"submit",disabled:v,className:"w-full py-4 bg-primary hover:bg-primaryHover text-inverted font-bold rounded-2xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-primary/20 active:scale-95",children:e.jsx("span",{className:"flex items-center justify-center gap-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-4 h-4"})," Get Started"]})})})]}),e.jsx("p",{className:"mt-6 text-xs text-text-muted text-center mx-auto",children:"We'll fetch your LeetCode stats and start tracking your progress"})]})})):(console.log("Rendering main app - loading:",l,"error:",x,"hasData:",B),e.jsxs("div",{className:"w-[400px] h-[600px] bg-gradient-to-br from-background via-background to-surface/20 flex flex-col overflow-hidden text-text-main",children:[l?e.jsx(tt,{count:3}):x?e.jsx("div",{className:"flex-1 flex items-center justify-center p-6 animate-fade-in",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Le,{className:"w-16 h-16 text-text-muted mb-3 animate-bounce-slow mx-auto"}),e.jsx("p",{className:"text-red-400 font-semibold mb-2",children:"Oops!"}),e.jsx("p",{className:"text-sm text-text-muted mb-6",children:x}),e.jsx("button",{onClick:()=>C(),className:"px-6 py-2 bg-primary hover:bg-primaryHover text-inverted font-medium rounded-full transition-colors shadow-lg hover:shadow-primary/20",children:"Try Again"})]})}):B?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex border-b border-surfaceHover/50 bg-surface/95 backdrop-blur-md sticky top-0 z-10 shadow-lg",children:[e.jsxs("div",{className:"flex flex-1 gap-0 px-2",children:[e.jsxs("button",{onClick:()=>w("leaderboard"),className:`flex-1 py-3.5 px-2 text-sm font-medium transition-all duration-200 relative group ${p==="leaderboard"?"text-primary":"text-text-muted hover:text-text-main"}`,children:[e.jsx(We,{className:`w-5 h-5 mx-auto mb-1.5 transition-transform duration-200 ${p==="leaderboard"?"scale-110":"group-hover:scale-105"}`}),e.jsx("span",{className:"text-[11px] font-semibold",children:"Friends"}),p==="leaderboard"&&e.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent"})]}),e.jsxs("button",{onClick:()=>w("streak"),className:`flex-1 py-3.5 px-2 text-sm font-medium transition-all duration-200 relative group ${p==="streak"?"text-primary":"text-text-muted hover:text-text-main"}`,children:[e.jsx(Re,{className:`w-5 h-5 mx-auto mb-1.5 transition-transform duration-200 ${p==="streak"?"scale-110":"group-hover:scale-105"}`}),e.jsx("span",{className:"text-[11px] font-semibold",children:"Progress"}),p==="streak"&&e.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent"})]}),e.jsxs("button",{onClick:()=>w("analytics"),className:`flex-1 py-3.5 px-2 text-sm font-medium transition-all duration-200 relative group ${p==="analytics"?"text-primary":"text-text-muted hover:text-text-main"}`,children:[e.jsx(se,{className:`w-5 h-5 mx-auto mb-1.5 transition-transform duration-200 ${p==="analytics"?"scale-110":"group-hover:scale-105"}`}),e.jsx("span",{className:"text-[11px] font-semibold",children:"Analytics"}),p==="analytics"&&e.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent"})]}),e.jsxs("button",{onClick:()=>w("github"),className:`flex-1 py-3.5 px-2 text-sm font-medium transition-all duration-200 relative group ${p==="github"?"text-primary":"text-text-muted hover:text-text-main"}`,children:[e.jsx(J,{className:`w-5 h-5 mx-auto mb-1.5 transition-transform duration-200 ${p==="github"?"scale-110":"group-hover:scale-105"}`}),e.jsx("span",{className:"text-[11px] font-semibold",children:"GitHub"}),p==="github"&&e.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 pr-2",children:[e.jsx("button",{onClick:f,className:"p-2.5 text-text-muted hover:text-primary transition-all duration-200 hover:bg-surfaceHover/50 rounded-lg",title:"Toggle Theme",children:N==="dark"?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),e.jsx("button",{onClick:()=>b(!0),className:"p-2.5 text-text-muted hover:text-primary transition-all duration-200 hover:bg-surfaceHover/50 rounded-lg",title:"Notification Settings",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})]})]}),e.jsx(ht,{isOpen:U,onClose:()=>b(!1)}),e.jsx("div",{className:"flex-1 overflow-hidden bg-background flex flex-col pb-10",children:p==="streak"?B?e.jsx(ut,{friends:[L],currentStreak:q,onRefresh:E,refreshing:a}):e.jsx("div",{className:"flex items-center justify-center h-full p-8 text-center",children:e.jsxs("div",{children:[e.jsx(ae,{className:"w-20 h-20 text-primary mb-4 animate-pulse mx-auto"}),e.jsx("p",{className:"text-text-muted mb-4",children:"Loading your progress..."}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-primary text-inverted rounded-full text-sm font-medium",children:"Refresh"})]})}):p==="analytics"?L?e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-hide",children:[L.submissionCalendar&&e.jsx(Ct,{submissionCalendar:typeof L.submissionCalendar=="string"?JSON.parse(L.submissionCalendar):L.submissionCalendar}),e.jsx(St,{userData:L,friendsData:Y.filter(F=>F.username!==d)})]}):e.jsx("div",{className:"flex items-center justify-center h-full p-8 text-center",children:e.jsxs("div",{children:[e.jsx(se,{className:"w-20 h-20 text-primary mb-4 animate-pulse mx-auto"}),e.jsx("p",{className:"text-text-muted mb-4",children:"Loading analytics data..."}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-primary text-inverted rounded-full text-sm font-medium",children:"Refresh"})]})}):p==="github"?e.jsx(Dt,{}):e.jsxs(e.Fragment,{children:[e.jsx(et,{onFriendAdded:R}),e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide",children:e.jsx(Ze,{friends:Y,myData:L,myUsername:d,onRefresh:E})})]})})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[e.jsx("div",{className:"w-20 h-20 bg-surface rounded-full flex items-center justify-center mb-6 ring-2 ring-surfaceHover",children:e.jsx(ae,{className:"w-16 h-16 text-primary animate-pulse-slow"})}),e.jsx("h3",{className:"text-xl font-bold text-text-main mb-2",children:"Loading Your Data"}),e.jsx("p",{className:"text-sm text-text-muted mb-8 max-w-xs",children:"Fetching your LeetCode stats..."}),e.jsx("button",{onClick:E,className:"px-6 py-3 bg-primary hover:bg-primaryHover text-inverted rounded-2xl font-semibold transition-all shadow-lg hover:shadow-primary/20",children:"Refresh"})]}),e.jsx(pt,{notifications:S,onDismiss:O}),e.jsx(he,{})]}))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",oe):oe();function oe(){const t=document.getElementById("root");t?pe.createRoot(t).render(e.jsx(fe.StrictMode,{children:e.jsx(Tt,{})})):console.error("Root element not found!")}
