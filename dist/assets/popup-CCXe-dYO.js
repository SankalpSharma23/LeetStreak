import{r as f,j as e,R as re,a as ne}from"./globals-DOKgKa6W.js";function oe(t,a,o){if(!t||!a||!o)return 0;const n=typeof t=="string"?JSON.parse(t):t,r=typeof a=="string"?JSON.parse(a):a,l=K(n),i=K(r);if(l.size===0||i.size===0)return 0;const x=new Set;for(const j of l)i.has(j)&&j>=o&&x.add(j);if(x.size===0)return 0;const m=Array.from(x).sort((j,u)=>u.localeCompare(j)),g=new Date,h=g.toISOString().split("T")[0],v=new Date(g);v.setUTCDate(v.getUTCDate()-1);const c=v.toISOString().split("T")[0],d=m[0];if(d!==h&&d!==c)return 0;let s=0,p=new Date(d+"T00:00:00Z");for(let j=0;j<m.length;j++){const u=p.toISOString().split("T")[0];if(m[j]===u)s++,p.setUTCDate(p.getUTCDate()-1);else break}return s}function K(t){const a=new Set;return!t||typeof t!="object"||Object.entries(t).forEach(([o,n])=>{if(n>0){const l=new Date(parseInt(o)*1e3).toISOString().split("T")[0];a.add(l)}}),a}function le(t){if(!t)return console.log("No submission calendar"),!1;console.log("Submission calendar keys sample:",Object.keys(t).slice(-10));const a=new Date,o=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())),n=Math.floor(o.getTime()/1e3).toString();console.log("Today timestamp:",n,"Today date:",o),console.log("Value for today:",t[n]);const r=t[n]&&parseInt(t[n])>0;return console.log("Has today submission:",r),r}function ie(t){if(!t)return null;const a=Object.keys(t).map(o=>parseInt(o)).filter(o=>t[o.toString()]>0).sort((o,n)=>n-o);return a.length===0?null:new Date(a[0]*1e3)}function ce(t){if(!t)return"Never";const o=new Date-t,n=Math.floor(o/(1e3*60*60*24));return n===0?"Today":n===1?"Yesterday":n<7?`${n} days ago`:n<30?`${Math.floor(n/7)} weeks ago`:n<365?`${Math.floor(n/30)} months ago`:`${Math.floor(n/365)} years ago`}function de({friend:t,rank:a,isExpanded:o,onClick:n,isCurrentUser:r,mySubmissionCalendar:l,timeFilter:i="all"}){const[x,m]=f.useState(!1),[g,h]=f.useState(!1),[v,c]=f.useState(!1),[d,s]=f.useState(null),[p,j]=f.useState(0);if(!t||!t.profile||!t.stats)return null;const{profile:u,stats:D,contest:I,badges:P,recentSubmissions:A,submissionCalendar:R,friendshipStartDate:b,contestRanking:y}=t,C=r?D.streak||0:l&&R&&b?oe(l,R,b):0,w=N=>N===1?"ðŸ¥‡":N===2?"ðŸ¥ˆ":N===3?"ðŸ¥‰":`#${N}`,L=(N=0)=>{if(!R)return null;try{const k=R;if(!k||typeof k!="object")return null;const H=new Date,S=new Date(Date.UTC(H.getFullYear(),H.getMonth(),H.getDate())),E=new Date(S.getFullYear(),S.getMonth()-N,1),O=E.getFullYear(),_=E.getMonth(),T=E.toLocaleDateString("en-US",{month:"long"}),G=new Date(O,_,1).getDay(),B=new Date(O,_+1,0).getDate(),M=[];let $=[];for(let F=0;F<G;F++)$.push(null);for(let F=1;F<=B;F++){const z=new Date(O,_,F),Q=new Date(Date.UTC(z.getFullYear(),z.getMonth(),z.getDate())),V=Math.floor(Q.getTime()/1e3).toString(),se=parseInt(k[V])||0,ae=z.toDateString()===H.toDateString();$.push({date:z,day:F,count:se,dateStr:V,isToday:ae}),$.length===7&&(M.push($),$=[])}if($.length>0){for(;$.length<7;)$.push(null);M.push($)}return{monthName:T,year:O,weeks:M}}catch(k){return console.error("Error generating calendar data:",k),null}},U=N=>N===0?0:N<=2?1:N<=4?2:N<=6?3:4,Y=(N,k=!1)=>{const H=U(N),S=["bg-surfaceHover border-surfaceHover","bg-secondary/40 border-secondary/60 shadow-sm","bg-secondary/60 border-secondary/80 shadow","bg-secondary/80 border-secondary shadow-md","bg-secondary border-secondary shadow-lg"];return k?S[H]+" ring-2 ring-primary/80 ring-offset-1 ring-offset-background":S[H]},W=()=>{if(!A||!Array.isArray(A)||A.length===0)return null;const k=[...A].sort((T,G)=>G.timestamp-T.timestamp)[0],H=Date.now(),S=parseInt(k.timestamp)*1e3,E=H-S,O=Math.floor(E/(1e3*60*60)),_=Math.floor(E/(1e3*60*60*24));if(_===0){if(O===0){const T=Math.floor(E/6e4);return T<60?`${T} min${T!==1?"s":""} ago`:`${O} hour ago`}return`${O} hour${O!==1?"s":""} ago`}else{if(_===1)return"Yesterday";if(_<7)return`${_} days ago`;if(_<30){const T=Math.floor(_/7);return`${T} week${T!==1?"s":""} ago`}else{const T=Math.floor(_/30);return`${T} month${T!==1?"s":""} ago`}}};return e.jsxs("div",{onClick:n,className:`relative bg-surface rounded-3xl shadow-md border-2 transition-all duration-300 cursor-pointer hover:shadow-lg hover:scale-[1.01] ${r?"border-accent/30 bg-gradient-to-br from-accent/10 to-surface ring-1 ring-accent/20":a<=3?"border-primary/30 bg-gradient-to-br from-primary/5 to-surface":"border-surfaceHover/50"} ${o?"ring-2 ring-primary/60 shadow-2xl":""}`,children:[t.submissionCalendar&&le(t.submissionCalendar)&&e.jsx("div",{className:"absolute -top-1 -right-1 z-10 bg-secondary text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-lg animate-pulse pointer-events-none",children:"ðŸ”¥ ACTIVE"}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl font-bold min-w-[36px] text-center drop-shadow-sm",children:w(a)}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:u.avatar||"https://via.placeholder.com/40",alt:u.username,className:"w-10 h-10 rounded-full border-2 border-surface shadow-md object-cover"}),a<=3&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-primary rounded-full border-2 border-surface text-inverted text-xs flex items-center justify-center shadow-sm",children:"âœ¨"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-base text-text-main truncate",children:u.username}),r&&e.jsx("span",{className:"px-2 py-0.5 bg-accent text-inverted text-[10px] font-bold rounded-full",children:"YOU"}),e.jsx("a",{href:`https://leetcode.com/${u.username}`,target:"_blank",rel:"noopener noreferrer",onClick:N=>N.stopPropagation(),className:"text-text-muted hover:text-primary transition-colors",title:"View LeetCode Profile",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M13.483 0a1.374 1.374 0 0 0-.961.438L7.116 6.226l-3.854 4.126a5.266 5.266 0 0 0-1.209 2.104 5.35 5.35 0 0 0-.125.513 5.527 5.527 0 0 0 .062 2.362 5.83 5.83 0 0 0 .349 1.017 5.938 5.938 0 0 0 1.271 1.818l4.277 4.193.039.038c2.248 2.165 5.852 2.133 8.063-.074l2.396-2.392c.54-.54.54-1.414.003-1.955a1.378 1.378 0 0 0-1.951-.003l-2.396 2.392a3.021 3.021 0 0 1-4.205.038l-.02-.019-4.276-4.193c-.652-.64-.972-1.469-.948-2.263a2.68 2.68 0 0 1 .066-.523 2.545 2.545 0 0 1 .619-1.164L9.13 8.114c1.058-1.134 3.204-1.27 4.43-.278l3.501 2.831c.593.48 1.461.387 1.939-.207a1.384 1.384 0 0 0-.207-1.943l-3.5-2.831c-.8-.647-1.766-1.045-2.774-1.202l2.015-2.158A1.384 1.384 0 0 0 13.483 0zm-2.866 12.815a1.38 1.38 0 0 0-1.38 1.382 1.38 1.38 0 0 0 1.38 1.382H20.79a1.38 1.38 0 0 0 1.38-1.382 1.38 1.38 0 0 0-1.38-1.382z"})})})]}),u.realName&&e.jsx("p",{className:"text-xs text-text-muted truncate",children:u.realName}),e.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[e.jsx("span",{className:"text-[10px] text-text-muted",children:"ðŸ•’"}),e.jsx("span",{className:"text-[10px] text-text-muted",children:ce(ie(R))})]}),(u.ranking||y?.globalRanking)&&e.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[e.jsx("span",{className:"text-[10px] text-text-muted",children:"ðŸŒ"}),e.jsxs("span",{className:"text-[10px] font-semibold text-primary",children:["Rank #",u.ranking?.toLocaleString()||y?.globalRanking?.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-primary to-primaryHover text-inverted px-3 py-2 rounded-full shadow-lg shadow-primary/20",children:[e.jsx("span",{className:"text-lg",children:"ðŸ”¥"}),e.jsx("span",{className:"text-base font-bold",children:C})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-4 gap-2",children:[e.jsxs("div",{className:"text-center py-2 bg-leetcode-easy/10 rounded-2xl border border-leetcode-easy/20",children:[e.jsx("div",{className:"text-base font-bold text-leetcode-easy",children:D.easy||0}),e.jsx("div",{className:"text-[10px] text-text-muted font-medium",children:"Easy"})]}),e.jsxs("div",{className:"text-center py-2 bg-leetcode-medium/10 rounded-2xl border border-leetcode-medium/20",children:[e.jsx("div",{className:"text-base font-bold text-leetcode-medium",children:D.medium||0}),e.jsx("div",{className:"text-[10px] text-text-muted font-medium",children:"Medium"})]}),e.jsxs("div",{className:"text-center py-2 bg-leetcode-hard/10 rounded-2xl border border-leetcode-hard/20",children:[e.jsx("div",{className:"text-base font-bold text-leetcode-hard",children:D.hard||0}),e.jsx("div",{className:"text-[10px] text-text-muted font-medium",children:"Hard"})]}),e.jsxs("div",{className:"text-center py-2 bg-surfaceHover rounded-2xl border border-surfaceHover",children:[e.jsx("div",{className:"text-base font-bold text-text-main",children:D.total||0}),e.jsx("div",{className:"text-[10px] text-text-muted font-medium",children:i==="week"?"This Week":i==="month"?"This Month":"Total"})]})]}),i!=="all"&&D._filteredByTime&&e.jsx("div",{className:"mt-2 text-center text-[10px] text-text-muted",children:i==="week"?"ðŸ“… Showing problems solved this week (Mon-Sun)":"ðŸ“… Showing problems solved this month"}),(W()||A&&A.length>0)&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{onClick:N=>{N.stopPropagation(),c(!v)},className:"px-2 py-2 bg-primary/10 hover:bg-primary/20 rounded-xl border border-primary/30 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-primary",children:"ðŸ“Š Submissions"}),e.jsx("svg",{className:`w-5 h-5 text-primary transition-transform duration-200 ${v?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),v&&e.jsxs("div",{className:"mt-2 space-y-2 animate-slide-up",children:[W()&&e.jsx("div",{className:"px-2 py-1.5 bg-background/50 rounded-xl border border-surfaceHover",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Last submission:"}),e.jsx("span",{className:"font-semibold text-text-main",children:W()})]})}),A&&A.length>0&&e.jsxs("div",{className:"px-2 py-1.5 bg-background/50 rounded-xl border border-surfaceHover",children:[e.jsxs("div",{onClick:N=>{N.stopPropagation(),h(!g)},className:"flex items-center justify-between cursor-pointer hover:bg-surfaceHover/30 -mx-2 px-2 py-1 rounded-lg transition-colors",children:[e.jsxs("div",{className:"text-xs text-text-muted",children:["Recent Submissions (",A.length,")"]}),e.jsx("svg",{className:`w-4 h-4 text-text-muted transition-transform duration-200 ${g?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto mt-2 animate-slide-up",children:A.slice(0,5).map((N,k)=>e.jsxs("a",{href:`https://leetcode.com/problems/${N.titleSlug||N.title.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}/`,target:"_blank",rel:"noopener noreferrer",onClick:H=>H.stopPropagation(),className:"block text-xs border-l-2 border-surfaceHover hover:border-primary pl-2 py-1 hover:bg-surface rounded transition-all",children:[e.jsx("div",{className:"font-medium text-text-main hover:text-primary transition-colors",children:N.title}),e.jsxs("div",{className:"text-text-muted flex gap-2 mt-1",children:[e.jsx("span",{className:`
                                ${N.statusDisplay==="Accepted"?"text-secondary":"text-leetcode-hard"}
                              `,children:N.statusDisplay}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:N.lang}),N.runtime&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:N.runtime})]})]})]},k))})]})]})]})]}),o&&e.jsxs("div",{className:"border-t border-surfaceHover p-4 bg-surfaceHover/30 space-y-4 animate-slide-up",children:[I&&I.rating>0&&e.jsxs("div",{className:"bg-surface p-3 rounded-xl border border-surfaceHover shadow-sm",children:[e.jsx("h4",{className:"font-semibold text-sm mb-2 text-text-main",children:"Contest Stats"}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-text-muted",children:"Rating:"}),e.jsx("span",{className:"ml-1 font-semibold text-primary",children:I.rating})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-muted",children:"Attended:"}),e.jsx("span",{className:"ml-1 font-semibold text-text-main",children:I.attended})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-muted",children:"Rank:"}),e.jsxs("span",{className:"ml-1 font-semibold text-text-main",children:["#",I.ranking?.toLocaleString()]})]})]})]}),R&&(()=>{const N=L(p);return N?e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-4 rounded-xl border border-surfaceHover shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“…"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm text-text-main",children:"Activity Calendar"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Browse monthly submissions"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-background/60 px-2 py-1.5 rounded-lg border border-surfaceHover/50",children:[e.jsx("span",{className:"text-[9px] text-text-muted mr-1",children:"Less"}),[0,1,2,3,4].map(k=>e.jsx("div",{className:`w-[10px] h-[10px] rounded-[2px] border ${Y(k*2)}`},k)),e.jsx("span",{className:"text-[9px] text-text-muted ml-1",children:"More"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{onClick:k=>{k.stopPropagation(),p<11&&j(p+1)},disabled:p>=11,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 border border-primary/30 disabled:opacity-30 disabled:cursor-not-allowed transition-all group",children:e.jsx("svg",{className:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-bold text-primary",children:[N.monthName," ",N.year]}),e.jsx("div",{className:"text-[10px] text-text-muted",children:(()=>{const k=N.weeks.flat().filter(H=>H&&H.count>0).reduce((H,S)=>H+S.count,0);return`${k} submission${k!==1?"s":""}`})()})]}),e.jsx("button",{onClick:k=>{k.stopPropagation(),p>0&&j(p-1)},disabled:p<=0,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 border border-primary/30 disabled:opacity-30 disabled:cursor-not-allowed transition-all group",children:e.jsx("svg",{className:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"bg-background/70 backdrop-blur-sm rounded-xl p-3 border border-surfaceHover/60",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((k,H)=>e.jsx("div",{className:"text-[9px] text-text-muted text-center font-semibold",children:k},H))}),N.weeks.map((k,H)=>e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:k.map((S,E)=>e.jsx("div",{className:`aspect-square rounded-md flex items-center justify-center text-[9px] font-bold transition-all duration-300 relative group ${S?`${Y(S.count,S.isToday)} cursor-pointer hover:scale-125 hover:shadow-xl hover:z-20 ${d?.dateStr===S.dateStr?"scale-125 shadow-xl z-20":""}`:"bg-transparent"}`,onMouseEnter:()=>S&&s(S),onMouseLeave:()=>s(null),children:S&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`${S.count>0?"text-white font-bold drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]":"text-text-muted font-semibold"}`,children:S.day}),S.isToday&&e.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-1.5 h-1.5 bg-amber-400 rounded-full animate-pulse"})]})},E))},H))]}),d&&e.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gradient-to-br from-surface to-surfaceHover border-2 border-primary/40 rounded-xl px-4 py-3 shadow-2xl z-50 animate-fade-in pointer-events-none backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.isToday&&e.jsx("span",{className:"text-base",children:"â­"}),e.jsx("div",{className:"text-sm font-bold text-primary",children:d.count===0?"No activity":`${d.count} submission${d.count!==1?"s":""}`})]}),e.jsx("div",{className:"text-[11px] text-text-muted",children:d.date.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),d.isToday&&e.jsx("div",{className:"text-[10px] text-amber-400 font-semibold mt-1",children:"Today"})]})]}):null})(),P&&P.length>0&&e.jsxs("div",{className:"bg-surface p-3 rounded-xl border border-surfaceHover shadow-sm",children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2 text-text-main",children:["Badges (",P.length,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[P.slice(0,5).map(N=>e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1.5 bg-primary/10 border border-primary/20 rounded-lg text-xs text-primary hover:bg-primary/20 transition-colors",title:N.displayName,children:[N.icon?e.jsx("img",{src:N.icon,alt:N.displayName,className:"w-5 h-5 object-contain",onError:k=>{k.target.style.display="none",k.target.nextSibling.textContent="ðŸ… "+k.target.nextSibling.textContent}}):e.jsx("span",{children:"ðŸ…"}),e.jsx("span",{className:"max-w-[100px] truncate font-medium",children:N.displayName})]},N.id)),P.length>5&&e.jsxs("span",{className:"px-2 py-1 text-xs text-text-muted",children:["+",P.length-5," more"]})]})]}),!r&&e.jsx("button",{onClick:async N=>{if(N.stopPropagation(),window.confirm(`Remove ${u.username} from friends?`))try{console.log("Sending REMOVE_FRIEND message for:",u.username);const k=await chrome.runtime.sendMessage({type:"REMOVE_FRIEND",username:u.username});console.log("Remove friend response:",k),k&&k.success?setTimeout(()=>{window.location.reload()},100):alert(`Failed to remove friend: ${k?.error||"Unknown error"}`)}catch(k){console.error("Error removing friend:",k),alert("Failed to remove friend. Please try again.")}},className:"w-full py-2 bg-leetcode-hard/10 hover:bg-leetcode-hard/20 text-leetcode-hard font-semibold rounded-xl transition-all duration-300 text-sm border border-leetcode-hard/20 active:scale-95",children:"ðŸ—‘ï¸ Remove Friend"})]})]})}function me({friends:t,myData:a,myUsername:o,onRefresh:n}){const[r,l]=f.useState(null),[i,x]=f.useState("all"),m=s=>{if(!s)return!1;const p=typeof s=="string"?JSON.parse(s):s,j=new Date().toISOString().split("T")[0];for(const[u,D]of Object.entries(p))if(D>0&&new Date(parseInt(u)*1e3).toISOString().split("T")[0]===j)return!0;return!1},g=(s,p)=>{if(!s)return 0;try{const j=typeof s=="string"?JSON.parse(s):s,u=new Date;u.setHours(0,0,0,0);let D;if(p==="week"){D=new Date(u);const A=u.getDay(),R=A===0?6:A-1;D.setDate(u.getDate()-R)}else if(p==="month")D=new Date(u.getFullYear(),u.getMonth(),1);else return 0;D.setHours(0,0,0,0);const I=Math.floor(D.getTime()/1e3);let P=0;for(const[A,R]of Object.entries(j))parseInt(A)>=I&&R>0&&(P+=R);return P}catch(j){return console.error("Error calculating period problems:",j),0}},h=t.filter(s=>s.profile?.username!==o),v=a?[...h,a]:h,c=[...v].sort((s,p)=>{if(i==="all")return(p.stats?.total||0)-(s.stats?.total||0);if(i==="week"){const j=g(s.submissionCalendar,"week");return g(p.submissionCalendar,"week")-j}else if(i==="month"){const j=g(s.submissionCalendar,"month");return g(p.submissionCalendar,"month")-j}return 0}),d=s=>{!s||!s.profile||l(r?.profile?.username===s.profile.username?null:s)};return e.jsxs("div",{className:"bg-background",children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur-sm border-b border-surfaceHover px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>x("all"),className:`flex-1 py-2 px-3 rounded-xl text-xs font-semibold transition-all ${i==="all"?"bg-primary text-inverted shadow-lg":"bg-surface text-text-muted hover:text-text-main"}`,children:"All Time"}),e.jsx("button",{onClick:()=>x("week"),className:`flex-1 py-2 px-3 rounded-xl text-xs font-semibold transition-all ${i==="week"?"bg-primary text-inverted shadow-lg":"bg-surface text-text-muted hover:text-text-main"}`,children:"This Week"}),e.jsx("button",{onClick:()=>x("month"),className:`flex-1 py-2 px-3 rounded-xl text-xs font-semibold transition-all ${i==="month"?"bg-primary text-inverted shadow-lg":"bg-surface text-text-muted hover:text-text-main"}`,children:"This Month"})]}),v.filter(s=>s&&s.submissionCalendar&&m(s.submissionCalendar)).length>0&&e.jsxs("div",{className:"mt-2 px-3 py-1.5 bg-secondary/10 border border-secondary/30 rounded-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-lg animate-bounce",children:"ðŸ”¥"}),e.jsxs("span",{className:"text-xs text-secondary font-semibold",children:[v.filter(s=>s&&s.submissionCalendar&&m(s.submissionCalendar)).length," ",v.filter(s=>s&&s.submissionCalendar&&m(s.submissionCalendar)).length===1?"person":"people"," solving today!"]})]})]}),c.length===0?e.jsx("div",{className:"p-8 text-center text-text-muted animate-fade-in",children:e.jsx("p",{children:"No friends to display"})}):e.jsx("div",{className:"p-4 space-y-2.5 animate-slide-up",children:c.filter(s=>s&&s.profile).map((s,p)=>{s.submissionCalendar&&m(s.submissionCalendar);let j=s.stats;if(i!=="all"){const u=g(s.submissionCalendar,i);j={...s.stats,total:u,_filteredByTime:!0}}return e.jsx("div",{children:e.jsx(de,{friend:{...s,stats:j},rank:p+1,isExpanded:r?.profile?.username===s.profile.username,onClick:()=>d(s),isCurrentUser:o&&s.profile.username===o,mySubmissionCalendar:a?.submissionCalendar,timeFilter:i})},s.profile.username)})})]})}function xe({onFriendAdded:t}){const[a,o]=f.useState(""),[n,r]=f.useState(!1),[l,i]=f.useState(""),[x,m]=f.useState(""),g=async h=>{if(h.preventDefault(),!a.trim()){i("Please enter a username");return}r(!0),i(""),m("");try{const v=await chrome.runtime.sendMessage({type:"ADD_FRIEND",username:a.trim()});v.success?(m(`${a} added successfully!`),o(""),setTimeout(()=>{m(""),t()},1500)):i(v.error||"Failed to add friend")}catch(v){console.error("Error adding friend:",v),i("Failed to add friend. Please try again.")}finally{r(!1)}};return e.jsxs("div",{className:"p-4 bg-surface/50 border-b border-surfaceHover backdrop-blur-sm",children:[e.jsxs("form",{onSubmit:g,className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-muted text-lg group-focus-within:text-primary transition-colors",children:"ðŸ‘¤"}),e.jsx("input",{type:"text",value:a,onChange:h=>o(h.target.value),placeholder:"Add friend...",disabled:n,className:"w-full px-4 py-3 pl-11 bg-background border-2 border-surfaceHover rounded-3xl focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary disabled:opacity-50 transition-all duration-300 text-sm text-text-main placeholder-text-muted shadow-sm hover:border-primary/50"})]}),e.jsx("button",{type:"submit",disabled:n,className:"px-6 py-3 bg-primary hover:bg-primaryHover text-inverted font-bold rounded-3xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-primary/20 active:scale-95 text-sm",children:n?"â³":"âž•"})]}),l&&e.jsxs("div",{className:"mt-2 p-3 bg-red-500/10 rounded-2xl flex items-start gap-2 text-sm shadow-md border border-red-500/20 animate-shake",children:[e.jsx("span",{className:"text-red-400",children:"âš ï¸"}),e.jsx("p",{className:"text-red-400 flex-1",children:l})]}),x&&e.jsxs("div",{className:"mt-2 p-3 bg-secondary/10 rounded-2xl flex items-center gap-2 text-sm shadow-md border border-secondary/20 animate-fade-in",children:[e.jsx("span",{className:"text-secondary",children:"âœ…"}),e.jsx("p",{className:"text-secondary font-medium",children:x})]})]})}function ue({count:t=3}){return e.jsxs("div",{className:"w-[400px] h-[600px] bg-background flex flex-col items-center justify-center",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"loader"})}),e.jsx("h2",{className:"text-xl font-bold text-text-main mb-2 animate-fade-in",children:"Loading LeetStreak"}),e.jsx("p",{className:"text-sm text-text-muted mb-8 animate-fade-in",style:{animationDelay:"0.2s"},children:"Fetching your coding journey..."}),e.jsx("div",{className:"w-64 h-2 bg-surfaceHover rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary via-primaryHover to-primary rounded-full animate-loading-bar"})}),e.jsx("style",{children:`
        .loader {
          width: 40px;
          height: 20px;
          --c:no-repeat radial-gradient(farthest-side, var(--color-primary) 93%, #0000);
          background:
            var(--c) 0    0,
            var(--c) 50%  0;
          background-size: 8px 8px;
          position: relative;
          clip-path: inset(-200% -100% 0 0);
          animation: l6-0 1.5s linear infinite;
        }
        .loader:before {
          content: "";
          position: absolute;
          width: 8px;
          height: 12px;
          background: var(--color-primary);
          left: -16px;
          top: 0;
          animation: 
            l6-1 1.5s linear infinite,
            l6-2 0.5s cubic-bezier(0, 200, 0.8, 200) infinite;
        }
        .loader:after {
          content: "";
          position: absolute;
          inset: 0 0 auto auto;
          width: 8px;
          height: 8px;
          border-radius: 50%;
          background: var(--color-primary); 
          animation: l6-3 1.5s linear infinite;
        }
        @keyframes l6-0 {
          0%, 30%  { background-position: 0 0, 50% 0; }
          33%      { background-position: 0 100%, 50% 0; }
          41%, 63% { background-position: 0 0, 50% 0; }
          66%      { background-position: 0 0, 50% 100%; }
          74%, 100% { background-position: 0 0, 50% 0; }
        }
        @keyframes l6-1 {
          90%  { transform: translateY(0); }
          95%  { transform: translateY(15px); }
          100% { transform: translateY(15px); left: calc(100% - 8px); }
        }
        @keyframes l6-2 {
          100% { top: -0.1px; }
        }
        @keyframes l6-3 {
          0%, 80%, 100% { transform: translate(0); }
          90%           { transform: translate(26px); }
        }
        @keyframes loading-bar {
          0%   { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
        .animate-loading-bar {
          animation: loading-bar 1.5s ease-in-out infinite;
        }
      `})]})}function he({streak:t,onClose:a}){const[o,n]=f.useState(!0);f.useEffect(()=>{const i=setTimeout(()=>{n(!1),setTimeout(a,300)},4e3);return()=>clearTimeout(i)},[a]);const l=(i=>i===7?{emoji:"ðŸ”¥",title:"Week Warrior!",message:"7 days of dedication!"}:i===30?{emoji:"ðŸš€",title:"Month Master!",message:"30 days strong!"}:i===100?{emoji:"ðŸ’¯",title:"Century Club!",message:"100 days of excellence!"}:i===365?{emoji:"ðŸ‘‘",title:"Year Legend!",message:"A full year of coding!"}:{emoji:"â­",title:`${i} Day Streak!`,message:"Keep going!"})(t);return o?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(50)].map((i,x)=>e.jsx("div",{className:"absolute animate-confetti",style:{left:`${Math.random()*100}%`,top:"-10%",animationDelay:`${Math.random()*.5}s`,animationDuration:`${2+Math.random()*2}s`},children:["ðŸŽ‰","â­","ðŸ”¥","ðŸŽŠ","âœ¨","ðŸ’«"][Math.floor(Math.random()*6)]},x))}),e.jsxs("div",{className:"relative bg-gradient-to-br from-primary via-accent to-secondary p-8 rounded-3xl shadow-2xl max-w-sm mx-4 animate-bounce-in text-center",children:[e.jsx("div",{className:"absolute inset-0 bg-surface/10 backdrop-blur-xl rounded-3xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"text-8xl mb-4 animate-pulse-slow",children:l.emoji}),e.jsx("h2",{className:"text-3xl font-black text-white mb-2 drop-shadow-lg",children:l.title}),e.jsx("p",{className:"text-lg text-white/90 mb-4",children:l.message}),e.jsx("div",{className:"text-6xl font-black text-white drop-shadow-2xl",children:t}),e.jsx("p",{className:"text-sm text-white/80 mt-2",children:"days streak"}),e.jsx("button",{onClick:()=>{n(!1),setTimeout(a,300)},className:"mt-6 px-6 py-2 bg-white text-primary font-bold rounded-full hover:scale-105 transition-transform shadow-lg",children:"Awesome! ðŸŽ‰"})]})]})]}):null}const q={DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly"},pe=[{id:"daily_1",type:q.DAILY,title:"Solve 1 problem daily",target:1,icon:"ðŸ“…"},{id:"daily_3",type:q.DAILY,title:"Solve 3 problems daily",target:3,icon:"ðŸ”¥"},{id:"weekly_10",type:q.WEEKLY,title:"Solve 10 problems this week",target:10,icon:"ðŸ“Š"},{id:"weekly_20",type:q.WEEKLY,title:"Solve 20 problems this week",target:20,icon:"ðŸ’ª"},{id:"monthly_50",type:q.MONTHLY,title:"Solve 50 problems this month",target:50,icon:"ðŸŽ¯"},{id:"monthly_100",type:q.MONTHLY,title:"Solve 100 problems this month",target:100,icon:"ðŸš€"}];async function fe(){try{return(await chrome.storage.local.get(["activeGoals"])).activeGoals||[]}catch(t){return console.error("Error getting active goals:",t),[]}}async function J(t){try{await chrome.storage.local.set({activeGoals:t})}catch(a){console.error("Error setting active goals:",a)}}async function X(t,a,o){try{let n=0;const r=new Date;if(t.type===q.DAILY){const l=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate())),i=Math.floor(l.getTime()/1e3).toString(),x=o;n=parseInt(x?.[i])||0,console.log("Daily goal progress:",{todayTimestamp:i,progress:n,calendarValue:x?.[i]})}else if(t.type===q.WEEKLY){const l=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate())),i=l.getUTCDay(),x=i===0?6:i-1,m=new Date(Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()-x)),g=o;for(let h=0;h<7;h++){const v=new Date(Date.UTC(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()+h));if(v>l)break;const c=Math.floor(v.getTime()/1e3).toString();n+=parseInt(g?.[c])||0}console.log("Weekly goal progress:",n)}else if(t.type===q.MONTHLY){const l=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate())),i=new Date(Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),1)),x=o,m=new Date(l.getUTCFullYear(),l.getUTCMonth()+1,0).getDate(),g=l.getUTCDate();for(let h=1;h<=Math.min(m,g);h++){const v=new Date(Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),h)),c=Math.floor(v.getTime()/1e3).toString();n+=parseInt(x?.[c])||0}console.log("Monthly goal progress:",n)}return{progress:n,target:t.target,percentage:Math.min(n/t.target*100,100),completed:n>=t.target}}catch(n){return console.error("Error calculating goal progress:",n),{progress:0,target:t.target,percentage:0,completed:!1}}}function ge({userData:t}){const[a,o]=f.useState([]),[n,r]=f.useState({}),[l,i]=f.useState(!1);f.useEffect(()=>{x()},[]),f.useEffect(()=>{t&&a.length>0&&m()},[t?.stats?.total,t?.submissionCalendar,a]);async function x(){const c=await fe();if(o(c),t&&c.length>0){const d={};for(const s of c)d[s.id]=await X(s,t.stats,t.submissionCalendar);r(d)}}async function m(){const c={};for(const d of a)c[d.id]=await X(d,t.stats,t.submissionCalendar);r(c)}async function g(c){const d=[...a,c];await J(d),o(d),i(!1)}async function h(c){const d=a.filter(s=>s.id!==c);await J(d),o(d)}const v=pe.filter(c=>!a.some(d=>d.id===c.id));return a.length===0&&!l?e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸŽ¯"}),e.jsx("p",{className:"text-text-muted mb-4",children:"No goals set yet"}),e.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-primary hover:bg-primaryHover text-inverted rounded-lg font-semibold text-sm transition-colors",children:"Set Your First Goal"})]}):e.jsxs("div",{className:"space-y-3",children:[a.map(c=>{const d=n[c.id]||{progress:0,target:c.target,percentage:0,completed:!1};return e.jsxs("div",{className:`
              bg-surface border rounded-xl p-4 transition-all duration-300
              ${d.completed?"border-accent/50 bg-accent/5":"border-primary/30"}
            `,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"text-2xl",children:c.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-text-primary text-sm",children:c.title}),e.jsx("p",{className:"text-xs text-text-muted capitalize",children:c.type})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[d.completed&&e.jsx("span",{className:"text-accent text-xl",children:"âœ“"}),e.jsx("button",{onClick:()=>h(c.id),className:"text-text-muted hover:text-red-500 transition-colors",title:"Remove goal",children:"âœ•"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Progress"}),e.jsxs("span",{className:"font-semibold text-text-primary",children:[d.progress," / ",d.target]})]}),e.jsx("div",{className:"h-2 bg-surfaceHover rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${d.completed?"bg-accent":"bg-primary"}`,style:{width:`${d.percentage}%`}})}),d.completed&&e.jsx("p",{className:"text-xs text-accent text-center font-medium mt-2",children:"ðŸŽŠ Goal achieved! Amazing work!"})]})]},c.id)}),l&&v.length>0&&e.jsxs("div",{className:"bg-surfaceHover border border-primary/30 rounded-xl p-4 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-text-primary text-sm",children:"Add New Goal"}),e.jsx("button",{onClick:()=>i(!1),className:"text-text-muted hover:text-text-primary transition-colors",children:"âœ•"})]}),e.jsx("div",{className:"space-y-2",children:v.map(c=>e.jsxs("button",{onClick:()=>g(c),className:"w-full text-left p-3 bg-surface hover:bg-surfaceHover border border-transparent hover:border-primary/30 rounded-lg transition-all duration-200 flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:c.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-text-primary",children:c.title}),e.jsx("p",{className:"text-xs text-text-muted capitalize",children:c.type})]}),e.jsx("span",{className:"text-xs text-primary",children:"Add â†’"})]},c.id))})]}),!l&&v.length>0&&e.jsxs("button",{onClick:()=>i(!0),className:"w-full py-3 border-2 border-dashed border-primary/30 hover:border-primary/50 rounded-xl text-primary hover:bg-primary/5 transition-all duration-200 flex items-center justify-center gap-2 font-semibold text-sm",children:[e.jsx("span",{className:"text-lg",children:"+"}),e.jsx("span",{children:"Add Another Goal"})]}),a.length>0&&v.length===0&&e.jsx("div",{className:"bg-gradient-to-br from-accent/5 to-primary/5 border border-accent/20 rounded-xl p-4 text-center",children:e.jsx("p",{className:"text-xs text-text-muted",children:"ðŸŽ‰ You've added all available goals! Keep crushing them!"})})]})}const be="https://leetcode.com/graphql",ye=`
  query questionOfToday {
    activeDailyCodingChallengeQuestion {
      date
      link
      question {
        questionId
        questionFrontendId
        title
        titleSlug
        difficulty
        likes
        dislikes
        topicTags {
          name
          slug
        }
      }
    }
  }
`;async function ve(){try{const t=await fetch(be,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:ye})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json();if(a.errors)throw console.error("GraphQL errors:",a.errors),new Error(a.errors[0]?.message||"GraphQL query failed");const o=a.data?.activeDailyCodingChallengeQuestion;if(!o)throw new Error("No daily question data received");return{date:o.date,link:`https://leetcode.com${o.link}`,questionId:o.question.questionFrontendId,title:o.question.title,titleSlug:o.question.titleSlug,difficulty:o.question.difficulty,likes:o.question.likes,dislikes:o.question.dislikes,topics:o.question.topicTags.map(n=>n.name)}}catch(t){return console.error("Error fetching daily question:",t),null}}function je(){const[t,a]=f.useState(null),[o,n]=f.useState(!0);f.useEffect(()=>{r()},[]);const r=async()=>{n(!0);const x=await ve();a(x),n(!1)},l=x=>{switch(x?.toLowerCase()){case"easy":return"text-green-400 bg-green-400/10 border-green-400/30";case"medium":return"text-yellow-400 bg-yellow-400/10 border-yellow-400/30";case"hard":return"text-red-400 bg-red-400/10 border-red-400/30";default:return"text-text-muted bg-surface/50 border-surfaceHover"}},i=()=>{t?.link&&chrome.tabs.create({url:t.link})};return o?e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-5 rounded-xl border border-surfaceHover shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“…"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Daily Question"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Loading today's challenge..."})]})]}),e.jsx("div",{className:"relative w-full h-1.5 bg-surfaceHover rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-primary via-primaryHover to-primary rounded-full animate-loading-bar",style:{width:"40%",animation:"loading-slide 1.5s ease-in-out infinite"}})}),e.jsx("style",{children:`
          @keyframes loading-slide {
            0% { left: -40%; }
            100% { left: 100%; }
          }
        `})]}):t?e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-5 rounded-xl border border-surfaceHover shadow-lg hover:shadow-primary/5 transition-all duration-300 group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“…"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Daily Question"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:new Date(t.date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]}),e.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-bold border ${l(t.difficulty)}`,children:t.difficulty})]}),e.jsxs("button",{onClick:i,className:"w-full text-left group-hover:scale-[1.01] transition-transform",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[e.jsxs("span",{className:"text-text-muted font-semibold text-xs",children:["#",t.questionId]}),e.jsx("h4",{className:"font-bold text-sm text-text-main group-hover:text-primary transition-colors flex-1 leading-tight",children:t.title})]}),t.topics&&t.topics.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[t.topics.slice(0,4).map((x,m)=>e.jsx("span",{className:"px-2 py-0.5 bg-primary/10 text-primary text-[9px] font-semibold rounded-full border border-primary/20",children:x},m)),t.topics.length>4&&e.jsxs("span",{className:"px-2 py-0.5 bg-surfaceHover text-text-muted text-[9px] font-semibold rounded-full",children:["+",t.topics.length-4," more"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-text-muted",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"ðŸ‘"}),e.jsx("span",{className:"font-semibold",children:t.likes?.toLocaleString()||0})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"ðŸ‘Ž"}),e.jsx("span",{className:"font-semibold",children:t.dislikes?.toLocaleString()||0})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"text-primary font-bold group-hover:translate-x-1 transition-transform flex items-center gap-1",children:[e.jsx("span",{children:"Solve Now"}),e.jsx("span",{children:"â†’"})]})]})]})]}):e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-5 rounded-xl border border-surfaceHover shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“…"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Daily Question"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Unable to load question"})]})]}),e.jsx("p",{className:"text-xs text-text-muted",children:"Please try again later"})]})}function ee({submissionCalendar:t}){const[a,o]=f.useState("bar");if(!t)return e.jsxs("div",{className:"text-center py-8 text-text-muted",children:[e.jsx("span",{className:"text-3xl mb-2 block",children:"ðŸ“Š"}),e.jsx("p",{className:"text-sm",children:"No data available"})]});const r=(()=>{const c=[],d=new Date;for(let s=29;s>=0;s--){const p=new Date(d);p.setDate(d.getDate()-s);const j=new Date(Date.UTC(p.getFullYear(),p.getMonth(),p.getDate())),u=Math.floor(j.getTime()/1e3).toString(),D=parseInt(t[u])||0;c.push({date:p,label:p.getDate().toString(),count:D,isToday:s===0})}return c})(),l=Math.max(...r.map(c=>c.count),1),i=320,x=120,m={top:10,right:10,bottom:20,left:25},g=i-m.left-m.right,h=x-m.top-m.bottom,v=g/r.length;return e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-5 rounded-xl border border-surfaceHover shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸ“ˆ"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Progress Trend"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Last 30 days"})]})]}),e.jsxs("div",{className:"flex gap-1 bg-background/50 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>o("bar"),className:`px-2 py-1 text-[10px] font-semibold rounded transition-all ${a==="bar"?"bg-primary text-white":"text-text-muted hover:text-text-main"}`,children:"Bar"}),e.jsx("button",{onClick:()=>o("line"),className:`px-2 py-1 text-[10px] font-semibold rounded transition-all ${a==="line"?"bg-primary text-white":"text-text-muted hover:text-text-main"}`,children:"Line"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-6 top-1/2 -translate-y-1/2 -rotate-90 origin-center",children:e.jsx("span",{className:"text-[9px] font-semibold text-text-muted uppercase tracking-wide",children:"Submissions"})}),e.jsxs("svg",{width:i,height:x,className:"overflow-visible",children:[[0,Math.ceil(l/2),l].map((c,d)=>e.jsx("text",{x:m.left-5,y:m.top+h-c/l*h,textAnchor:"end",className:"text-[8px] fill-text-muted",dominantBaseline:"middle",children:c},d)),[0,.5,1].map((c,d)=>e.jsx("line",{x1:m.left,y1:m.top+h*(1-c),x2:m.left+g,y2:m.top+h*(1-c),stroke:"currentColor",strokeWidth:"1",className:"stroke-surfaceHover opacity-30",strokeDasharray:"2,2"},d)),a==="bar"?e.jsx(e.Fragment,{children:r.map((c,d)=>{const s=c.count/l*h,p=m.left+d*v,j=m.top+h-s;return e.jsxs("g",{children:[e.jsx("rect",{x:p+v*.15,y:j,width:v*.7,height:s||2,fill:"currentColor",className:`${c.isToday?"fill-primary":c.count>0?"fill-primary/70":"fill-surfaceHover"} transition-all duration-300 hover:fill-primary`,rx:"2"}),d%5===0&&e.jsx("text",{x:p+v/2,y:x-5,textAnchor:"middle",className:"text-[8px] fill-text-muted",children:c.label})]},d)})}):e.jsxs(e.Fragment,{children:[e.jsx("path",{d:r.map((c,d)=>{const s=m.left+d*v+v/2,p=m.top+h-c.count/l*h;return`${d===0?"M":"L"} ${s} ${p}`}).join(" "),fill:"none",stroke:"currentColor",strokeWidth:"2",className:"stroke-primary"}),r.map((c,d)=>{const s=m.left+d*v+v/2,p=m.top+h-c.count/l*h;return e.jsxs("g",{children:[e.jsx("circle",{cx:s,cy:p,r:c.isToday?4:c.count>0?3:2,fill:"currentColor",className:`${c.isToday?"fill-primary":c.count>0?"fill-primary/70":"fill-surfaceHover"} transition-all duration-300 hover:fill-primary hover:r-5`}),d%5===0&&e.jsx("text",{x:s,y:x-5,textAnchor:"middle",className:"text-[8px] fill-text-muted",children:c.label})]},d)})]})]}),e.jsx("div",{className:"text-center mt-1",children:e.jsx("span",{className:"text-[9px] font-semibold text-text-muted uppercase tracking-wide",children:"Days"})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-bold text-primary",children:r.reduce((c,d)=>c+d.count,0)}),e.jsx("div",{className:"text-[9px] text-text-muted",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-bold text-primary",children:(r.reduce((c,d)=>c+d.count,0)/30).toFixed(1)}),e.jsx("div",{className:"text-[9px] text-text-muted",children:"Avg/Day"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-bold text-primary",children:Math.max(...r.map(c=>c.count))}),e.jsx("div",{className:"text-[9px] text-text-muted",children:"Peak"})]})]})]})}function Ne(){const[t,a]=f.useState([]),[o,n]=f.useState(""),[r,l]=f.useState(!1);f.useEffect(()=>{i()},[]);const i=async()=>{try{const s=await chrome.storage.local.get("problem_queue");a(s.problem_queue||[])}catch(s){console.error("Error loading problems:",s)}},x=async s=>{try{await chrome.storage.local.set({problem_queue:s}),a(s)}catch(p){console.error("Error saving problems:",p)}},m=()=>{if(!o.trim())return;const s={id:Date.now(),title:o.trim(),slug:h(o.trim()),url:c(o.trim()),addedAt:Date.now(),status:"pending",difficulty:"Medium"};x([...t,s]),n(""),l(!1)},g=(s,p)=>{const j=t.map(u=>u.id===s?{...u,status:p}:u);x(j)},h=s=>{if(s.includes("leetcode.com/problems/")){const p=s.match(/problems\/([^/]+)/);return p?p[1]:s}return s.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-")},v=s=>{x(t.filter(p=>p.id!==s))},c=s=>s.startsWith("http")?s:`https://leetcode.com/problems/${s.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-")}/`,d=s=>{chrome.tabs.create({url:s})};return e.jsxs("div",{className:"bg-surface rounded-3xl shadow-xl p-6 border border-surfaceHover transition-all duration-300 hover:shadow-2xl hover:shadow-primary/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xs text-text-main",children:"Problem Queue"}),e.jsx("p",{className:"text-[9px] text-text-muted",children:"Save problems to solve later"})]})]}),e.jsx("button",{onClick:()=>l(!r),className:"px-2.5 py-1 text-[10px] font-semibold bg-primary text-white rounded-md hover:bg-primaryHover transition-all active:scale-95",children:r?"âœ•":"+ Add"})]}),r&&e.jsxs("div",{className:"mb-3 p-2.5 bg-background/50 rounded-lg border border-surfaceHover",children:[e.jsx("input",{type:"text",value:o,onChange:s=>n(s.target.value),onKeyPress:s=>s.key==="Enter"&&m(),placeholder:"Problem name or URL...",className:"w-full px-2.5 py-1.5 text-[10px] bg-surface border border-surfaceHover rounded-md focus:outline-none focus:border-primary text-text-main placeholder-text-muted mb-2",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:m,className:"flex-1 py-1.5 text-[10px] font-semibold bg-primary text-white rounded-md hover:bg-primaryHover transition-all",children:"Add to Queue"}),e.jsx("button",{onClick:()=>{l(!1),n("")},className:"px-3 py-1.5 text-[10px] font-semibold text-text-muted hover:text-text-main bg-surface hover:bg-surfaceHover rounded-md transition-all",children:"Cancel"})]})]}),t.length===0?e.jsxs("div",{className:"text-center py-4 text-text-muted",children:[e.jsx("span",{className:"text-2xl mb-1 block",children:"ðŸ“‹"}),e.jsx("p",{className:"text-[10px]",children:"No problems saved yet"}),e.jsx("p",{className:"text-[9px] mt-0.5",children:'Visit LeetCode problems and click "Add to Queue"'})]}):e.jsx("div",{className:"space-y-1.5 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:t.map(s=>{const p={Easy:"text-leetcode-easy",Medium:"text-leetcode-medium",Hard:"text-leetcode-hard"},j={pending:"â³","in-progress":"ðŸš€",completed:"âœ…"};return e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-background/50 rounded-lg border border-surfaceHover hover:border-primary/40 transition-all group",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx("span",{className:"text-[10px]",children:j[s.status]||"ðŸ“‹"}),e.jsx("div",{className:"text-[10px] font-semibold text-text-main truncate group-hover:text-primary transition-colors",children:s.title})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[8px] text-text-muted",children:[e.jsx("span",{className:`font-semibold ${p[s.difficulty]||"text-text-muted"}`,children:s.difficulty}),s.number&&e.jsxs("span",{children:["#",s.number]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Added ",new Date(s.addedAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[s.status!=="completed"&&e.jsx("button",{onClick:()=>g(s.id||s.slug,s.status==="pending"?"in-progress":"completed"),className:"px-2 py-1 text-[9px] font-semibold text-accent hover:text-accent bg-accent/10 hover:bg-accent/20 rounded transition-all",title:s.status==="pending"?"Start":"Complete",children:s.status==="pending"?"â–¶":"âœ“"}),e.jsx("button",{onClick:()=>d(s.url),className:"px-2 py-1 text-[9px] font-semibold text-primary hover:text-primaryHover bg-primary/10 hover:bg-primary/20 rounded transition-all whitespace-nowrap",title:"Open problem",children:"Open"}),e.jsx("button",{onClick:()=>v(s.id||s.slug),className:"px-1.5 py-1 text-[9px] font-semibold text-red-400 hover:text-red-300 bg-red-400/10 hover:bg-red-400/20 rounded transition-all",title:"Remove",children:"âœ•"})]})]},s.id||s.slug)})}),t.length>0&&e.jsx("div",{className:"mt-2 pt-2 border-t border-surfaceHover",children:e.jsxs("div",{className:"flex justify-between items-center text-[9px] text-text-muted",children:[e.jsxs("span",{children:[t.length," problem",t.length!==1?"s":""," in queue"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{children:["â³ ",t.filter(s=>s.status==="pending").length]}),e.jsxs("span",{children:["ðŸš€ ",t.filter(s=>s.status==="in-progress").length]}),e.jsxs("span",{children:["âœ… ",t.filter(s=>s.status==="completed").length]})]})]})})]})}function we(t){if(!t)return;const{profile:a,stats:o,submissionCalendar:n}=t;let r=`LeetCode Statistics Report

`;r+=`Username,${a.username}
`,r+=`Real Name,${a.realName||"N/A"}
`,r+=`Current Streak,${o.streak||0} days
`,r+=`Total Problems,${o.total||0}
`,r+=`Easy Problems,${o.easy||0}
`,r+=`Medium Problems,${o.medium||0}
`,r+=`Hard Problems,${o.hard||0}
`,r+=`Global Ranking,${a.ranking||"N/A"}

`,r+=`Date,Submissions
`,n&&Object.entries(n).filter(([g,h])=>parseInt(h)>0).sort(([g],[h])=>parseInt(h)-parseInt(g)).slice(0,30).forEach(([g,h])=>{const c=new Date(parseInt(g)*1e3).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"});r+=`${c},${h}
`});const l=new Blob([r],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),x=URL.createObjectURL(l);i.setAttribute("href",x),i.setAttribute("download",`leetcode_stats_${a.username}_${Date.now()}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}function ke(t){if(!t)return;const{profile:a,stats:o,submissionCalendar:n}=t,r=`
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>LeetCode Stats - ${a.username}</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      color: #333;
    }
    .header {
      text-align: center;
      margin-bottom: 40px;
      border-bottom: 3px solid #FF6B35;
      padding-bottom: 20px;
    }
    .header h1 {
      color: #FF6B35;
      margin: 0;
      font-size: 32px;
    }
    .header p {
      color: #666;
      margin: 10px 0 0 0;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin: 30px 0;
    }
    .stat-card {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 12px;
      border-left: 4px solid #FF6B35;
    }
    .stat-card h3 {
      margin: 0 0 10px 0;
      color: #666;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .stat-card .value {
      font-size: 32px;
      font-weight: bold;
      color: #FF6B35;
    }
    .difficulty-section {
      margin: 30px 0;
    }
    .difficulty-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-top: 15px;
    }
    .difficulty-card {
      padding: 15px;
      border-radius: 8px;
      text-align: center;
    }
    .difficulty-card.easy {
      background: #d4edda;
      border: 2px solid #28a745;
    }
    .difficulty-card.medium {
      background: #fff3cd;
      border: 2px solid #ffc107;
    }
    .difficulty-card.hard {
      background: #f8d7da;
      border: 2px solid #dc3545;
    }
    .difficulty-card .value {
      font-size: 28px;
      font-weight: bold;
      margin: 5px 0;
    }
    .difficulty-card.easy .value { color: #28a745; }
    .difficulty-card.medium .value { color: #ffc107; }
    .difficulty-card.hard .value { color: #dc3545; }
    .footer {
      margin-top: 40px;
      text-align: center;
      color: #999;
      font-size: 12px;
      border-top: 1px solid #ddd;
      padding-top: 20px;
    }
    @media print {
      body { margin: 0; }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>ðŸš€ LeetCode Statistics</h1>
    <p><strong>${a.username}</strong>${a.realName?` â€¢ ${a.realName}`:""}</p>
  </div>

  <div class="stats-grid">
    <div class="stat-card">
      <h3>ðŸ”¥ Current Streak</h3>
      <div class="value">${o.streak||0}</div>
      <p style="margin: 5px 0 0 0; color: #666;">days</p>
    </div>
    <div class="stat-card">
      <h3>ðŸ“Š Total Problems</h3>
      <div class="value">${o.total||0}</div>
      <p style="margin: 5px 0 0 0; color: #666;">solved</p>
    </div>
  </div>

  <div class="difficulty-section">
    <h2 style="color: #333; margin-bottom: 15px;">Problem Breakdown</h2>
    <div class="difficulty-grid">
      <div class="difficulty-card easy">
        <h4 style="margin: 0; color: #28a745;">Easy</h4>
        <div class="value">${o.easy||0}</div>
      </div>
      <div class="difficulty-card medium">
        <h4 style="margin: 0; color: #ffc107;">Medium</h4>
        <div class="value">${o.medium||0}</div>
      </div>
      <div class="difficulty-card hard">
        <h4 style="margin: 0; color: #dc3545;">Hard</h4>
        <div class="value">${o.hard||0}</div>
      </div>
    </div>
  </div>

  ${a.ranking?`
  <div class="stat-card" style="margin: 30px 0;">
    <h3>ðŸ† Global Ranking</h3>
    <div class="value">#${a.ranking.toLocaleString()}</div>
  </div>
  `:""}

  <div class="footer">
    <p>Generated by LeetStreak on ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}</p>
    <p>Profile: https://leetcode.com/${a.username}</p>
  </div>
</body>
</html>
  `,l=window.open("","_blank");l.document.write(r),l.document.close(),l.onload=()=>{l.focus(),setTimeout(()=>{l.print()},250)}}function De({friends:t,currentStreak:a,onRefresh:o,refreshing:n}){const[r,l]=f.useState(0),[i,x]=f.useState(null),[m,g]=f.useState(!1),[h,v]=f.useState(new Set),[c,d]=f.useState(!1);if(f.useEffect(()=>{[7,30,100,365].includes(a)&&!h.has(a)&&(g(!0),v(y=>new Set([...y,a])))},[a,h]),f.useEffect(()=>{if(!t||t.length===0)return;const b=t[0];if(!b?.submissionCalendar)return;const y=new Date,C=new Date(Date.UTC(y.getFullYear(),y.getMonth(),y.getDate())),w=Math.floor(C.getTime()/1e3).toString(),L=parseInt(b.submissionCalendar[w])||0;a>0&&L===0?d(!0):d(!1)},[t,a]),!t||t.length===0)return e.jsx("div",{className:"flex items-center justify-center h-full p-8 text-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ“Š"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No data available"}),e.jsx("button",{onClick:o,className:"px-4 py-2 bg-orange-500 text-white rounded-full text-sm",children:"Load Data"})]})});const s=t.length>0?t.reduce((b,y)=>(y.stats?.streak||0)>(b.stats?.streak||0)?y:b):null,p=t.reduce((b,y)=>({easy:b.easy+(y.stats?.easy||0),medium:b.medium+(y.stats?.medium||0),hard:b.hard+(y.stats?.hard||0),total:b.total+(y.stats?.total||0)}),{easy:0,medium:0,hard:0,total:0}),j=t[0],u=j?.submissionCalendar,D=b=>b===0?0:b<=2?1:b<=4?2:b<=6?3:4,P=(()=>{const b=[],y=new Date,C=y.getDay(),w=new Date(y);w.setDate(y.getDate()-C);for(let L=0;L<7;L++){const U=new Date(w);U.setDate(w.getDate()+L);let Y=0;if(u){const W=new Date(Date.UTC(U.getFullYear(),U.getMonth(),U.getDate())),N=Math.floor(W.getTime()/1e3).toString();Y=parseInt(u[N])||0}b.push({label:["S","M","T","W","T","F","S"][L],date:U.getDate(),count:Y,isToday:U.toDateString()===y.toDateString(),isPast:U<y,isFuture:U>y})}return b})(),A=(b=0)=>{if(!u)return null;try{const y=u;if(!y||typeof y!="object")return null;console.log("Calendar data:",y),console.log("Calendar keys sample:",Object.keys(y).slice(0,10));const C=new Date,w=new Date(Date.UTC(C.getFullYear(),C.getMonth(),C.getDate())),L=new Date(w.getFullYear(),w.getMonth()-b,1),U=L.getFullYear(),Y=L.getMonth(),W=L.toLocaleDateString("en-US",{month:"long"}),N=new Date(U,Y,1).getDay(),k=new Date(U,Y+1,0).getDate(),H=[];let S=[];for(let E=0;E<N;E++)S.push(null);for(let E=1;E<=k;E++){const O=new Date(U,Y,E),_=new Date(Date.UTC(O.getFullYear(),O.getMonth(),O.getDate())),T=Math.floor(_.getTime()/1e3).toString(),G=parseInt(y[T])||0,B=O.toDateString()===C.toDateString();(B||G>0)&&console.log("Day "+E+":",{date:O.toISOString(),timestamp:T,count:G,calendarValue:y[T],isToday:B}),S.push({date:O,day:E,count:G,dateStr:T,isToday:B}),S.length===7&&(H.push(S),S=[])}if(S.length>0){for(;S.length<7;)S.push(null);H.push(S)}return{monthName:W,year:U,weeks:H}}catch(y){return console.error("Error generating calendar data:",y),null}},R=(b,y=!1)=>{const C=D(b),w=["bg-surfaceHover border-surfaceHover","bg-secondary/40 border-secondary/60 shadow-sm","bg-secondary/60 border-secondary/80 shadow","bg-secondary/80 border-secondary shadow-md","bg-secondary border-secondary shadow-lg"];return y?w[C]+" ring-2 ring-primary/80 ring-offset-1 ring-offset-background":w[C]};return e.jsxs("div",{className:"h-full overflow-y-auto pb-6 bg-background",children:[m&&e.jsx(he,{streak:a,onClose:()=>g(!1)}),c&&e.jsx("div",{className:"mx-6 mt-6 mb-4 px-4 py-3 bg-gradient-to-r from-amber-500/20 to-orange-500/20 border-2 border-amber-500/40 rounded-xl backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"âš ï¸"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-bold text-sm text-amber-400",children:"Streak at Risk!"}),e.jsx("button",{onClick:()=>d(!1),className:"ml-auto text-text-muted hover:text-text-main text-xs",children:"âœ•"})]}),e.jsxs("p",{className:"text-xs text-text-muted leading-relaxed",children:["You haven't solved any problems today. Your ",e.jsxs("strong",{className:"text-amber-400",children:[a,"-day streak"]})," will break at midnight! ðŸ”¥"]}),e.jsxs("a",{href:"https://leetcode.com/problemset/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 mt-2 text-xs font-semibold text-amber-400 hover:text-amber-300 transition-colors",children:[e.jsx("span",{children:"Solve a problem now"}),e.jsx("span",{children:"â†’"})]})]})]})}),e.jsxs("div",{className:"text-center pt-8 pb-6 animate-fade-in",children:[e.jsx("div",{className:"text-8xl font-black bg-gradient-to-r from-primary via-orange-500 to-red-500 bg-clip-text text-transparent mb-2 drop-shadow-2xl",children:a}),e.jsx("div",{className:"text-xl font-bold text-text-main mb-1",children:"Day Streak ðŸŽ¯"}),e.jsxs("p",{className:"text-sm text-text-muted",children:["You are doing really great",s?`, ${s.profile.username}`:"","!"]}),(j?.profile?.ranking||j?.contestRanking?.globalRanking)&&e.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"ðŸŒ"}),e.jsxs("span",{className:"text-sm font-bold text-primary",children:["Global Rank #",(j.profile.ranking||j.contestRanking.globalRanking).toLocaleString()]})]}),e.jsx("button",{onClick:o,disabled:n,className:"mt-4 px-6 py-2.5 text-sm font-semibold text-inverted bg-primary hover:bg-primaryHover rounded-full transition-all duration-300 disabled:opacity-50 shadow-lg hover:shadow-primary/30 active:scale-95 flex items-center gap-2 mx-auto",children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"inline-block animate-spin",children:"âŸ³"}),e.jsx("span",{children:"Refreshing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"ðŸ”„"}),e.jsx("span",{children:"Refresh Data"})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4",children:[e.jsxs("button",{onClick:()=>we(j),className:"px-4 py-2 text-xs font-semibold text-text-main bg-surface hover:bg-surfaceHover border border-surfaceHover rounded-lg transition-all duration-300 shadow-sm hover:shadow-md active:scale-95 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“„"}),e.jsx("span",{children:"Export CSV"})]}),e.jsxs("button",{onClick:()=>ke(j),className:"px-4 py-2 text-xs font-semibold text-text-main bg-surface hover:bg-surfaceHover border border-surfaceHover rounded-lg transition-all duration-300 shadow-sm hover:shadow-md active:scale-95 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"}),e.jsx("span",{children:"Export PDF"})]})]}),e.jsx("p",{className:"text-xs text-text-muted text-center mt-2",children:"Auto-syncs every 30 minutes"})]}),e.jsx("div",{className:"px-6 mb-6 animate-slide-up",children:e.jsxs("div",{className:"bg-surface rounded-3xl p-5 shadow-xl border border-surfaceHover transition-all duration-300 hover:shadow-2xl hover:shadow-primary/5",children:[e.jsx("h3",{className:"text-xs font-semibold text-text-muted uppercase tracking-wide mb-4 text-center",children:"This Week"}),e.jsx("div",{className:"flex justify-between items-center gap-2 relative",children:P.map((b,y)=>{const C=D(b.count);let w,L;return C===0?(w="bg-surfaceHover",L="text-text-muted"):C===1?(w="bg-secondary/40",L="text-white"):C===2?(w="bg-secondary/60",L="text-white"):C===3?(w="bg-secondary/80",L="text-white"):(w="bg-secondary",L="text-white"),e.jsxs("div",{className:"flex-1 text-center group relative",children:[e.jsx("div",{className:"text-xs text-text-muted font-medium mb-2 group-hover:text-text-main transition-colors",children:b.label}),e.jsx("div",{className:`
                      w-full aspect-square rounded-2xl flex items-center justify-center text-sm font-bold shadow-sm transition-all duration-300 cursor-pointer
                      ${w} ${L}
                      ${b.isToday?"ring-2 ring-primary/80 ring-offset-1 ring-offset-background scale-110":""}
                      ${b.isFuture?"opacity-40":""}
                      hover:scale-110 hover:shadow-lg
                    `,title:`${b.count} submission${b.count!==1?"s":""}`,children:b.count>0?b.count:b.date}),e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-surface border border-primary/40 rounded-lg shadow-xl transition-opacity duration-200 pointer-events-none z-50 whitespace-nowrap",children:[e.jsx("div",{className:"text-xs font-semibold text-primary",children:b.count===0?"No submissions":`${b.count} submission${b.count!==1?"s":""}`}),e.jsx("div",{className:"text-[10px] text-text-muted mt-1",children:new Date(new Date().setDate(new Date().getDate()-new Date().getDay()+y)).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),b.isToday&&e.jsx("div",{className:"text-[10px] text-amber-400 font-semibold mt-1",children:"Today"})]})]},y)})})]})}),e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.1s"},children:e.jsxs("div",{className:"bg-surface rounded-3xl shadow-xl p-6 border border-surfaceHover transition-all duration-300 hover:shadow-2xl hover:shadow-primary/5",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-muted mb-4 text-center",children:"Your Stats ðŸ“Š"}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"text-center py-3 bg-leetcode-easy/10 rounded-2xl shadow-sm border border-leetcode-easy/20 hover:bg-leetcode-easy/20 transition-colors",children:[e.jsx("div",{className:"text-xl font-bold text-leetcode-easy",children:p.easy}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Easy"})]}),e.jsxs("div",{className:"text-center py-3 bg-leetcode-medium/10 rounded-2xl shadow-sm border border-leetcode-medium/20 hover:bg-leetcode-medium/20 transition-colors",children:[e.jsx("div",{className:"text-xl font-bold text-leetcode-medium",children:p.medium}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Medium"})]}),e.jsxs("div",{className:"text-center py-3 bg-leetcode-hard/10 rounded-2xl shadow-sm border border-leetcode-hard/20 hover:bg-leetcode-hard/20 transition-colors",children:[e.jsx("div",{className:"text-xl font-bold text-leetcode-hard",children:p.hard}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Hard"})]}),e.jsxs("div",{className:"text-center py-3 bg-surfaceHover rounded-2xl shadow-sm border border-surfaceHover hover:bg-surfaceHover/80 transition-colors",children:[e.jsx("div",{className:"text-xl font-bold text-text-main",children:p.total}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Total"})]})]})]})}),e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.1s"},children:e.jsx(je,{})}),e.jsxs("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.15s"},children:[e.jsxs("h3",{className:"text-sm font-semibold text-text-muted mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-base",children:"ðŸŽ¯"}),e.jsx("span",{children:"My Goals"})]}),e.jsx(ge,{userData:j})]}),e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.2s"},children:e.jsx(ee,{submissionCalendar:u})}),s&&s.stats.streak>=7&&e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.25s"},children:e.jsx("div",{className:"bg-gradient-to-br from-primary/10 to-surface rounded-3xl p-6 border border-primary/20 shadow-lg transition-all duration-300 hover:shadow-primary/10",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-primaryHover rounded-full flex items-center justify-center shadow-lg shadow-primary/20",children:e.jsx("span",{className:"text-3xl animate-bounce-slow",children:"ðŸ…"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-text-muted mb-1",children:"Earned a Badge"}),e.jsx("div",{className:"text-xl font-bold text-text-main",children:"Challenger ðŸŽ–ï¸"})]})]})})}),u&&(()=>{const b=A(r);return b?e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.3s"},children:e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-4 rounded-xl border border-surfaceHover shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“…"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm text-text-main",children:"Activity Calendar"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Browse monthly submissions"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:o,disabled:n,className:"p-1.5 text-text-muted hover:text-primary rounded-lg transition-all duration-300 disabled:opacity-50 hover:bg-surface",title:"Refresh data",children:n?e.jsx("span",{className:"inline-block animate-spin text-sm",children:"âŸ³"}):e.jsx("span",{className:"text-sm",children:"ðŸ”„"})}),e.jsxs("div",{className:"flex items-center gap-1 bg-background/60 px-2 py-1.5 rounded-lg border border-surfaceHover/50",children:[e.jsx("span",{className:"text-[9px] text-text-muted mr-1",children:"Less"}),[0,1,2,3,4].map(y=>e.jsx("div",{className:`w-[10px] h-[10px] rounded-[2px] border ${R(y*2)}`},y)),e.jsx("span",{className:"text-[9px] text-text-muted ml-1",children:"More"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{onClick:y=>{y.stopPropagation(),r<11&&l(r+1)},disabled:r>=11,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 border border-primary/30 disabled:opacity-30 disabled:cursor-not-allowed transition-all group",children:e.jsx("svg",{className:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-bold text-primary",children:[b.monthName," ",b.year]}),e.jsx("div",{className:"text-[10px] text-text-muted",children:(()=>{const y=b.weeks.flat().filter(C=>C&&C.count>0).reduce((C,w)=>C+w.count,0);return`${y} submission${y!==1?"s":""}`})()})]}),e.jsx("button",{onClick:y=>{y.stopPropagation(),r>0&&l(r-1)},disabled:r<=0,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 border border-primary/30 disabled:opacity-30 disabled:cursor-not-allowed transition-all group",children:e.jsx("svg",{className:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"bg-background/70 backdrop-blur-sm rounded-xl p-3 border border-surfaceHover/60 relative",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((y,C)=>e.jsx("div",{className:"text-[9px] text-text-muted text-center font-semibold",children:y},C))}),b.weeks.map((y,C)=>e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:y.map((w,L)=>{const U=C<2;let Y="left-1/2 transform -translate-x-1/2";return L===0?Y="left-0":L===6&&(Y="right-0"),e.jsx("div",{className:`aspect-square rounded-md flex items-center justify-center text-[9px] font-bold transition-all duration-300 relative group ${w?`${R(w.count,w.isToday)} cursor-pointer hover:scale-125 hover:shadow-xl hover:z-20 ${i?.dateStr===w.dateStr?"scale-125 shadow-xl z-20":""}`:"bg-transparent"}`,onMouseEnter:()=>w&&x(w),onMouseLeave:()=>x(null),children:w&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`${w.count>0?"text-white font-bold drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]":"text-text-muted font-semibold"}`,children:w.day}),w.isToday&&e.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-1.5 h-1.5 bg-amber-400 rounded-full animate-pulse"}),i?.dateStr===w.dateStr&&e.jsxs("div",{className:`absolute ${U?"top-full mt-2":"bottom-full mb-2"} ${Y} bg-gradient-to-br from-surface to-surfaceHover border-2 border-primary/40 rounded-xl px-4 py-3 shadow-2xl z-50 animate-fade-in pointer-events-none backdrop-blur-sm whitespace-nowrap`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[w.isToday&&e.jsx("span",{className:"text-base",children:"â­"}),e.jsx("div",{className:"text-sm font-bold text-primary",children:w.count===0?"No activity":`${w.count} submission${w.count!==1?"s":""}`})]}),e.jsx("div",{className:"text-[11px] text-text-muted",children:w.date.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),w.isToday&&e.jsx("div",{className:"text-[10px] text-amber-400 font-semibold mt-1",children:"Today"})]})]})},L)})},C))]})]})}):null})(),t.length>0&&e.jsxs("div",{className:"mx-6 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-muted mb-3",children:"Recent Activity ðŸŽ¯"}),e.jsx("div",{className:"space-y-3",children:t.slice(0,3).filter(b=>b&&b.profile&&b.stats).map((b,y)=>e.jsx("div",{className:"bg-surface rounded-3xl p-4 shadow-md border border-surfaceHover transition-all duration-300 hover:shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:b.profile?.avatar||"https://via.placeholder.com/40",alt:b.profile?.username||"User",className:"w-6 h-6 rounded-full shadow-md"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-sm text-text-main",children:b.profile?.username||"Unknown"}),e.jsxs("div",{className:"text-xs text-text-muted",children:[b.stats?.total||0," problems solved"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-primary font-bold bg-primary/10 px-3 py-1 rounded-full border border-primary/20",children:[e.jsx("span",{children:"ðŸ”¥"}),e.jsx("span",{children:b.stats?.streak||0})]})]})},y))})]}),e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.35s"},children:e.jsx(Ne,{})})]})}function Se({isOpen:t,onClose:a}){const[o,n]=f.useState(null),[r,l]=f.useState(!0),[i,x]=f.useState(!1),[m,g]=f.useState(null);f.useEffect(()=>{t&&h()},[t]);const h=async()=>{try{l(!0);const d=await chrome.runtime.sendMessage({type:"GET_NOTIFICATION_STATE"});if(d.success){n(d.state);const s=new Date().toISOString().split("T")[0],p=d.state.mutedUntilUTC&&d.state.mutedUntilUTC>s;x(p),g(d.state.mutedUntilUTC)}}catch(d){console.error("Error loading notification state:",d)}finally{l(!1)}},v=async()=>{try{const d=new Date;d.setUTCDate(d.getUTCDate()+1);const s=d.toISOString().split("T")[0];(await chrome.runtime.sendMessage({type:"MUTE_NOTIFICATIONS",untilUTC:s})).success&&(x(!0),g(s))}catch(d){console.error("Error muting notifications:",d)}},c=async()=>{try{(await chrome.runtime.sendMessage({type:"MUTE_NOTIFICATIONS",untilUTC:null})).success&&(x(!1),g(null))}catch(d){console.error("Error unmuting notifications:",d)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface border border-zinc-700 rounded-lg max-w-md w-full shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-zinc-100",children:"Notification Settings"}),e.jsx("button",{onClick:a,className:"text-zinc-400 hover:text-zinc-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-4 space-y-4",children:r?e.jsx("div",{className:"text-center text-zinc-400 py-8",children:e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-background rounded-lg p-4 border border-zinc-800",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-zinc-400",children:"Status"}),e.jsx("span",{className:`text-sm font-medium ${i?"text-orange-400":"text-green-400"}`,children:i?"ðŸ”• Muted":"ðŸ”” Active"})]}),i&&m&&e.jsxs("p",{className:"text-xs text-zinc-500 mt-2",children:["Muted until ",m," UTC"]})]}),e.jsxs("div",{className:"text-sm text-zinc-400 space-y-2",children:[e.jsx("p",{children:"â€¢ Max 1 notification per friend per day (UTC)"}),e.jsx("p",{children:"â€¢ Notifications for: solved today, milestones (7/30/100 days)"}),e.jsx("p",{children:"â€¢ Batched notifications sent after sync"})]}),e.jsx("div",{className:"flex gap-2",children:i?e.jsx("button",{onClick:c,className:"flex-1 bg-green-500/20 hover:bg-green-500/30 text-green-400 border border-green-500/50 rounded-lg px-4 py-2 font-medium transition-colors",children:"Unmute Notifications"}):e.jsx("button",{onClick:v,className:"flex-1 bg-orange-500/20 hover:bg-orange-500/30 text-orange-400 border border-orange-500/50 rounded-lg px-4 py-2 font-medium transition-colors",children:"Mute Until Tomorrow"})}),o?.lastNotified&&Object.keys(o.lastNotified).length>0&&e.jsxs("div",{className:"border-t border-zinc-700 pt-4 mt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-zinc-300 mb-2",children:"Recent Notifications"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:Object.entries(o.lastNotified).map(([d,s])=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-zinc-400",children:d}),e.jsx("span",{className:"text-zinc-500",children:s})]},d))})]})]})}),e.jsx("div",{className:"p-4 border-t border-zinc-700 bg-background/50",children:e.jsx("button",{onClick:a,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-zinc-100 rounded-lg px-4 py-2 font-medium transition-colors",children:"Close"})})]})}):null}function Ce({notifications:t,onDismiss:a}){const[o,n]=f.useState(!1);f.useEffect(()=>{t&&t.length>0?n(!0):n(!1)},[t]);const r=()=>{n(!1),setTimeout(()=>{t&&t.length>0&&a(t[0].id)},300)};if(!o||!t||t.length===0)return null;const l=t[0],i=t.length;return e.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 animate-slide-down",children:e.jsx("div",{className:"bg-gradient-to-r from-primary/90 to-primaryHover/90 backdrop-blur-md border border-primary/40 rounded-2xl shadow-2xl p-4 min-w-[320px] max-w-[360px]",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("span",{className:"text-3xl",children:[l.type==="solved_today"&&"ðŸŽ¯",l.type==="milestone"&&"ðŸ”¥",l.type==="streak_at_risk"&&"âš ï¸"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm text-white mb-1",children:l.username}),e.jsx("div",{className:"text-xs text-white/90",children:l.message}),i>1&&e.jsxs("div",{className:"text-[10px] text-white/70 mt-2",children:[i-1," more notification",i-1>1?"s":""]})]}),e.jsx("button",{onClick:r,className:"text-white/80 hover:text-white text-lg font-bold leading-none transition-colors",children:"âœ•"})]})})})}function Te(t){const a=[];if(!t||!t.stats)return a;const{stats:o,submissionCalendar:n,recentSubmissions:r}=t,l=Me(o);l&&a.push(l);const i=$e(n);i&&a.push(i);const x=Le(n);x&&a.push(x);const m=He(r);m&&a.push(m);const g=Ee(o);return g&&a.push(g),a}function Me(t){const{easy:a=0,medium:o=0,hard:n=0,total:r=0}=t;if(r===0)return null;const l=a/r*100,i=o/r*100,x=n/r*100;let m,g,h;return x>30?(m=`You're a challenge seeker! ${x.toFixed(0)}% of your solutions are Hard problems. ðŸ’ª`,g="ðŸ”¥",h="achievement"):i>50?(m=`Balanced approach! You focus on Medium problems (${i.toFixed(0)}%). Keep pushing! ðŸ“ˆ`,g="âš–ï¸",h="neutral"):l>60&&(m="Strong foundation with Easy problems! Ready to tackle more Medium challenges? ðŸŽ¯",g="ðŸ’¡",h="suggestion"),{message:m,icon:g,type:h,category:"Difficulty Preference"}}function $e(t){if(!t)return null;try{const a=typeof t=="string"?JSON.parse(t):t,o=new Date;o.setHours(0,0,0,0);let n=0;for(let x=0;x<7;x++){const m=new Date(o);m.setDate(m.getDate()-x);const g=Math.floor(m.getTime()/1e3).toString();a[g]>0&&n++}let r,l,i;return n===7?(r="Perfect week! You solved problems every day for 7 days straight! ðŸŒŸ",l="ðŸŽ‰",i="achievement"):n>=5?(r=`Great consistency! ${n} active days this week. Keep it up! âš¡`,l="â­",i="achievement"):n>=3?(r=`${n} days active this week. Try to maintain regular practice! ðŸ’ª`,l="ðŸ“Š",i="neutral"):(r=`Only ${n} active days this week. Let's get back on track! ðŸŽ¯`,l="ðŸ’¡",i="suggestion"),{message:r,icon:l,type:i,category:"Weekly Consistency"}}catch{return null}}function Le(t){if(!t)return null;try{const a=typeof t=="string"?JSON.parse(t):t,o=Array(7).fill(0),n=new Date;n.setHours(0,0,0,0);for(let m=0;m<30;m++){const g=new Date(n);g.setDate(g.getDate()-m);const h=Math.floor(g.getTime()/1e3).toString();if(a[h]>0){const v=g.getDay();o[v]++}}const r=Math.max(...o);if(r===0)return null;const l=o.indexOf(r),i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return{message:`Your most productive day is ${i[l]}! You've been most active on ${i[l]}s. ðŸ“…`,icon:"ðŸ“ˆ",type:"neutral",category:"Best Solving Days"}}catch{return null}}function He(t){if(!t||t.length===0)return null;const a=new Date;a.setHours(0,0,0,0);const o=new Date(a);o.setDate(a.getDate()-3);const n=t.filter(x=>new Date(x.timestamp*1e3)>=o).length;let r,l,i;return n>=5?(r=`On fire! ${n} submissions in the last 3 days! ðŸ”¥`,l="ðŸš€",i="achievement"):n>=2?(r=`Good momentum with ${n} recent submissions! Keep going! ðŸ’ª`,l="âš¡",i="neutral"):n===1?(r="Getting started! Let's build that momentum! ðŸŽ¯",l="ðŸ’¡",i="suggestion"):(r="Time to get coding! Start with an easy problem to warm up! ðŸŒŸ",l="ðŸ’¡",i="suggestion"),{message:r,icon:l,type:i,category:"Recent Activity"}}function Ee(t){const{easy:a=0,medium:o=0,hard:n=0,total:r=0}=t;if(r===0)return null;let l,i,x;return r>=1e3?(l=`LeetCode Master! Over ${r} problems solved! You're in the elite club! ðŸ‘‘`,i="ðŸ‘‘",x="achievement"):r>=500?(l="Halfway to 1000! Keep grinding, you're doing amazing! ðŸŽ¯",i="ðŸŽ–ï¸",x="achievement"):r>=100?(l=`Century club member! ${r} problems solved and counting! ðŸ’¯`,i="ðŸ’¯",x="achievement"):r>=50?(l=`Great progress! ${r} problems down. Next milestone: 100! ðŸ“Š`,i="â­",x="neutral"):(l=`Building momentum! ${r} problems solved. Keep going! ðŸš€`,i="ðŸŒ±",x="neutral"),{message:l,icon:i,type:x,category:"Achievement Level"}}function Fe(t=[]){if(!t||t.length===0)return{topics:[],totalAttempts:0};const a=new Map;return t.forEach(n=>{const r=n.title||"Unknown",l=n.statusDisplay||"";a.has(r)||a.set(r,{title:r,attempts:0,accepted:0,difficulty:te()});const i=a.get(r);i.attempts++,l==="Accepted"&&i.accepted++}),{topics:Array.from(a.values()).map(n=>({...n,successRate:n.attempts>0?(n.accepted/n.attempts*100).toFixed(1):"0"})).sort((n,r)=>r.attempts-n.attempts).slice(0,10),totalAttempts:t.length}}function Ae(t=[]){if(!t||t.length===0)return{totalAttempts:0,accepted:0,successRate:0,byDifficulty:{easy:{accepted:0,total:0},medium:{accepted:0,total:0},hard:{accepted:0,total:0}}};const a={totalAttempts:t.length,accepted:0,byDifficulty:{easy:{accepted:0,total:0},medium:{accepted:0,total:0},hard:{accepted:0,total:0}}};return t.forEach(o=>{const n=o.statusDisplay==="Accepted";n&&a.accepted++;const r=te(o.title||"").toLowerCase();a.byDifficulty[r]&&(a.byDifficulty[r].total++,n&&a.byDifficulty[r].accepted++)}),a.successRate=a.totalAttempts>0?(a.accepted/a.totalAttempts*100).toFixed(1):0,a}function Ue(t,a=[]){if(!t||a.length===0)return null;const o=t.stats||{total:0,easy:0,medium:0,hard:0},n=a.reduce((i,x)=>{const m=x.stats||{total:0,easy:0,medium:0,hard:0};return{total:i.total+m.total,easy:i.easy+m.easy,medium:i.medium+m.medium,hard:i.hard+m.hard,streak:i.streak+(x.streak||0)}},{total:0,easy:0,medium:0,hard:0,streak:0}),r=a.length,l={total:Math.round(n.total/r),easy:Math.round(n.easy/r),medium:Math.round(n.medium/r),hard:Math.round(n.hard/r),streak:Math.round(n.streak/r)};return{user:o,average:l,comparison:{total:o.total-l.total,easy:o.easy-l.easy,medium:o.medium-l.medium,hard:o.hard-l.hard,streak:(t.streak||0)-l.streak}}}function te(t){return"Medium"}function Ie({userData:t,friendsData:a=[]}){const[o,n]=f.useState([]),[r,l]=f.useState(null),[i,x]=f.useState(!1),[m,g]=f.useState(null),[h,v]=f.useState("insights");if(f.useEffect(()=>{if(t){const u=Te(t);n(u)}},[t]),!t)return e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl mb-3",children:"ðŸ“Š"}),e.jsx("p",{className:"text-text-muted text-sm",children:"No data available"}),e.jsx("p",{className:"text-text-muted text-xs mt-1",children:"Add your LeetCode username to see analytics"})]})});const c=Ae(t.recentSubmissions||[]),d=Fe(t.recentSubmissions||[]),s=a.length>0?Ue(t,a):null,p=(u,D)=>{D.stopPropagation(),g(u),x(!0)},j=async(u,D)=>{D.stopPropagation();const I=`ðŸŽ¯ My LeetCode Insight:

${u.icon} ${u.category}
${u.message}

#LeetCode #CodingJourney`;if(navigator.clipboard)try{await navigator.clipboard.writeText(I),alert("âœ“ Insight copied to clipboard!")}catch(P){console.error("Failed to copy:",P)}};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-1 bg-surface border border-surfaceHover rounded-xl p-1",children:[e.jsx("button",{onClick:()=>v("insights"),className:`flex-1 py-2 px-3 rounded-lg text-xs font-semibold transition-all ${h==="insights"?"bg-primary text-white shadow-md":"text-text-muted hover:text-text-primary hover:bg-surfaceHover"}`,children:"ðŸ’¡ Insights"}),e.jsx("button",{onClick:()=>v("analytics"),className:`flex-1 py-2 px-3 rounded-lg text-xs font-semibold transition-all ${h==="analytics"?"bg-primary text-white shadow-md":"text-text-muted hover:text-text-primary hover:bg-surfaceHover"}`,children:"ðŸ“Š Analytics"}),e.jsx("button",{onClick:()=>v("comparison"),className:`flex-1 py-2 px-3 rounded-lg text-xs font-semibold transition-all ${h==="comparison"?"bg-primary text-white shadow-md":"text-text-muted hover:text-text-primary hover:bg-surfaceHover"}`,children:"ðŸ‘¥ vs Friends"})]}),h==="insights"&&e.jsx(e.Fragment,{children:o&&o.length>0?e.jsxs(e.Fragment,{children:[o.map((u,D)=>e.jsxs("div",{className:`
                    bg-surface border rounded-xl p-4 transition-all duration-300 cursor-pointer
                    ${u.type==="achievement"?"border-accent/40 hover:border-accent/60":""}
                    ${u.type==="neutral"?"border-primary/30 hover:border-primary/50":""}
                    ${u.type==="suggestion"?"border-leetcode-medium/30 hover:border-leetcode-medium/50":""}
                    ${r===D?"ring-2 ring-primary/50 scale-[1.02]":"hover:scale-[1.01]"}
                  `,onClick:()=>l(r===D?null:D),children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:u.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-semibold text-text-muted uppercase tracking-wide",children:u.category}),u.type==="achievement"&&e.jsx("span",{className:"text-xs bg-accent/20 text-accent px-2 py-0.5 rounded-full",children:"Achievement"}),u.type==="suggestion"&&e.jsx("span",{className:"text-xs bg-leetcode-medium/20 text-leetcode-medium px-2 py-0.5 rounded-full",children:"Tip"})]}),e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:u.message})]}),e.jsx("div",{className:`
                      text-text-muted transition-transform
                      ${r===D?"rotate-180":""}
                    `,children:"â–¼"})]}),r===D&&e.jsx("div",{className:"mt-4 pt-4 border-t border-surfaceHover animate-slide-up",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:I=>p(u,I),className:"flex-1 py-2 bg-primary/10 hover:bg-primary/20 text-primary rounded-lg text-xs font-semibold transition-colors",children:"View Details"}),e.jsx("button",{onClick:I=>j(u,I),className:"flex-1 py-2 bg-accent/10 hover:bg-accent/20 text-accent rounded-lg text-xs font-semibold transition-colors",children:"Share"})]})})]},D)),e.jsx("div",{className:"bg-gradient-to-br from-primary/5 to-accent/5 border border-primary/20 rounded-xl p-4 text-center",children:e.jsx("p",{className:"text-xs text-text-muted mb-2",children:"ðŸ’¡ Insights update daily based on your solving patterns"})})]}):e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ“Š"}),e.jsx("p",{className:"text-text-muted",children:"No insights available yet. Keep solving!"})]})}),h==="analytics"&&e.jsxs("div",{className:"space-y-3",children:[c&&e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸŽ¯"}),e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Success Rate"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-surfaceHover rounded-lg p-3",children:[e.jsxs("div",{className:"text-2xl font-bold text-accent",children:[c.successRate,"%"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Overall"})]}),e.jsxs("div",{className:"bg-surfaceHover rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:c.accepted}),e.jsx("div",{className:"text-xs text-text-muted",children:"Accepted"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Easy"}),e.jsx("span",{className:"font-semibold text-leetcode-easy",children:c.byDifficulty.easy.total>0?`${(c.byDifficulty.easy.accepted/c.byDifficulty.easy.total*100).toFixed(0)}%`:"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Medium"}),e.jsx("span",{className:"font-semibold text-leetcode-medium",children:c.byDifficulty.medium.total>0?`${(c.byDifficulty.medium.accepted/c.byDifficulty.medium.total*100).toFixed(0)}%`:"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Hard"}),e.jsx("span",{className:"font-semibold text-leetcode-hard",children:c.byDifficulty.hard.total>0?`${(c.byDifficulty.hard.accepted/c.byDifficulty.hard.total*100).toFixed(0)}%`:"N/A"})]})]})]}),d&&d.topics.length>0&&e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“š"}),e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Recent Activity"})]}),e.jsx("div",{className:"space-y-2",children:d.topics.slice(0,5).map((u,D)=>e.jsxs("div",{className:"bg-surfaceHover rounded-lg p-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("span",{className:"text-xs text-text-primary font-medium line-clamp-1 flex-1",children:u.title}),e.jsxs("span",{className:"text-xs font-bold text-accent shrink-0",children:[u.successRate,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-text-muted",children:[e.jsxs("span",{children:[u.attempts," attempts"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[u.accepted," accepted"]})]})]},D))})]}),!c&&!d&&e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ“Š"}),e.jsx("p",{className:"text-text-muted text-sm",children:"No analytics data available yet"}),e.jsx("p",{className:"text-text-muted text-xs mt-1",children:"Start solving to see your stats!"})]})]}),h==="comparison"&&e.jsx("div",{className:"space-y-3",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ‘¥"}),e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"You vs Friends Average"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Total Problems"}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:s.user.total}),e.jsxs("div",{className:`text-xs font-semibold mt-1 ${s.comparison.total>=0?"text-accent":"text-leetcode-hard"}`,children:[s.comparison.total>=0?"+":"",s.comparison.total," vs avg"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Current Streak"}),e.jsx("div",{className:"text-2xl font-bold text-accent",children:t.streak||0}),e.jsxs("div",{className:`text-xs font-semibold mt-1 ${s.comparison.streak>=0?"text-accent":"text-leetcode-hard"}`,children:[s.comparison.streak>=0?"+":"",s.comparison.streak," vs avg"]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Easy"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-leetcode-easy",children:s.user.easy}),e.jsxs("span",{className:`text-[10px] ${s.comparison.easy>=0?"text-accent":"text-leetcode-hard"}`,children:["(",s.comparison.easy>=0?"+":"",s.comparison.easy,")"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Medium"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-leetcode-medium",children:s.user.medium}),e.jsxs("span",{className:`text-[10px] ${s.comparison.medium>=0?"text-accent":"text-leetcode-hard"}`,children:["(",s.comparison.medium>=0?"+":"",s.comparison.medium,")"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Hard"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-leetcode-hard",children:s.user.hard}),e.jsxs("span",{className:`text-[10px] ${s.comparison.hard>=0?"text-accent":"text-leetcode-hard"}`,children:["(",s.comparison.hard>=0?"+":"",s.comparison.hard,")"]})]})]})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-accent/5 to-primary/5 border border-accent/20 rounded-xl p-4 text-center",children:e.jsx("p",{className:"text-xs text-text-muted",children:s.comparison.total>=0?"ðŸŽ‰ You're ahead of the average! Keep pushing!":"ðŸ’ª Keep grinding! You'll catch up in no time!"})})]}):e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ‘¥"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Add friends to see comparisons"}),e.jsx("p",{className:"text-text-muted text-xs mt-1",children:"Compare your progress with others!"})]})}),i&&m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>x(!1),children:e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-2xl p-6 max-w-md w-full shadow-2xl animate-bounce-in",onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"text-4xl",children:m.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-1",children:m.category}),m.type==="achievement"&&e.jsx("span",{className:"text-xs bg-accent/20 text-accent px-2 py-1 rounded-full",children:"ðŸ† Achievement"}),m.type==="suggestion"&&e.jsx("span",{className:"text-xs bg-leetcode-medium/20 text-leetcode-medium px-2 py-1 rounded-full",children:"ðŸ’¡ Tip"})]}),e.jsx("button",{onClick:()=>x(!1),className:"text-text-muted hover:text-text-primary transition-colors text-xl",children:"âœ•"})]}),e.jsx("div",{className:"bg-surfaceHover rounded-xl p-4 mb-4",children:e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:m.message})}),m.type==="suggestion"&&e.jsxs("div",{className:"bg-primary/10 border border-primary/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-primary mb-2",children:"ðŸ’¡ Quick Tips"}),e.jsxs("ul",{className:"text-xs text-text-muted space-y-1",children:[e.jsx("li",{children:"â€¢ Set aside dedicated time for practice"}),e.jsx("li",{children:"â€¢ Focus on understanding, not just solving"}),e.jsx("li",{children:"â€¢ Review your solutions regularly"})]})]}),m.type==="achievement"&&e.jsxs("div",{className:"bg-accent/10 border border-accent/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-accent mb-2",children:"ðŸŽ‰ Keep it up!"}),e.jsx("p",{className:"text-xs text-text-muted",children:"You're making great progress! Consistency is the key to mastering algorithms."})]}),e.jsx("button",{onClick:()=>x(!1),className:"w-full py-3 bg-primary hover:bg-primaryHover text-inverted rounded-xl font-semibold transition-colors",children:"Got it!"})]})})]})}function Oe(){const[t,a]=f.useState({}),[o,n]=f.useState(!0),[r,l]=f.useState(!1),[i,x]=f.useState(null),[m,g]=f.useState(null),[h,v]=f.useState("streak"),[c,d]=f.useState(null),[s,p]=f.useState(!1),[j,u]=f.useState(""),[D,I]=f.useState(!1),[P,A]=f.useState(""),[R,b]=f.useState(!1),[y,C]=f.useState("dark"),[w,L]=f.useState([]);f.useEffect(()=>{if(typeof chrome>"u"||!chrome.runtime){g("Extension context not available"),n(!1);return}W(),k(),U()},[]);const U=async()=>{try{const $=(await chrome.storage.local.get("unread_notifications")).unread_notifications||[],F=Date.now()-1440*60*1e3,z=$.filter(Q=>Q.timestamp>F);z.length!==$.length&&await chrome.storage.local.set({unread_notifications:z}),z.length>0&&L(z)}catch(M){console.error("Error loading notifications:",M)}},Y=async M=>{const $=w.filter(F=>F.id!==M);L($);try{await chrome.storage.local.set({unread_notifications:$})}catch(F){console.error("Error clearing notification:",F)}},W=async()=>{try{const $=(await chrome.storage.local.get("theme")).theme||"dark";C($),document.documentElement.setAttribute("data-theme",$)}catch(M){console.error("Error loading theme:",M)}},N=async()=>{const M=y==="dark"?"light":"dark";C(M),document.documentElement.setAttribute("data-theme",M);try{await chrome.storage.local.set({theme:M})}catch($){console.error("Error saving theme:",$)}},k=async()=>{try{const M=await chrome.storage.local.get("my_leetcode_username");console.log("Setup check result:",M),M.my_leetcode_username?(d(M.my_leetcode_username),await S()):(p(!0),n(!1))}catch(M){console.error("Error checking setup:",M),p(!0),n(!1)}},H=async M=>{if(M.preventDefault(),!j.trim()){A("Please enter your LeetCode username");return}I(!0),A("");try{const $=await chrome.runtime.sendMessage({type:"ADD_FRIEND",username:j.trim()});$.success?(await chrome.storage.local.set({my_leetcode_username:j.trim()}),d(j.trim()),p(!1),n(!0),await new Promise(F=>setTimeout(F,500)),await S()):A($.error||"Failed to verify username")}catch($){console.error("Error during setup:",$),A("Failed to verify username. Please try again.")}finally{I(!1)}},S=async(M=!1)=>{const $=Date.now();try{M?l(!0):n(!0),g(null);const F=await chrome.runtime.sendMessage({type:"FETCH_STATS",forceRefresh:M});if(F.success){a(F.friends);const z=Object.values(F.friends).map(Q=>Q.lastUpdated);z.length>0&&x(Math.max(...z))}else g(F.error||"Failed to fetch data")}catch(F){console.error("Error fetching friends:",F),g("Failed to connect to background service")}finally{const F=Date.now()-$,z=Math.max(0,3e3-F);setTimeout(()=>{n(!1),l(!1)},z)}},E=()=>{S(!0)},O=()=>{S(!0)},_=Object.values(t),T=c?t[c]:null;console.log("myUsername:",c),console.log("friends keys:",Object.keys(t)),console.log("myData found:",T?"yes":"no");const G=T?.stats?.streak||0,B=T!=null;return s?(console.log("Rendering setup mode"),e.jsx("div",{className:"w-[400px] h-[600px] bg-background flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center max-w-sm w-full animate-fade-in",children:[e.jsx("div",{className:"w-24 h-24 bg-surface rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg ring-4 ring-surfaceHover",children:e.jsx("span",{className:"text-5xl animate-bounce-slow",children:"ðŸš€"})}),e.jsx("h1",{className:"text-2xl font-bold text-text-main mb-2",children:"Welcome to LeetStreak!"}),e.jsx("p",{className:"text-sm text-text-muted mb-8",children:"Enter your LeetCode username to track your coding journey and streaks"}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsx("div",{className:"relative group",children:e.jsx("input",{type:"text",value:j,onChange:M=>u(M.target.value),placeholder:"Your LeetCode username",disabled:D,className:"w-full px-4 py-4 bg-surface border-2 border-surfaceHover rounded-2xl focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary text-text-main placeholder-text-muted transition-all duration-300 text-center font-medium disabled:opacity-50",autoFocus:!0})}),P&&e.jsx("div",{className:"p-3 bg-red-500/10 rounded-xl border border-red-500/20 text-sm text-red-400 animate-shake",children:P}),e.jsx("button",{type:"submit",disabled:D,className:"w-full py-4 bg-primary hover:bg-primaryHover text-inverted font-bold rounded-2xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-primary/20 active:scale-95",children:D?"â³ Verifying...":"âœ¨ Get Started"})]}),e.jsx("p",{className:"mt-6 text-xs text-text-muted",children:"We'll fetch your LeetCode stats and start tracking your progress"})]})})):(console.log("Rendering main app - loading:",o,"error:",m,"hasData:",B),e.jsxs("div",{className:"w-[400px] h-[600px] bg-background flex flex-col overflow-hidden text-text-main",children:[o?e.jsx(ue,{count:3}):m?e.jsx("div",{className:"flex-1 flex items-center justify-center p-6 animate-fade-in",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3 animate-bounce-slow",children:"ðŸ˜•"}),e.jsx("p",{className:"text-red-400 font-semibold mb-2",children:"Oops!"}),e.jsx("p",{className:"text-sm text-text-muted mb-6",children:m}),e.jsx("button",{onClick:()=>S(),className:"px-6 py-2 bg-primary hover:bg-primaryHover text-inverted font-medium rounded-full transition-colors shadow-lg hover:shadow-primary/20",children:"Try Again"})]})}):B?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex border-b border-surfaceHover bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[e.jsxs("div",{className:"flex flex-1 px-4",children:[e.jsxs("button",{onClick:()=>v("streak"),className:`flex-1 py-4 text-xs font-semibold transition-all duration-300 relative ${h==="streak"?"text-primary":"text-text-muted hover:text-text-main"}`,children:["ðŸ”¥ Progress",h==="streak"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary rounded-t-full shadow-[0_-2px_10px_rgba(245,158,11,0.5)]"})]}),e.jsxs("button",{onClick:()=>v("analytics"),className:`flex-1 py-4 text-xs font-semibold transition-all duration-300 relative ${h==="analytics"?"text-primary":"text-text-muted hover:text-text-main"}`,children:["ðŸ“Š Analytics",h==="analytics"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary rounded-t-full shadow-[0_-2px_10px_rgba(245,158,11,0.5)]"})]}),e.jsxs("button",{onClick:()=>v("leaderboard"),className:`flex-1 py-4 text-xs font-semibold transition-all duration-300 relative ${h==="leaderboard"?"text-primary":"text-text-muted hover:text-text-main"}`,children:["ðŸ† Friends",h==="leaderboard"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary rounded-t-full shadow-[0_-2px_10px_rgba(245,158,11,0.5)]"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:N,className:"px-3 py-4 text-text-muted hover:text-primary transition-colors",title:"Toggle Theme",children:y==="dark"?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),e.jsx("button",{onClick:()=>b(!0),className:"px-3 py-4 text-text-muted hover:text-primary transition-colors",title:"Notification Settings",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})]})]}),e.jsx(Se,{isOpen:R,onClose:()=>b(!1)}),e.jsx("div",{className:"flex-1 overflow-hidden bg-background flex flex-col",children:h==="streak"?B?e.jsx(De,{friends:[T],currentStreak:G,onRefresh:E,refreshing:r}):e.jsx("div",{className:"flex items-center justify-center h-full p-8 text-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-5xl mb-4 animate-pulse",children:"ðŸ“Š"}),e.jsx("p",{className:"text-text-muted mb-4",children:"Loading your progress..."}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-primary text-inverted rounded-full text-sm font-medium",children:"Refresh"})]})}):h==="analytics"?T?e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[T.submissionCalendar&&e.jsx(ee,{submissionCalendar:typeof T.submissionCalendar=="string"?JSON.parse(T.submissionCalendar):T.submissionCalendar}),e.jsx(Ie,{userData:T,friendsData:_.filter(M=>M.username!==c)})]}):e.jsx("div",{className:"flex items-center justify-center h-full p-8 text-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-5xl mb-4 animate-pulse",children:"ðŸ“Š"}),e.jsx("p",{className:"text-text-muted mb-4",children:"Loading analytics data..."}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-primary text-inverted rounded-full text-sm font-medium",children:"Refresh"})]})}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{onFriendAdded:O}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx(me,{friends:_,myData:T,myUsername:c,onRefresh:E})})]})})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[e.jsx("div",{className:"w-20 h-20 bg-surface rounded-full flex items-center justify-center mb-6 ring-2 ring-surfaceHover",children:e.jsx("span",{className:"text-4xl animate-pulse-slow",children:"ðŸ“Š"})}),e.jsx("h3",{className:"text-xl font-bold text-text-main mb-2",children:"Loading Your Data"}),e.jsx("p",{className:"text-sm text-text-muted mb-8 max-w-xs",children:"Fetching your LeetCode stats..."}),e.jsx("button",{onClick:E,className:"px-6 py-3 bg-primary hover:bg-primaryHover text-inverted rounded-2xl font-semibold transition-all shadow-lg hover:shadow-primary/20",children:"Refresh"})]}),e.jsx(Ce,{notifications:w,onDismiss:Y})]}))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Z):Z();function Z(){const t=document.getElementById("root");t?re.createRoot(t).render(e.jsx(ne.StrictMode,{children:e.jsx(Oe,{})})):console.error("Root element not found!")}
