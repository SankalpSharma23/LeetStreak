import{c as H,r as p,j as e,F as le,C as Fe,T as ze,G as te,_ as Ue,a as Pe,R as Re,b as Oe}from"./globals-DFR25XRP.js";const qe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],he=H("bell",qe);const Ge=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],pe=H("chart-column",Ge);const Ye=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],We=H("chevron-down",Ye);const Be=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ve=H("chevron-left",Be);const Qe=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ke=H("chevron-up",Qe);const Je=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],oe=H("circle-check",Je);const Ze=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Xe=H("circle-question-mark",Ze);const et=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],tt=H("clock",et);const st=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],at=H("copy",st);const rt=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],nt=H("crown",rt);const ot=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],lt=H("dumbbell",ot);const it=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ue=H("external-link",it);const ct=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]],ve=H("file-chart-column-increasing",ct);const dt=[["path",{d:"M4 12.15V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-3.35",key:"1wthlu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 16-3 3 3 3",key:"331omg"}],["path",{d:"m9 22 3-3-3-3",key:"lsp7cz"}]],mt=H("file-code-corner",dt);const xt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],ut=H("frown",xt);const ht=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],pt=H("key",ht);const ft=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],gt=H("lightbulb",ft);const bt=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],se=H("loader-circle",bt);const yt=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],vt=H("log-out",yt);const jt=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Nt=H("medal",jt);const wt=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],kt=H("moon",wt);const St=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],Ct=H("party-popper",St);const Mt=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Dt=H("refresh-cw",Mt);const Tt=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],ge=H("rocket",Tt);const _t=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ht=H("rotate-ccw",_t);const $t=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Et=H("scale",$t);const At=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Lt=H("shield",At);const It=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],$e=H("sparkles",It);const Ft=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],zt=H("sprout",Ft);const Ut=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],je=H("star",Ut);const Pt=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Rt=H("sun",Pt);const Ot=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ee=H("target",Ot);const qt=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Gt=H("trending-up",qt);const Yt=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ae=H("triangle-alert",Yt);const Wt=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Bt=H("user-plus",Wt);const Vt=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Qt=H("users",Vt);const Kt=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],be=H("x",Kt);const Jt=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ie=H("zap",Jt);function Zt({onFriendAdded:t}){const[s,n]=p.useState(""),[a,r]=p.useState(!1),[i,d]=p.useState(""),[f,m]=p.useState(""),b=async y=>{if(y.preventDefault(),!s.trim()){d("Please enter a username");return}r(!0),d(""),m("");try{const k=await chrome.runtime.sendMessage({type:"ADD_FRIEND",username:s.trim()});k.success?(m(`${s} added successfully!`),n(""),t(),setTimeout(()=>{m("")},1500)):d(k.error||"Failed to add friend")}catch(k){console.error("Error adding friend:",k),d("Failed to add friend. Please try again.")}finally{r(!1)}};return e.jsxs("div",{className:"p-4 bg-surface/50 border-b border-surfaceHover backdrop-blur-sm",children:[e.jsxs("form",{onSubmit:b,className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-text-muted text-lg group-focus-within:text-primary transition-colors",children:"üë§"}),e.jsx("input",{type:"text",value:s,onChange:y=>n(y.target.value),placeholder:"Add friend...",disabled:a,className:"w-full px-4 py-3 pl-11 bg-background border-2 border-surfaceHover rounded-3xl focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary disabled:opacity-50 transition-all duration-300 text-sm text-text-main placeholder-text-muted shadow-sm hover:border-primary/50"})]}),e.jsx("button",{type:"submit",disabled:a,className:"px-6 py-3 bg-primary hover:bg-primaryHover text-inverted font-bold rounded-3xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-primary/20 active:scale-95 text-sm",children:a?e.jsx(se,{className:"w-4 h-4 animate-spin"}):e.jsx(Bt,{className:"w-4 h-4"})})]}),i&&e.jsxs("div",{className:"mt-2 p-3 bg-red-500/10 rounded-2xl flex items-start gap-2 text-sm shadow-md border border-red-500/20 animate-shake",children:[e.jsx(ae,{className:"w-4 h-4 text-red-400"}),e.jsx("p",{className:"text-red-400 flex-1",children:i})]}),f&&e.jsxs("div",{className:"mt-2 p-3 bg-secondary/10 rounded-2xl flex items-center gap-2 text-sm shadow-md border border-secondary/20 animate-fade-in",children:[e.jsx(oe,{className:"w-4 h-4 text-secondary"}),e.jsx("p",{className:"text-secondary font-medium",children:f})]})]})}function Xt(){return e.jsxs("div",{className:"w-[400px] h-[600px] bg-gradient-to-br from-background via-background to-surface/30 flex flex-col items-center justify-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-30",children:[e.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-primary/20 rounded-full blur-3xl animate-float"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-secondary/20 rounded-full blur-3xl animate-float-delayed"})]}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[e.jsx("div",{className:"loader mb-8"}),e.jsx("h2",{className:"text-xl font-bold text-text-main mb-2 animate-fade-in",children:"Loading LeetStreak"}),e.jsx("p",{className:"text-sm text-text-muted animate-fade-in",style:{animationDelay:"0.15s"},children:"Fetching your coding journey..."})]}),e.jsx("style",{children:`
        .loader {
          width: 65px;
          height: 30px;
          position: relative;
        }
        .loader:before {
          content: "";
          position: absolute;
          border-radius: 50px;
          box-shadow: 0 0 0 3px inset var(--color-primary);
          animation: l3 0.75s infinite alternate;
        }
        @keyframes l3 {
          0% {
            inset: 0 35px 0 0;
          }
          50% {
            inset: 0 0 0 0;
          }
          100% {
            inset: 0 0 0 35px;
          }
        }
        @keyframes float {
          0%, 100% { transform: translate(0, 0) scale(1); }
          33% { transform: translate(30px, -30px) scale(1.1); }
          66% { transform: translate(-20px, 20px) scale(0.9); }
        }
        @keyframes float-delayed {
          0%, 100% { transform: translate(0, 0) scale(1); }
          33% { transform: translate(-30px, 30px) scale(0.9); }
          66% { transform: translate(20px, -20px) scale(1.1); }
        }
        .animate-float {
          animation: float 8s ease-in-out infinite;
        }
        .animate-float-delayed {
          animation: float-delayed 8s ease-in-out infinite;
          animation-delay: -4s;
        }
      `})]})}const es=()=>{const t=["üéâ","‚≠ê","üî•","üéä","‚ú®","üí´"];return[...Array(50)].map((s,n)=>({id:n,emoji:t[Math.floor(Math.random()*t.length)],left:Math.random()*100,delay:Math.random()*.5,duration:2+Math.random()*2}))};function ts({streak:t,onClose:s}){const[n,a]=p.useState(!0),r=p.useMemo(()=>es(),[]);p.useEffect(()=>{const f=setTimeout(()=>{a(!1),setTimeout(s,300)},4e3);return()=>clearTimeout(f)},[s]);const d=(f=>f===7?{emoji:"üî•",title:"Week Warrior!",message:"7 days of dedication!"}:f===30?{emoji:"üöÄ",title:"Month Master!",message:"30 days strong!"}:f===100?{emoji:"üíØ",title:"Century Club!",message:"100 days of excellence!"}:f===365?{emoji:"üëë",title:"Year Legend!",message:"A full year of coding!"}:{emoji:"‚≠ê",title:`${f} Day Streak!`,message:"Keep going!"})(t);return n?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:r.map(f=>e.jsx("div",{className:"absolute animate-confetti",style:{left:`${f.left}%`,top:"-10%",animationDelay:`${f.delay}s`,animationDuration:`${f.duration}s`},children:f.emoji},f.id))}),e.jsxs("div",{className:"relative bg-gradient-to-br from-primary via-accent to-secondary p-8 rounded-3xl shadow-2xl max-w-sm mx-4 animate-bounce-in text-center",children:[e.jsx("div",{className:"absolute inset-0 bg-surface/10 backdrop-blur-xl rounded-3xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"text-8xl mb-4 animate-pulse-slow",children:d.emoji}),e.jsx("h2",{className:"text-3xl font-black text-white mb-2 drop-shadow-lg",children:d.title}),e.jsx("p",{className:"text-lg text-white/90 mb-4",children:d.message}),e.jsx("div",{className:"text-6xl font-black text-white drop-shadow-2xl",children:t}),e.jsx("p",{className:"text-sm text-white/80 mt-2",children:"days streak"}),e.jsx("button",{onClick:()=>{a(!1),setTimeout(s,300)},className:"mt-6 px-6 py-2 bg-white text-primary font-bold rounded-full hover:scale-105 transition-transform shadow-lg",children:"Awesome! üéâ"})]})]})]}):null}const Z={DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly"},ss=[{id:"daily_1",type:Z.DAILY,title:"Solve 1 problem daily",target:1,icon:"üìÖ"},{id:"daily_3",type:Z.DAILY,title:"Solve 3 problems daily",target:3,icon:"üî•"},{id:"weekly_10",type:Z.WEEKLY,title:"Solve 10 problems this week",target:10,icon:"üìä"},{id:"weekly_20",type:Z.WEEKLY,title:"Solve 20 problems this week",target:20,icon:"üí™"},{id:"monthly_50",type:Z.MONTHLY,title:"Solve 50 problems this month",target:50,icon:"üéØ"},{id:"monthly_100",type:Z.MONTHLY,title:"Solve 100 problems this month",target:100,icon:"üöÄ"}];async function as(){try{return(await chrome.storage.local.get(["activeGoals"])).activeGoals||[]}catch(t){return console.error("Error getting active goals:",t),[]}}async function Ne(t){try{await chrome.storage.local.set({activeGoals:t})}catch(s){console.error("Error setting active goals:",s)}}async function we(t,s,n){try{let a=0;const r=new Date;if(t.type===Z.DAILY){const i=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate())),d=Math.floor(i.getTime()/1e3).toString(),f=n;a=parseInt(f?.[d])||0,console.log("Daily goal progress:",{todayTimestamp:d,progress:a,calendarValue:f?.[d]})}else if(t.type===Z.WEEKLY){const i=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate())),d=i.getUTCDay(),f=d===0?6:d-1,m=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()-f)),b=n;for(let y=0;y<7;y++){const k=new Date(Date.UTC(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()+y));if(k>i)break;const g=Math.floor(k.getTime()/1e3).toString();a+=parseInt(b?.[g])||0}console.log("Weekly goal progress:",a)}else if(t.type===Z.MONTHLY){const i=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate())),d=n,f=new Date(i.getUTCFullYear(),i.getUTCMonth()+1,0).getDate(),m=i.getUTCDate();for(let b=1;b<=Math.min(f,m);b++){const y=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),b)),k=Math.floor(y.getTime()/1e3).toString();a+=parseInt(d?.[k])||0}console.log("Monthly goal progress:",a)}return{progress:a,target:t.target,percentage:Math.min(a/t.target*100,100),completed:a>=t.target}}catch(a){return console.error("Error calculating goal progress:",a),{progress:0,target:t.target,percentage:0,completed:!1}}}function rs({userData:t}){const[s,n]=p.useState([]),[a,r]=p.useState({}),[i,d]=p.useState(!1);async function f(){const g=await as();if(n(g),t&&g.length>0){const c={};for(const h of g)c[h.id]=await we(h,t.stats,t.submissionCalendar);r(c)}}async function m(){const g={};for(const c of s)g[c.id]=await we(c,t.stats,t.submissionCalendar);r(g)}p.useEffect(()=>{f()},[]),p.useEffect(()=>{t&&s.length>0&&m()},[t?.stats?.total,t?.submissionCalendar,s]);async function b(g){const c=[...s,g];await Ne(c),n(c),d(!1)}async function y(g){const c=s.filter(h=>h.id!==g);await Ne(c),n(c)}const k=ss.filter(g=>!s.some(c=>c.id===g.id));return s.length===0&&!i?e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"üéØ"}),e.jsx("p",{className:"text-text-muted mb-4",children:"No goals set yet"}),e.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-primary hover:bg-primaryHover text-inverted rounded-lg font-semibold text-sm transition-colors",children:"Set Your First Goal"})]}):e.jsxs("div",{className:"space-y-3",children:[s.map(g=>{const c=a[g.id]||{progress:0,target:g.target,percentage:0,completed:!1};return e.jsxs("div",{className:`
              bg-surface border rounded-xl p-4 transition-all duration-300
              ${c.completed?"border-accent/50 bg-accent/5":"border-primary/30"}
            `,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"text-2xl",children:g.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-text-primary text-sm",children:g.title}),e.jsx("p",{className:"text-xs text-text-muted capitalize",children:g.type})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[c.completed&&e.jsx("span",{className:"text-accent text-xl",children:"‚úì"}),e.jsx("button",{onClick:()=>y(g.id),className:"text-text-muted hover:text-red-500 transition-colors",title:"Remove goal",children:"‚úï"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Progress"}),e.jsxs("span",{className:"font-semibold text-text-primary",children:[c.progress," / ",c.target]})]}),e.jsx("div",{className:"h-2 bg-surfaceHover rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${c.completed?"bg-accent":"bg-primary"}`,style:{width:`${c.percentage}%`}})}),c.completed&&e.jsx("p",{className:"text-xs text-accent text-center font-medium mt-2",children:"üéä Goal achieved! Amazing work!"})]})]},g.id)}),i&&k.length>0&&e.jsxs("div",{className:"bg-surfaceHover border border-primary/30 rounded-xl p-4 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-text-primary text-sm",children:"Add New Goal"}),e.jsx("button",{onClick:()=>d(!1),className:"text-text-muted hover:text-text-primary transition-colors",children:"‚úï"})]}),e.jsx("div",{className:"space-y-2",children:k.map(g=>e.jsxs("button",{onClick:()=>b(g),className:"w-full text-left p-3 bg-surface hover:bg-surfaceHover border border-transparent hover:border-primary/30 rounded-lg transition-all duration-200 flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:g.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-text-primary",children:g.title}),e.jsx("p",{className:"text-xs text-text-muted capitalize",children:g.type})]}),e.jsx("span",{className:"text-xs text-primary",children:"Add ‚Üí"})]},g.id))})]}),!i&&k.length>0&&e.jsxs("button",{onClick:()=>d(!0),className:"w-full py-3 border-2 border-dashed border-primary/30 hover:border-primary/50 rounded-xl text-primary hover:bg-primary/5 transition-all duration-200 flex items-center justify-center gap-2 font-semibold text-sm",children:[e.jsx("span",{className:"text-lg",children:"+"}),e.jsx("span",{children:"Add Another Goal"})]}),s.length>0&&k.length===0&&e.jsx("div",{className:"bg-gradient-to-br from-accent/5 to-primary/5 border border-accent/20 rounded-xl p-4 text-center",children:e.jsx("p",{className:"text-xs text-text-muted",children:"üéâ You've added all available goals! Keep crushing them!"})})]})}function ns(t){if(typeof t!="string")return!1;const s=/^ghp_[A-Za-z0-9]{36}$/,n=/^github_pat_[A-Za-z0-9_]{82}$/;return s.test(t)||n.test(t)}const os="https://leetcode.com/graphql",ls=`
  query questionOfToday {
    activeDailyCodingChallengeQuestion {
      date
      link
      question {
        questionId
        questionFrontendId
        title
        titleSlug
        difficulty
        likes
        dislikes
        topicTags {
          name
          slug
        }
      }
    }
  }
`;async function is(){try{const t=await fetch(os,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:ls})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();if(s.errors)throw console.error("GraphQL errors:",s.errors),new Error(s.errors[0]?.message||"GraphQL query failed");const n=s.data?.activeDailyCodingChallengeQuestion;if(!n)throw new Error("No daily question data received");return{date:n.date,link:`https://leetcode.com${n.link}`,questionId:n.question.questionFrontendId,title:n.question.title,titleSlug:n.question.titleSlug,difficulty:n.question.difficulty,likes:n.question.likes,dislikes:n.question.dislikes,topics:n.question.topicTags.map(a=>a.name)}}catch(t){return console.error("Error fetching daily question:",t),null}}function cs(){const[t,s]=p.useState(null),[n,a]=p.useState(!0),[r,i]=p.useState(!1),d=async()=>{a(!0);const y=await is();s(y),a(!1)};p.useEffect(()=>{d()},[]);const f=y=>{switch(y?.toLowerCase()){case"easy":return{color:"text-leetcode-easy",bgLight:"bg-leetcode-easy/10",border:"border-leetcode-easy/30",badgeColor:"text-leetcode-easy bg-leetcode-easy/10 border-leetcode-easy/20",icon:"üü¢"};case"medium":return{color:"text-leetcode-medium",bgLight:"bg-leetcode-medium/10",border:"border-leetcode-medium/30",badgeColor:"text-leetcode-medium bg-leetcode-medium/10 border-leetcode-medium/20",icon:"üü°"};case"hard":return{color:"text-leetcode-hard",bgLight:"bg-leetcode-hard/10",border:"border-leetcode-hard/30",badgeColor:"text-leetcode-hard bg-leetcode-hard/10 border-leetcode-hard/20",icon:"üî¥"};default:return{color:"text-primary",bgLight:"bg-primary/5",border:"border-primary/20",badgeColor:"text-primary bg-primary/10 border-primary/20",icon:"‚ùì"}}},m=()=>{t?.link&&chrome.tabs.create({url:t.link})},b=t?f(t.difficulty):null;return n?e.jsxs("div",{className:"bg-gradient-to-r from-primary/5 to-accent/5 p-5 rounded-2xl border border-primary/20 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2.5 bg-primary/20 rounded-xl",children:e.jsx("span",{className:"text-lg",children:"‚ú®"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-sm text-text-primary",children:"Today's Challenge"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Fetching your daily problem..."})]})]}),e.jsx("div",{className:"relative w-full h-2 bg-surfaceHover rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-primary via-accent to-primary rounded-full",style:{animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite",width:"40%"}})})]}):t?e.jsxs("div",{className:`bg-gradient-to-r ${b.bgLight} to-accent/5 rounded-2xl border ${b.border} shadow-lg transition-all duration-300 overflow-hidden`,children:[e.jsx("div",{className:"p-4 border-b border-current border-opacity-10",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:`p-2.5 ${b.bgLight} rounded-xl`,children:e.jsx(ie,{className:`w-4 h-4 ${b.color}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-sm text-text-primary",children:"Today's Challenge"}),e.jsx("p",{className:"text-[9px] text-text-muted",children:new Date(t.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]})]}),e.jsxs("span",{className:`px-3 py-1.5 rounded-full text-[10px] font-bold border ${b.badgeColor}`,children:[b.icon," ",t.difficulty]})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("button",{onClick:()=>i(!r),className:"w-full text-left group transition-all duration-200",children:[e.jsxs("div",{className:"flex items-start gap-2.5 mb-3",children:[e.jsxs("span",{className:`font-bold text-xs mt-0.5 px-2 py-1 rounded-lg ${b.bgLight} ${b.color}`,children:["#",t.questionId]}),e.jsx("div",{className:"flex-1",children:e.jsx("h4",{className:"font-bold text-sm text-text-primary group-hover:text-primary transition-colors leading-snug",children:t.title})}),e.jsx("div",{className:`text-text-muted transition-transform ${r?"rotate-180":""}`,children:"‚ñº"})]}),t.topics&&t.topics.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[t.topics.slice(0,3).map((y,k)=>e.jsx("span",{className:`px-2 py-1 text-[9px] font-semibold rounded-lg border transition-colors ${r?b.bgLight:"bg-primary/10"} border-current border-opacity-20`,children:y},k)),t.topics.length>3&&e.jsxs("span",{className:"px-2 py-1 text-[9px] font-medium text-text-muted bg-surfaceHover rounded-lg",children:["+",t.topics.length-3]})]})]}),r&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-current border-opacity-10 space-y-3 animate-slide-up",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"bg-background/40 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-text-primary mb-1",children:"üëç"}),e.jsx("p",{className:"text-xs text-text-muted",children:"Helpful"}),e.jsxs("p",{className:"text-sm font-bold text-primary mt-1",children:[(t.likes/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{className:"bg-background/40 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-text-primary mb-1",children:"üëé"}),e.jsx("p",{className:"text-xs text-text-muted",children:"Unhelpful"}),e.jsx("p",{className:"text-sm font-bold text-accent mt-1",children:t.dislikes?.toLocaleString()||0})]})]}),e.jsxs("div",{className:`${b.bgLight} rounded-lg p-3 border ${b.border}`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"text-sm font-bold",children:"üìä Difficulty Details"})}),e.jsxs("div",{className:"space-y-1.5 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Level"}),e.jsx("span",{className:`font-bold ${b.color}`,children:t.difficulty})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Acceptance Rate"}),e.jsxs("span",{className:"font-bold text-text-primary",children:["~",Math.round(t.likes/(t.likes+t.dislikes)*100),"%"]})]})]})]}),e.jsx("button",{onClick:m,className:`w-full py-3 rounded-xl font-bold text-sm transition-all duration-200 flex items-center justify-center gap-2 ${b.color==="text-leetcode-easy"?"bg-leetcode-easy/20 text-leetcode-easy hover:bg-leetcode-easy/30":b.color==="text-leetcode-medium"?"bg-leetcode-medium/20 text-leetcode-medium hover:bg-leetcode-medium/30":b.color==="text-leetcode-hard"?"bg-leetcode-hard/20 text-leetcode-hard hover:bg-leetcode-hard/30":"bg-primary/20 text-primary hover:bg-primary/30"}`,children:"üöÄ Solve Now"})]}),!r&&e.jsxs("div",{className:"flex items-center justify-between text-[10px] text-text-muted pt-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-semibold",children:["üëç ",(t.likes/1e3).toFixed(1),"K"]}),e.jsx("span",{className:"text-text-muted/50",children:"‚Ä¢"}),e.jsxs("span",{className:"font-semibold",children:[t.topics?.length||0," topics"]})]}),e.jsx("span",{className:"text-primary font-bold group-hover:translate-x-1 transition-transform flex items-center gap-1",children:"View ‚Üí"})]})]})]}):e.jsxs("div",{className:"bg-gradient-to-br from-background to-zinc-900 p-5 rounded-2xl border border-zinc-800 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2.5 bg-orange-500/10 rounded-xl",children:e.jsx("span",{className:"text-lg",children:"‚ö†Ô∏è"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-text-primary",children:"Unable to Load"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Daily question unavailable"})]})]}),e.jsx("p",{className:"text-xs text-text-muted text-center py-3",children:"Check back later or try refreshing the extension"}),e.jsx("button",{onClick:d,className:"w-full mt-2 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-lg text-xs font-semibold transition-colors",children:"üîÑ Try Again"})]})}function ds(){const[t,s]=p.useState([]),[n,a]=p.useState(""),[r,i]=p.useState(!1),d=async o=>{try{console.log("checkAndUpdateCompletedProblems called with:",o?.length,"problems");const u=await chrome.storage.local.get(["my_leetcode_username","friends_data"]),{my_leetcode_username:w}=u,C=u.friends_data||{};if(console.log("Username:",w,"Problems count:",o?.length),!w||!o||o.length===0){console.log("Missing username or problems list, skipping check");return}let v=C[w]||C[w.toLowerCase()];if(!v){console.log("No user data in friends_data, fetching stats...");const x=await chrome.runtime.sendMessage({type:"FETCH_STATS",forceRefresh:!0});if(!x.success||!x.friends){console.log("Failed to fetch stats or no friends data");return}if(v=x.friends[w]||x.friends[w.toLowerCase()],console.log("After fetch, found data:",!!v,"Looking for:",w,"Available keys:",Object.keys(x.friends||{})),!v){console.log("User data not found even after fetch");return}}console.log("Got user data, checking submissions...");const N=new Set,T=v?.recentSubmissions||[];console.log(`Found ${T.length} recent submissions`),T.forEach(x=>{x.statusDisplay==="Accepted"&&(x.titleSlug&&N.add(x.titleSlug),x.slug&&N.add(x.slug))});const Y=v?.allAcceptedSubmissions||[];console.log(`Found ${Y.length} all-time accepted submissions`),Y.forEach(x=>{x.titleSlug&&N.add(x.titleSlug),x.slug&&N.add(x.slug)}),console.log("All accepted slugs:",Array.from(N));const q=o.map(x=>{const _=[x.slug,x.url?k(x.url):null,k(x.title),String(x.id)].filter(Boolean);return console.log(`Problem "${x.title}" - variations:`,_),_.some($=>N.has($))&&x.status!=="completed"?(console.log(`‚úÖ Marking "${x.title}" as completed`),{...x,status:"completed"}):x});q.some((x,_)=>x.status!==o[_]?.status)?(console.log("Saving updated queue with completed statuses"),await chrome.storage.local.set({problem_queue:q}),s(q)):console.log("No changes to queue needed")}catch(u){console.error("Error checking completed problems:",u)}},f=async()=>{try{const u=(await chrome.storage.local.get("problem_queue")).problem_queue||[],w=u.map((C,v)=>(C.id||(C.id=C.slug||`problem-${Date.now()}-${v}`),C));u.some(C=>!C.id)&&await chrome.storage.local.set({problem_queue:w}),s(w),d(w)}catch(o){console.error("Error loading problems:",o)}};p.useEffect(()=>{f();const o=(u,w)=>{w==="local"&&u.problem_queue&&f()};return chrome.storage.onChanged.addListener(o),()=>{chrome.storage.onChanged.removeListener(o)}},[]);const m=async o=>{try{await chrome.storage.local.set({problem_queue:o}),s(o)}catch(u){console.error("Error saving problems:",u)}},b=async()=>{if(!n.trim())return;const o=k(n.trim()),u=c(n.trim());if(t.some(N=>(N.slug||k(N.url||""))===o)){alert("This problem is already in your queue!");return}let C="pending";try{const{my_leetcode_username:N}=await chrome.storage.local.get("my_leetcode_username");if(N){const T=await chrome.runtime.sendMessage({type:"FETCH_STATS",forceRefresh:!1});T.success&&T.friends&&T.friends[N]&&(T.friends[N]?.profile?.recentSubmissions||[]).some(x=>x.titleSlug===o&&x.statusDisplay==="Accepted")&&(C="completed")}}catch(N){console.error("Error checking submission status:",N)}const v={id:o||Date.now(),title:n.trim(),slug:o,url:u,addedAt:Date.now(),status:C,difficulty:"Medium"};m([...t,v]),a(""),i(!1)},y=(o,u)=>{const w=t.map(C=>C.id===o||C.slug===o?{...C,status:u}:C);m(w)},k=o=>{if(o.includes("leetcode.com/problems/")){const w=o.match(/problems\/([^/]+)/);return w?w[1]:o}return o.toLowerCase().replace(/^\d+\.\s+/,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-")},g=o=>{m(t.filter(u=>u.id!==o&&u.slug!==o))},c=o=>o.startsWith("http")?o:`https://leetcode.com/problems/${o.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-")}/`,h=o=>{chrome.tabs.create({url:o})};return e.jsxs("div",{className:"bg-surface rounded-3xl shadow-xl p-6 border border-surfaceHover transition-all duration-300 hover:shadow-2xl hover:shadow-primary/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"üìù"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xs text-text-main",children:"Problem Queue"}),e.jsx("p",{className:"text-[9px] text-text-muted",children:"Save problems to solve later"})]})]}),e.jsx("button",{onClick:()=>i(!r),className:"px-2.5 py-1 text-[10px] font-semibold bg-primary text-white rounded-md hover:bg-primaryHover transition-all active:scale-95",children:r?"‚úï":"+ Add"})]}),r&&e.jsxs("div",{className:"mb-3 p-2.5 bg-background/50 rounded-lg border border-surfaceHover",children:[e.jsx("input",{type:"text",value:n,onChange:o=>a(o.target.value),onKeyPress:o=>o.key==="Enter"&&b(),placeholder:"Problem name or URL...",className:"w-full px-2.5 py-1.5 text-[10px] bg-surface border border-surfaceHover rounded-md focus:outline-none focus:border-primary text-text-main placeholder-text-muted mb-2",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:b,className:"flex-1 py-1.5 text-[10px] font-semibold bg-primary text-white rounded-md hover:bg-primaryHover transition-all",children:"Add to Queue"}),e.jsx("button",{onClick:o=>{o.stopPropagation(),i(!1),a("")},className:"px-3 py-1.5 text-[10px] font-semibold text-text-muted hover:text-text-main bg-surface hover:bg-surfaceHover rounded-md transition-all active:scale-95",children:"Cancel"})]})]}),t.length===0?e.jsxs("div",{className:"text-center py-4 text-text-muted",children:[e.jsx("span",{className:"text-2xl mb-1 block",children:"üìã"}),e.jsx("p",{className:"text-[10px]",children:"No problems saved yet"}),e.jsx("p",{className:"text-[9px] mt-0.5",children:'Visit LeetCode problems and click "Add to Queue"'})]}):e.jsx("div",{className:"space-y-1.5 max-h-48 overflow-y-auto pr-1 scrollbar-hide",children:t.map(o=>{const u={Easy:"text-leetcode-easy",Medium:"text-leetcode-medium",Hard:"text-leetcode-hard"},w={pending:"‚è≥","in-progress":"üöÄ",completed:"‚úÖ"},C=o.status==="completed";return e.jsxs("div",{className:`flex items-center gap-2 p-2 rounded-lg border transition-all group ${C?"bg-green-500/5 border-green-500/20 hover:border-green-500/40":"bg-background/50 border-surfaceHover hover:border-primary/40"}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx("span",{className:"text-[10px]",children:w[o.status]||"üìã"}),e.jsx("div",{className:`text-[10px] font-semibold truncate group-hover:text-primary transition-colors ${C?"text-green-400":"text-text-main"}`,children:o.title}),C&&e.jsx("span",{className:"ml-auto flex-shrink-0 px-1.5 py-0.5 text-[8px] font-bold bg-green-500/20 text-green-400 rounded-full border border-green-500/30 whitespace-nowrap",children:"‚úì Submitted"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[8px] text-text-muted",children:[e.jsx("span",{className:`font-semibold ${u[o.difficulty]||"text-text-muted"}`,children:o.difficulty}),o.number&&e.jsxs("span",{children:["#",o.number]}),e.jsx("span",{children:"‚Ä¢"}),e.jsxs("span",{children:["Added ",new Date(o.addedAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[o.status!=="completed"&&e.jsx("button",{onClick:v=>{v.stopPropagation(),y(o.id,o.status==="pending"?"in-progress":"completed")},className:"px-2 py-1 text-[9px] font-semibold text-accent hover:text-accent bg-accent/10 hover:bg-accent/20 rounded transition-all active:scale-95",title:o.status==="pending"?"Start":"Complete",children:o.status==="pending"?"‚ñ∂":"‚úì"}),e.jsx("button",{onClick:()=>h(o.url),className:"px-2 py-1 text-[9px] font-semibold text-primary hover:text-primaryHover bg-primary/10 hover:bg-primary/20 rounded transition-all whitespace-nowrap",title:"Open problem",children:"Open"}),e.jsx("button",{onClick:v=>{v.stopPropagation(),g(o.id)},className:"px-1.5 py-1 text-[9px] font-semibold text-red-400 hover:text-red-300 bg-red-400/10 hover:bg-red-400/20 rounded transition-all active:scale-95",title:"Remove",children:"‚úï"})]})]},o.id)})}),t.length>0&&e.jsx("div",{className:"mt-2 pt-2 border-t border-surfaceHover",children:e.jsxs("div",{className:"flex justify-between items-center text-[9px] text-text-muted",children:[e.jsxs("span",{children:[t.length," problem",t.length!==1?"s":""," in queue"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{children:["‚è≥ ",t.filter(o=>o.status==="pending").length]}),e.jsxs("span",{children:["üöÄ ",t.filter(o=>o.status==="in-progress").length]}),e.jsxs("span",{children:["‚úÖ ",t.filter(o=>o.status==="completed").length]})]})]})})]})}function ms(t){if(!t)return;const{profile:s,stats:n,submissionCalendar:a}=t;let r=`LeetCode Statistics Report

`;r+=`Username,${s.username}
`,r+=`Real Name,${s.realName||"N/A"}
`,r+=`Current Streak,${n.streak||0} days
`,r+=`Total Problems,${n.total||0}
`,r+=`Easy Problems,${n.easy||0}
`,r+=`Medium Problems,${n.medium||0}
`,r+=`Hard Problems,${n.hard||0}
`,r+=`Global Ranking,${s.ranking||"N/A"}

`,r+=`Date,Submissions
`,a&&Object.entries(a).filter(([b,y])=>parseInt(y)>0).sort(([b],[y])=>parseInt(y)-parseInt(b)).slice(0,30).forEach(([b,y])=>{const g=new Date(parseInt(b)*1e3).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"});r+=`${g},${y}
`});const i=new Blob([r],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),f=URL.createObjectURL(i);d.setAttribute("href",f),d.setAttribute("download",`leetcode_stats_${s.username}_${Date.now()}.csv`),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)}function xs(t){if(!t)return;const{profile:s,stats:n}=t,a=`
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>LeetCode Stats - ${s.username}</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      color: #333;
    }
    .header {
      text-align: center;
      margin-bottom: 40px;
      border-bottom: 3px solid #FF6B35;
      padding-bottom: 20px;
    }
    .header h1 {
      color: #FF6B35;
      margin: 0;
      font-size: 32px;
    }
    .header p {
      color: #666;
      margin: 10px 0 0 0;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin: 30px 0;
    }
    .stat-card {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 12px;
      border-left: 4px solid #FF6B35;
    }
    .stat-card h3 {
      margin: 0 0 10px 0;
      color: #666;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .stat-card .value {
      font-size: 32px;
      font-weight: bold;
      color: #FF6B35;
    }
    .difficulty-section {
      margin: 30px 0;
    }
    .difficulty-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-top: 15px;
    }
    .difficulty-card {
      padding: 15px;
      border-radius: 8px;
      text-align: center;
    }
    .difficulty-card.easy {
      background: #d4edda;
      border: 2px solid #28a745;
    }
    .difficulty-card.medium {
      background: #fff3cd;
      border: 2px solid #ffc107;
    }
    .difficulty-card.hard {
      background: #f8d7da;
      border: 2px solid #dc3545;
    }
    .difficulty-card .value {
      font-size: 28px;
      font-weight: bold;
      margin: 5px 0;
    }
    .difficulty-card.easy .value { color: #28a745; }
    .difficulty-card.medium .value { color: #ffc107; }
    .difficulty-card.hard .value { color: #dc3545; }
    .footer {
      margin-top: 40px;
      text-align: center;
      color: #999;
      font-size: 12px;
      border-top: 1px solid #ddd;
      padding-top: 20px;
    }
    @media print {
      body { margin: 0; }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>üöÄ LeetCode Statistics</h1>
    <p><strong>${s.username}</strong>${s.realName?` ‚Ä¢ ${s.realName}`:""}</p>
  </div>

  <div class="stats-grid">
    <div class="stat-card">
      <h3>üî• Current Streak</h3>
      <div class="value">${n.streak||0}</div>
      <p style="margin: 5px 0 0 0; color: #666;">days</p>
    </div>
    <div class="stat-card">
      <h3>üìä Total Problems</h3>
      <div class="value">${n.total||0}</div>
      <p style="margin: 5px 0 0 0; color: #666;">solved</p>
    </div>
  </div>

  <div class="difficulty-section">
    <h2 style="color: #333; margin-bottom: 15px;">Problem Breakdown</h2>
    <div class="difficulty-grid">
      <div class="difficulty-card easy">
        <h4 style="margin: 0; color: #28a745;">Easy</h4>
        <div class="value">${n.easy||0}</div>
      </div>
      <div class="difficulty-card medium">
        <h4 style="margin: 0; color: #ffc107;">Medium</h4>
        <div class="value">${n.medium||0}</div>
      </div>
      <div class="difficulty-card hard">
        <h4 style="margin: 0; color: #dc3545;">Hard</h4>
        <div class="value">${n.hard||0}</div>
      </div>
    </div>
  </div>

  ${s.ranking?`
  <div class="stat-card" style="margin: 30px 0;">
    <h3>üèÜ Global Ranking</h3>
    <div class="value">#${s.ranking.toLocaleString()}</div>
  </div>
  `:""}

  <div class="footer">
    <p>Generated by LeetStreak on ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}</p>
    <p>Profile: https://leetcode.com/${s.username}</p>
  </div>
</body>
</html>
  `,r=window.open("","_blank");r.document.write(a),r.document.close(),r.onload=()=>{r.focus(),setTimeout(()=>{r.print()},250)}}function us({friends:t,currentStreak:s,onRefresh:n,refreshing:a}){const[r,i]=p.useState(0),[d,f]=p.useState(null),[m,b]=p.useState(!1),[y,k]=p.useState(new Set),[g,c]=p.useState(!1);p.useEffect(()=>{[7,30,100,365].includes(s)&&!y.has(s)&&(b(!0),k(x=>new Set([...x,s])))},[s,y]);const h=p.useMemo(()=>{if(g||!t||t.length===0)return!1;const l=t[0];if(!l?.submissionCalendar)return!1;const x=new Date,_=new Date(Date.UTC(x.getFullYear(),x.getMonth(),x.getDate())),D=Math.floor(_.getTime()/1e3).toString(),$=parseInt(l.submissionCalendar[D])||0;return s>0&&$===0},[t,s,g]);if(!t||t.length===0)return e.jsx("div",{className:"flex items-center justify-center h-full p-8 text-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-5xl mb-4",children:"üìä"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No data available"}),e.jsx("button",{onClick:n,className:"px-4 py-2 bg-orange-500 text-white rounded-full text-sm",children:"Load Data"})]})});const o=t.length>0?t.reduce((l,x)=>(x.stats?.streak||0)>(l.stats?.streak||0)?x:l):null,u=t.reduce((l,x)=>({easy:l.easy+(x.stats?.easy||0),medium:l.medium+(x.stats?.medium||0),hard:l.hard+(x.stats?.hard||0),total:l.total+(x.stats?.total||0)}),{easy:0,medium:0,hard:0,total:0}),w=t[0],C=w?.submissionCalendar,v=l=>l===0?0:l<=2?1:l<=4?2:l<=6?3:4,T=(()=>{const l=[],x=new Date,_=x.getDay(),D=new Date(x);D.setDate(x.getDate()-_);for(let $=0;$<7;$++){const S=new Date(D);S.setDate(D.getDate()+$);let M=0;if(C){const I=new Date(Date.UTC(S.getFullYear(),S.getMonth(),S.getDate())),E=Math.floor(I.getTime()/1e3).toString();M=parseInt(C[E])||0}l.push({label:["S","M","T","W","T","F","S"][$],date:S.getDate(),count:M,isToday:S.toDateString()===x.toDateString(),isPast:S<x,isFuture:S>x})}return l})(),Y=(l=0)=>{if(!C)return null;try{const x=C;if(!x||typeof x!="object")return null;console.log("Calendar data:",x),console.log("Calendar keys sample:",Object.keys(x).slice(0,10));const _=new Date,D=new Date(Date.UTC(_.getFullYear(),_.getMonth(),_.getDate())),$=new Date(D.getFullYear(),D.getMonth()-l,1),S=$.getFullYear(),M=$.getMonth(),I=$.toLocaleDateString("en-US",{month:"long"}),E=new Date(S,M,1).getDay(),K=new Date(S,M+1,0).getDate(),V=[];let U=[];for(let F=0;F<E;F++)U.push(null);for(let F=1;F<=K;F++){const A=new Date(S,M,F),Q=new Date(Date.UTC(A.getFullYear(),A.getMonth(),A.getDate())),W=Math.floor(Q.getTime()/1e3).toString(),B=parseInt(x[W])||0,z=A.toDateString()===_.toDateString();(z||B>0)&&console.log("Day "+F+":",{date:A.toISOString(),timestamp:W,count:B,calendarValue:x[W],isToday:z}),U.push({date:A,day:F,count:B,dateStr:W,isToday:z}),U.length===7&&(V.push(U),U=[])}if(U.length>0){for(;U.length<7;)U.push(null);V.push(U)}return{monthName:I,year:S,weeks:V}}catch(x){return console.error("Error generating calendar data:",x),null}},q=(l,x=!1)=>{const _=v(l),D=["bg-surfaceHover border-surfaceHover","bg-secondary/40 border-secondary/60 shadow-sm","bg-secondary/60 border-secondary/80 shadow","bg-secondary/80 border-secondary shadow-md","bg-secondary border-secondary shadow-lg"];return x?D[_]+" ring-2 ring-primary/80 ring-offset-1 ring-offset-background":D[_]};return e.jsxs("div",{className:"h-full overflow-y-auto pb-6 bg-background scrollbar-hide",children:[m&&e.jsx(ts,{streak:s,onClose:()=>b(!1)}),h&&e.jsx("div",{className:"mx-6 mt-6 mb-4 px-4 py-3 bg-gradient-to-r from-amber-500/20 to-orange-500/20 border-2 border-amber-500/40 rounded-xl backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"‚ö†Ô∏è"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-bold text-sm text-amber-400",children:"Streak at Risk!"}),e.jsx("button",{onClick:()=>c(!0),className:"ml-auto text-text-muted hover:text-text-main text-xs",children:"‚úï"})]}),e.jsxs("p",{className:"text-xs text-text-muted leading-relaxed",children:["You haven't solved any problems today. Your ",e.jsxs("strong",{className:"text-amber-400",children:[s,"-day streak"]})," will break at midnight! üî•"]}),e.jsxs("a",{href:"https://leetcode.com/problemset/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 mt-2 text-xs font-semibold text-amber-400 hover:text-amber-300 transition-colors",children:[e.jsx("span",{children:"Solve a problem now"}),e.jsx("span",{children:"‚Üí"})]})]})]})}),e.jsxs("div",{className:"text-center pt-8 pb-6 animate-fade-in",children:[e.jsx("div",{className:"text-8xl font-black bg-gradient-to-r from-primary via-orange-500 to-red-500 bg-clip-text text-transparent mb-2 drop-shadow-2xl",children:s}),e.jsx("div",{className:"text-xl font-bold text-text-main mb-1",children:"Day Streak üéØ"}),e.jsxs("p",{className:"text-sm text-text-muted",children:["You are doing really great",o?`, ${o.profile.username}`:"","!"]}),(w?.profile?.ranking||w?.contestRanking?.globalRanking)&&e.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-sm text-text-muted",children:"üåç"}),e.jsxs("span",{className:"text-sm font-bold text-primary",children:["Global Rank #",(w.profile.ranking||w.contestRanking.globalRanking).toLocaleString()]})]}),e.jsx("button",{onClick:n,disabled:a,className:"mt-4 px-6 py-2.5 text-sm font-semibold text-inverted bg-primary hover:bg-primaryHover rounded-full transition-all duration-300 disabled:opacity-50 shadow-lg hover:shadow-primary/30 active:scale-95 flex items-center gap-2 mx-auto",children:a?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"inline-block animate-spin",children:"‚ü≥"}),e.jsx("span",{children:"Refreshing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"üîÑ"}),e.jsx("span",{children:"Refresh Data"})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4",children:[e.jsxs("button",{onClick:()=>ms(w),className:"px-4 py-2 text-xs font-semibold text-text-main bg-surface hover:bg-surfaceHover border border-surfaceHover rounded-lg transition-all duration-300 shadow-sm hover:shadow-md active:scale-95 flex items-center gap-2",children:[e.jsx("span",{children:"üìÑ"}),e.jsx("span",{children:"Export CSV"})]}),e.jsxs("button",{onClick:()=>xs(w),className:"px-4 py-2 text-xs font-semibold text-text-main bg-surface hover:bg-surfaceHover border border-surfaceHover rounded-lg transition-all duration-300 shadow-sm hover:shadow-md active:scale-95 flex items-center gap-2",children:[e.jsx("span",{children:"üìã"}),e.jsx("span",{children:"Export PDF"})]})]}),e.jsx("p",{className:"text-xs text-text-muted text-center mt-2",children:"Auto-syncs every 30 minutes"})]}),e.jsx("div",{className:"px-6 mb-6 animate-slide-up",children:e.jsxs("div",{className:"bg-surface rounded-3xl p-5 shadow-xl border border-surfaceHover transition-all duration-300 hover:shadow-2xl hover:shadow-primary/5",children:[e.jsx("h3",{className:"text-xs font-semibold text-text-muted uppercase tracking-wide mb-4 text-center",children:"This Week"}),e.jsx("div",{className:"flex justify-between items-center gap-2 relative",children:T.map((l,x)=>{const _=v(l.count);let D,$;return _===0?(D="bg-surfaceHover",$="text-text-muted"):_===1?(D="bg-secondary/40",$="text-white"):_===2?(D="bg-secondary/60",$="text-white"):_===3?(D="bg-secondary/80",$="text-white"):(D="bg-secondary",$="text-white"),e.jsxs("div",{className:"flex-1 text-center group relative",children:[e.jsx("div",{className:"text-xs text-text-muted font-medium mb-2 group-hover:text-text-main transition-colors",children:l.label}),e.jsx("div",{className:`
                      w-full aspect-square rounded-2xl flex items-center justify-center text-sm font-bold shadow-sm transition-all duration-300 cursor-pointer
                      ${D} ${$}
                      ${l.isToday?"ring-2 ring-primary/80 ring-offset-1 ring-offset-background scale-110":""}
                      ${l.isFuture?"opacity-40":""}
                      hover:scale-110 hover:shadow-lg
                    `,title:`${l.count} submission${l.count!==1?"s":""}`,children:l.count>0?l.count:l.date}),e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-surface border border-primary/40 rounded-lg shadow-xl transition-opacity duration-200 pointer-events-none z-50 whitespace-nowrap",children:[e.jsx("div",{className:"text-xs font-semibold text-primary",children:l.count===0?"No submissions":`${l.count} submission${l.count!==1?"s":""}`}),e.jsx("div",{className:"text-[10px] text-text-muted mt-1",children:new Date(new Date().setDate(new Date().getDate()-new Date().getDay()+x)).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),l.isToday&&e.jsx("div",{className:"text-[10px] text-amber-400 font-semibold mt-1",children:"Today"})]})]},x)})})]})}),e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.1s"},children:e.jsxs("div",{className:"bg-surface rounded-3xl shadow-xl p-6 border border-surfaceHover transition-all duration-300 hover:shadow-2xl hover:shadow-primary/5",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-muted mb-4 text-center",children:"Your Stats üìä"}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"text-center py-3 bg-leetcode-easy/10 rounded-2xl shadow-sm border border-leetcode-easy/20 hover:bg-leetcode-easy/20 transition-colors",children:[e.jsx("div",{className:"text-xl font-bold text-leetcode-easy",children:u.easy}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Easy"})]}),e.jsxs("div",{className:"text-center py-3 bg-leetcode-medium/10 rounded-2xl shadow-sm border border-leetcode-medium/20 hover:bg-leetcode-medium/20 transition-colors",children:[e.jsx("div",{className:"text-xl font-bold text-leetcode-medium",children:u.medium}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Medium"})]}),e.jsxs("div",{className:"text-center py-3 bg-leetcode-hard/10 rounded-2xl shadow-sm border border-leetcode-hard/20 hover:bg-leetcode-hard/20 transition-colors",children:[e.jsx("div",{className:"text-xl font-bold text-leetcode-hard",children:u.hard}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Hard"})]}),e.jsxs("div",{className:"text-center py-3 bg-surfaceHover rounded-2xl shadow-sm border border-surfaceHover hover:bg-surfaceHover/80 transition-colors",children:[e.jsx("div",{className:"text-xl font-bold text-text-main",children:u.total}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Total"})]})]})]})}),e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.1s"},children:e.jsx(cs,{})}),e.jsxs("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.15s"},children:[e.jsxs("h3",{className:"text-sm font-semibold text-text-muted mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-base",children:"üéØ"}),e.jsx("span",{children:"My Goals"})]}),e.jsx(rs,{userData:w})]}),o&&o.stats.streak>=7&&e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.25s"},children:e.jsx("div",{className:"bg-gradient-to-br from-primary/10 to-surface rounded-3xl p-6 border border-primary/20 shadow-lg transition-all duration-300 hover:shadow-primary/10",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-primaryHover rounded-full flex items-center justify-center shadow-lg shadow-primary/20",children:e.jsx("span",{className:"text-3xl animate-bounce-slow",children:"üèÖ"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-text-muted mb-1",children:"Earned a Badge"}),e.jsx("div",{className:"text-xl font-bold text-text-main",children:"Challenger üéñÔ∏è"})]})]})})}),C&&(()=>{const l=Y(r);return l?e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.3s"},children:e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-4 rounded-xl border border-surfaceHover shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üìÖ"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm text-text-main",children:"Activity Calendar"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Browse monthly submissions"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:n,disabled:a,className:"p-1.5 text-text-muted hover:text-primary rounded-lg transition-all duration-300 disabled:opacity-50 hover:bg-surface",title:"Refresh data",children:a?e.jsx("span",{className:"inline-block animate-spin text-sm",children:"‚ü≥"}):e.jsx("span",{className:"text-sm",children:"üîÑ"})}),e.jsxs("div",{className:"flex items-center gap-1 bg-background/60 px-2 py-1.5 rounded-lg border border-surfaceHover/50",children:[e.jsx("span",{className:"text-[9px] text-text-muted mr-1",children:"Less"}),[0,1,2,3,4].map(x=>e.jsx("div",{className:`w-[10px] h-[10px] rounded-[2px] border ${q(x*2)}`},x)),e.jsx("span",{className:"text-[9px] text-text-muted ml-1",children:"More"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{onClick:x=>{x.stopPropagation(),r<11&&i(r+1)},disabled:r>=11,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 border border-primary/30 disabled:opacity-30 disabled:cursor-not-allowed transition-all group",children:e.jsx("svg",{className:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-bold text-primary",children:[l.monthName," ",l.year]}),e.jsx("div",{className:"text-[10px] text-text-muted",children:(()=>{const x=l.weeks.flat().filter(_=>_&&_.count>0).reduce((_,D)=>_+D.count,0);return`${x} submission${x!==1?"s":""}`})()})]}),e.jsx("button",{onClick:x=>{x.stopPropagation(),r>0&&i(r-1)},disabled:r<=0,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 border border-primary/30 disabled:opacity-30 disabled:cursor-not-allowed transition-all group",children:e.jsx("svg",{className:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"bg-background/70 backdrop-blur-sm rounded-xl p-3 border border-surfaceHover/60 relative",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((x,_)=>e.jsx("div",{className:"text-[9px] text-text-muted text-center font-semibold",children:x},_))}),l.weeks.map((x,_)=>e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:x.map((D,$)=>{const S=_<2;let M="left-1/2 transform -translate-x-1/2";return $===0?M="left-0":$===6&&(M="right-0"),e.jsx("div",{className:`aspect-square rounded-md flex items-center justify-center text-[9px] font-bold transition-all duration-300 relative group ${D?`${q(D.count,D.isToday)} cursor-pointer hover:scale-125 hover:shadow-xl hover:z-20 ${d?.dateStr===D.dateStr?"scale-125 shadow-xl z-20":""}`:"bg-transparent"}`,onMouseEnter:()=>D&&f(D),onMouseLeave:()=>f(null),children:D&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`${D.count>0?"text-white font-bold drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]":"text-text-muted font-semibold"}`,children:D.day}),D.isToday&&e.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-1.5 h-1.5 bg-amber-400 rounded-full animate-pulse"}),d?.dateStr===D.dateStr&&e.jsxs("div",{className:`absolute ${S?"top-full mt-2":"bottom-full mb-2"} ${M} bg-gradient-to-br from-surface to-surfaceHover border-2 border-primary/40 rounded-xl px-4 py-3 shadow-2xl z-50 animate-fade-in pointer-events-none backdrop-blur-sm whitespace-nowrap`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[D.isToday&&e.jsx("span",{className:"text-base",children:"‚≠ê"}),e.jsx("div",{className:"text-sm font-bold text-primary",children:D.count===0?"No activity":`${D.count} submission${D.count!==1?"s":""}`})]}),e.jsx("div",{className:"text-[11px] text-text-muted",children:D.date.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),D.isToday&&e.jsx("div",{className:"text-[10px] text-amber-400 font-semibold mt-1",children:"Today"})]})]})},$)})},_))]})]})}):null})(),t.length>0&&e.jsxs("div",{className:"mx-6 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-muted mb-3",children:"Recent Activity üéØ"}),e.jsx("div",{className:"space-y-3",children:t.slice(0,3).filter(l=>l&&l.profile&&l.stats).map((l,x)=>e.jsx("div",{className:"bg-surface rounded-3xl p-4 shadow-md border border-surfaceHover transition-all duration-300 hover:shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:l.profile?.avatar||"https://via.placeholder.com/40",alt:l.profile?.username||"User",className:"w-6 h-6 rounded-full shadow-md"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-sm text-text-main",children:l.profile?.username||"Unknown"}),e.jsxs("div",{className:"text-xs text-text-muted",children:[l.stats?.total||0," problems solved"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-primary font-bold bg-primary/10 px-3 py-1 rounded-full border border-primary/20",children:[e.jsx("span",{children:"üî•"}),e.jsx("span",{children:l.stats?.streak||0})]})]})},x))})]}),e.jsx("div",{className:"mx-6 mb-6 animate-slide-up",style:{animationDelay:"0.35s"},children:e.jsx(ds,{})})]})}const ke=1.7,Se=30,Ce=19,Me=4,fe="schedule_preferences";async function ce(){try{return(await chrome.storage.local.get(fe))[fe]||{activeInterval:ke,quietInterval:Se,activeStartHour:Ce,activeEndHour:Me}}catch(t){return console.error("Error loading schedule preferences:",t),{activeInterval:ke,quietInterval:Se,activeStartHour:Ce,activeEndHour:Me}}}async function hs(t){try{return await chrome.storage.local.set({[fe]:t}),{success:!0}}catch(s){return console.error("Error saving schedule preferences:",s),{success:!1,error:s.message}}}async function ye(t=null){t||(t=await ce());const n=new Date().getHours(),{activeStartHour:a,activeEndHour:r}=t;return a>r?n>=a||n<r:n>=a&&n<r}async function ps(){const t=await ce();return await ye(t)?t.activeInterval:t.quietInterval}async function fs(){const t=await ce(),s=new Date,n=s.getHours(),a=s.getMinutes();let r;await ye(t)?r=t.activeEndHour:r=t.activeStartHour;let i=r-n;return i<0&&(i+=24),i===0&&a>0&&(i=24),i*60-a}function De(t){return t===0?"12:00 AM":t<12?`${t}:00 AM`:t===12?"12:00 PM":`${t-12}:00 PM`}async function gs(){const t=await ce(),s=await ye(t),n=await ps(),a=await fs();return{activeInterval:t.activeInterval,quietInterval:t.quietInterval,activeStartHour:t.activeStartHour,activeEndHour:t.activeEndHour,activeStart:De(t.activeStartHour),activeEnd:De(t.activeEndHour),currentMode:s?"active":"quiet",currentInterval:n,nextTransition:a}}function bs(t){const s=[];(t.activeInterval<1||t.activeInterval>30)&&s.push("Active interval must be between 1 and 30 minutes"),(t.quietInterval<5||t.quietInterval>60)&&s.push("Quiet interval must be between 5 and 60 minutes"),(t.activeStartHour<0||t.activeStartHour>23)&&s.push("Active start hour must be between 0 and 23"),(t.activeEndHour<0||t.activeEndHour>23)&&s.push("Active end hour must be between 0 and 23");let n=t.activeEndHour-t.activeStartHour;return n<0&&(n+=24),n<2&&s.push("Active hours should be at least 2 hours long"),{valid:s.length===0,errors:s}}function ys({isOpen:t,onClose:s}){const[n,a]=p.useState(null),[r,i]=p.useState(!0),[d,f]=p.useState(!1),[m,b]=p.useState(null),[y,k]=p.useState(null),[g,c]=p.useState(!1),[h,o]=p.useState({activeStartHour:19,activeEndHour:4}),[u,w]=p.useState("");p.useEffect(()=>{t&&(v(),C())},[t]);const C=async()=>{const l=await gs();k(l),o({activeStartHour:l.activeStartHour,activeEndHour:l.activeEndHour})},v=async()=>{try{i(!0);const l=await chrome.runtime.sendMessage({type:"GET_NOTIFICATION_STATE"});if(l.success){a(l.state);const x=new Date().toISOString().split("T")[0],_=l.state.mutedUntilUTC&&l.state.mutedUntilUTC>x;f(_),b(l.state.mutedUntilUTC)}}catch(l){console.error("Error loading notification state:",l)}finally{i(!1)}},N=async()=>{try{const l=new Date;l.setUTCDate(l.getUTCDate()+1);const x=l.toISOString().split("T")[0];(await chrome.runtime.sendMessage({type:"MUTE_NOTIFICATIONS",untilUTC:x})).success&&(f(!0),b(x))}catch(l){console.error("Error muting notifications:",l)}},T=async()=>{try{(await chrome.runtime.sendMessage({type:"MUTE_NOTIFICATIONS",untilUTC:null})).success&&(f(!1),b(null))}catch(l){console.error("Error unmuting notifications:",l)}},Y=async()=>{w("");const l={activeInterval:y.activeInterval,quietInterval:y.quietInterval,activeStartHour:h.activeStartHour,activeEndHour:h.activeEndHour},x=bs(l);if(!x.valid){w(x.errors.join(". "));return}(await hs(l)).success?(await C(),c(!1),await chrome.runtime.sendMessage({type:"RESCHEDULE_ALARMS"})):w("Failed to save preferences")},q=()=>{o({activeStartHour:y.activeStartHour,activeEndHour:y.activeEndHour}),w(""),c(!1)};return t?e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface border border-zinc-700 rounded-lg max-w-md w-full shadow-2xl flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-700 flex-shrink-0",children:[e.jsx("h2",{className:"text-lg font-semibold text-zinc-100",children:"Notification Settings"}),e.jsx("button",{onClick:s,className:"text-zinc-400 hover:text-zinc-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-4 space-y-4 overflow-y-auto flex-1 modal-scroll",children:r?e.jsx("div",{className:"text-center text-zinc-400 py-8",children:e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[y&&e.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-accent/10 rounded-lg p-4 border border-primary/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"‚è∞"}),e.jsx("h3",{className:"text-sm font-semibold text-zinc-100",children:"Sync Schedule"})]}),!g&&e.jsx("button",{onClick:()=>c(!0),className:"text-xs px-2 py-1 bg-primary/20 hover:bg-primary/30 text-primary rounded transition-colors",children:"Edit"})]}),g?e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-zinc-300 font-medium mb-1",children:"Set Your Active Coding Hours"}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Frequent checks every 1.7 minutes during these hours"})]}),e.jsxs("div",{className:"relative h-16 bg-background rounded-xl border border-zinc-700 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex",children:[...Array(24)].map((l,x)=>e.jsx("div",{className:"flex-1 border-r border-zinc-800 last:border-r-0"},x))}),e.jsx("div",{className:"absolute top-0 bottom-0 bg-gradient-to-r from-primary/40 via-accent/40 to-primary/40 transition-all duration-500 ease-out",style:{left:`${h.activeStartHour/24*100}%`,right:h.activeStartHour>h.activeEndHour?`${(24-h.activeEndHour)/24*100}%`:`${(24-h.activeEndHour)/24*100}%`,width:h.activeStartHour>h.activeEndHour?`${(24-h.activeStartHour+h.activeEndHour)/24*100}%`:`${(h.activeEndHour-h.activeStartHour)/24*100}%`}}),e.jsxs("div",{className:"absolute top-0 bottom-0 w-1 bg-primary transition-all duration-300 shadow-lg shadow-primary/50",style:{left:`${h.activeStartHour/24*100}%`},children:[e.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-3 h-3 bg-primary rounded-full animate-pulse shadow-lg shadow-primary/50"}),e.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-3 h-3 bg-primary rounded-full animate-pulse shadow-lg shadow-primary/50"})]}),e.jsxs("div",{className:"absolute top-0 bottom-0 w-1 bg-accent transition-all duration-300 shadow-lg shadow-accent/50",style:{left:`${h.activeEndHour/24*100}%`},children:[e.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-3 h-3 bg-accent rounded-full animate-pulse shadow-lg shadow-accent/50"}),e.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-3 h-3 bg-accent rounded-full animate-pulse shadow-lg shadow-accent/50"})]}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-2 pointer-events-none",children:[e.jsx("span",{className:"text-[10px] text-zinc-600 font-medium",children:"12AM"}),e.jsx("span",{className:"text-[10px] text-zinc-600 font-medium",children:"6AM"}),e.jsx("span",{className:"text-[10px] text-zinc-600 font-medium",children:"12PM"}),e.jsx("span",{className:"text-[10px] text-zinc-600 font-medium",children:"6PM"}),e.jsx("span",{className:"text-[10px] text-zinc-600 font-medium",children:"11PM"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-xs text-zinc-400 font-medium",children:"üü† Start Hour"}),e.jsx("span",{className:"text-sm text-primary font-bold",children:h.activeStartHour===0?"12:00 AM":h.activeStartHour<12?`${h.activeStartHour}:00 AM`:h.activeStartHour===12?"12:00 PM":`${h.activeStartHour-12}:00 PM`})]}),e.jsx("input",{type:"range",min:"0",max:"23",value:h.activeStartHour,onChange:l=>o({...h,activeStartHour:parseInt(l.target.value)}),className:"w-full h-2 bg-zinc-800 rounded-lg appearance-none cursor-pointer slider-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-xs text-zinc-400 font-medium",children:"üü£ End Hour"}),e.jsx("span",{className:"text-sm text-accent font-bold",children:h.activeEndHour===0?"12:00 AM":h.activeEndHour<12?`${h.activeEndHour}:00 AM`:h.activeEndHour===12?"12:00 PM":`${h.activeEndHour-12}:00 PM`})]}),e.jsx("input",{type:"range",min:"0",max:"23",value:h.activeEndHour,onChange:l=>o({...h,activeEndHour:parseInt(l.target.value)}),className:"w-full h-2 bg-zinc-800 rounded-lg appearance-none cursor-pointer slider-accent"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-primary/10 to-accent/10 rounded-lg p-3 border border-primary/20",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-zinc-300",children:[e.jsx("span",{className:"text-primary font-bold",children:"‚ö°"}),e.jsxs("span",{children:["Active for ",h.activeStartHour>h.activeEndHour?24-h.activeStartHour+h.activeEndHour:h.activeEndHour-h.activeStartHour," hours"]}),e.jsx("span",{className:"text-zinc-500",children:"|"}),e.jsxs("span",{children:["Quiet for ",h.activeStartHour>h.activeEndHour?h.activeStartHour-h.activeEndHour:24-(h.activeEndHour-h.activeStartHour)," hours"]})]})}),u&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 animate-shake",children:e.jsx("p",{className:"text-xs text-red-400 text-center",children:u})}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:Y,className:"flex-1 px-4 py-3 bg-gradient-to-r from-primary to-primaryHover text-white rounded-xl text-sm font-bold transition-all duration-200 hover:shadow-xl hover:shadow-primary/30 hover:-translate-y-0.5 active:translate-y-0",children:"üíæ Save Schedule"}),e.jsx("button",{onClick:q,className:"px-4 py-3 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded-xl text-sm font-medium transition-all duration-200 hover:-translate-y-0.5 active:translate-y-0",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-zinc-400",children:"Current Mode:"}),e.jsx("span",{className:`font-semibold px-2 py-0.5 rounded-full ${y.currentMode==="active"?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"}`,children:y.currentMode==="active"?"üî• Active":"üí§ Quiet"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-zinc-400",children:"Check Interval:"}),e.jsxs("span",{className:"text-zinc-200 font-medium",children:["Every ",y.currentInterval.toFixed(1)," min"]})]}),e.jsxs("div",{className:"border-t border-zinc-700/50 pt-2 mt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Active Hours:"}),e.jsxs("span",{className:"text-zinc-400",children:[y.activeStart," - ",y.activeEnd]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Active Interval:"}),e.jsxs("span",{className:"text-zinc-400",children:[y.activeInterval," min"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Quiet Interval:"}),e.jsxs("span",{className:"text-zinc-400",children:[y.quietInterval," min"]})]})]}),y.nextTransition&&e.jsx("div",{className:"border-t border-zinc-700/50 pt-2 mt-2",children:e.jsxs("span",{className:"text-zinc-500",children:["Next mode switch in ",Math.round(y.nextTransition)," min"]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-background to-zinc-900 rounded-xl p-4 border border-zinc-800 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`relative p-3 rounded-xl ${d?"bg-orange-500/10":"bg-green-500/10"}`,children:[e.jsx("span",{className:"text-2xl",children:d?"üîï":"üîî"}),!d&&e.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-zinc-100",children:"Notification Status"}),e.jsx("p",{className:`text-xs font-medium ${d?"text-orange-400":"text-green-400"}`,children:d?"Muted":"Active & Monitoring"})]})]}),d?e.jsx("button",{onClick:T,className:"px-3 py-2 bg-green-500/20 hover:bg-green-500/30 text-green-400 border border-green-500/30 rounded-lg text-xs font-medium transition-all duration-200 hover:-translate-y-0.5",children:"Unmute"}):e.jsx("button",{onClick:N,className:"px-3 py-2 bg-orange-500/20 hover:bg-orange-500/30 text-orange-400 border border-orange-500/30 rounded-lg text-xs font-medium transition-all duration-200 hover:-translate-y-0.5",children:"Mute 24h"})]}),d&&m&&e.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-lg p-2 mt-2",children:e.jsxs("p",{className:"text-xs text-orange-300 text-center",children:["‚è∏Ô∏è Muted until ",e.jsx("span",{className:"font-bold",children:m})," UTC"]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-primary/5 to-accent/5 rounded-xl p-4 border border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-lg",children:"‚ú®"}),e.jsx("h3",{className:"text-sm font-semibold text-zinc-100",children:"Notification Features"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary mt-0.5",children:"üéØ"}),e.jsxs("p",{className:"text-xs text-zinc-400",children:[e.jsx("span",{className:"text-zinc-300 font-medium",children:"Friend Activity:"})," Get notified when friends solve problems"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-secondary mt-0.5",children:"üî•"}),e.jsxs("p",{className:"text-xs text-zinc-400",children:[e.jsx("span",{className:"text-zinc-300 font-medium",children:"Milestones:"})," Celebrate 7, 30, and 100 day streaks"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-accent mt-0.5",children:"‚ö°"}),e.jsxs("p",{className:"text-xs text-zinc-400",children:[e.jsx("span",{className:"text-zinc-300 font-medium",children:"Smart Batching:"})," Max 1 notification per friend per day"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-orange-500 mt-0.5",children:"üìä"}),e.jsxs("p",{className:"text-xs text-zinc-400",children:[e.jsx("span",{className:"text-zinc-300 font-medium",children:"Gap Analysis:"})," See ranking changes and progress updates"]})]})]})]}),n?.lastNotified&&Object.keys(n.lastNotified).length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-background to-zinc-900 rounded-xl p-4 border border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-lg",children:"üìú"}),e.jsx("h3",{className:"text-sm font-semibold text-zinc-100",children:"Recent Notifications"}),e.jsx("span",{className:"ml-auto text-xs text-zinc-500 bg-zinc-800 px-2 py-0.5 rounded-full",children:Object.keys(n.lastNotified).length})]}),e.jsx("div",{className:"notification-scroll",style:{maxHeight:"160px",overflowY:"auto"},children:e.jsx("div",{className:"space-y-2",children:Object.entries(n.lastNotified).map(([l,x])=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-background/50 rounded-lg hover:bg-background transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),e.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:l})]}),e.jsx("span",{className:"text-xs text-zinc-500",children:x})]},l))})})]})]})})]})}):null}function vs({notifications:t,onDismiss:s}){const n=t&&t.length>0,a=()=>{t&&t.length>0&&s(t[0].id)};if(!n||!t||t.length===0)return null;const r=t[0],i=t.length,d=()=>{switch(r.type){case"new_submission":case"solved_today":return e.jsx(Ee,{className:"w-8 h-8 text-primary"});case"milestone":return e.jsx(le,{className:"w-8 h-8 text-orange-500"});case"streak_at_risk":return e.jsx(ae,{className:"w-8 h-8 text-yellow-500"});default:return e.jsx(he,{className:"w-8 h-8 text-primary"})}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 animate-fade-in",onClick:a}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:e.jsx("div",{className:"pointer-events-auto animate-scale-in-center",children:e.jsxs("div",{className:"bg-surface border-2 border-primary/30 rounded-3xl shadow-2xl p-8 w-[340px] relative",children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-text-muted hover:text-text-main transition-colors p-1 hover:bg-surfaceHover rounded-lg",children:e.jsx(be,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center",children:d()})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg text-text-main mb-2",children:r.username}),e.jsx("div",{className:"text-sm text-text-muted mb-6",children:r.message}),i>1&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 rounded-full text-xs text-primary font-semibold mb-4",children:[e.jsx(he,{className:"w-3 h-3"}),i-1," more notification",i-1>1?"s":""]}),e.jsx("button",{onClick:a,className:"w-full py-3 bg-primary hover:bg-primaryHover text-inverted font-semibold rounded-xl transition-all duration-200 active:scale-95",children:"Got it!"})]})]})})})]})}function js({onVideoEnd:t,showLoadingMessage:s=!1}){const[n,a]=p.useState(!1),[r,i]=p.useState(!1);p.useEffect(()=>{const b=setTimeout(()=>{t()},5e3);return()=>clearTimeout(b)},[t]);const d=()=>{t()},f=()=>{console.warn("Failed to load splash video, ending splash screen early"),i(!0),t()};return e.jsx("div",{className:"fixed inset-0 z-[100] bg-background flex items-center justify-center overflow-hidden",children:r?null:e.jsx("video",{autoPlay:!0,muted:!0,playsInline:!0,onCanPlay:()=>a(!0),onEnded:d,onError:f,className:"w-full h-full object-cover",style:{opacity:n?1:0,transition:"opacity 0.3s ease-in-out"},children:e.jsx("source",{src:"User_Dislikes_Generated_Video.mp4",type:"video/mp4"})})})}function Ns(t,s,n){if(!t||!s||!n)return 0;const a=typeof t=="string"?JSON.parse(t):t,r=typeof s=="string"?JSON.parse(s):s,i=Te(a),d=Te(r);if(i.size===0||d.size===0)return 0;const f=new Set;for(const u of i)d.has(u)&&u>=n&&f.add(u);if(f.size===0)return 0;const m=Array.from(f).sort((u,w)=>w.localeCompare(u)),b=new Date,y=b.toISOString().split("T")[0],k=new Date(b);k.setUTCDate(k.getUTCDate()-1);const g=k.toISOString().split("T")[0],c=m[0];if(c!==y&&c!==g)return 0;let h=0,o=new Date(c+"T00:00:00Z");for(let u=0;u<m.length;u++){const w=o.toISOString().split("T")[0];if(m[u]===w)h++,o.setUTCDate(o.getUTCDate()-1);else break}return h}function Te(t){const s=new Set;return!t||typeof t!="object"||Object.entries(t).forEach(([n,a])=>{if(a>0){const i=new Date(parseInt(n)*1e3).toISOString().split("T")[0];s.add(i)}}),s}function ws(t){if(!t)return console.log("No submission calendar"),!1;console.log("Submission calendar keys sample:",Object.keys(t).slice(-10));const s=new Date,n=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate())),a=Math.floor(n.getTime()/1e3).toString();console.log("Today timestamp:",a,"Today date:",n),console.log("Value for today:",t[a]);const r=t[a]&&parseInt(t[a])>0;return console.log("Has today submission:",r),r}function ks(t){if(!t)return null;const s=Object.keys(t).map(n=>parseInt(n)).filter(n=>t[n.toString()]>0).sort((n,a)=>a-n);return s.length===0?null:new Date(s[0]*1e3)}function Ss(t){if(!t)return"Never";const n=new Date-t,a=Math.floor(n/(1e3*60*60*24));return a===0?"Today":a===1?"Yesterday":a<7?`${a} days ago`:a<30?`${Math.floor(a/7)} weeks ago`:a<365?`${Math.floor(a/30)} months ago`:`${Math.floor(a/365)} years ago`}function Cs({friend:t,isExpanded:s,onClick:n,isCurrentUser:a,mySubmissionCalendar:r,timeFilter:i="all",rank:d=0}){const[f,m]=p.useState(!1),[b,y]=p.useState(!1),[k,g]=p.useState(null),[c,h]=p.useState(0),o=p.useMemo(()=>{const S=t?.recentSubmissions;if(!S||!Array.isArray(S)||S.length===0)return null;const I=[...S].sort((A,Q)=>Q.timestamp-A.timestamp)[0],E=new Date().getTime(),K=parseInt(I.timestamp)*1e3,V=E-K,U=Math.floor(V/(1e3*60*60)),F=Math.floor(V/(1e3*60*60*24));if(F===0){if(U===0){const A=Math.floor(V/6e4);return A<60?`${A} min${A!==1?"s":""} ago`:`${U} hour ago`}return`${U} hour${U!==1?"s":""} ago`}else{if(F===1)return"Yesterday";if(F<7)return`${F} days ago`;if(F<30){const A=Math.floor(F/7);return`${A} week${A!==1?"s":""} ago`}else{const A=Math.floor(F/30);return`${A} month${A!==1?"s":""} ago`}}},[t?.recentSubmissions]);if(!t||!t.profile||!t.stats)return null;const{profile:u,stats:w,contest:C,badges:v,recentSubmissions:N,submissionCalendar:T,friendshipStartDate:Y,contestRanking:q}=t,l=a?w.streak||0:r&&T&&Y?Ns(r,T,Y):0,x=S=>S===1?"ü•á":S===2?"ü•à":S===3?"ü•â":`#${S}`,_=(S=0)=>{if(!T)return null;try{const M=T;if(!M||typeof M!="object")return null;const I=new Date,E=new Date(Date.UTC(I.getFullYear(),I.getMonth(),I.getDate())),K=new Date(E.getFullYear(),E.getMonth()-S,1),V=K.getFullYear(),U=K.getMonth(),F=K.toLocaleDateString("en-US",{month:"long"}),A=new Date(V,U,1).getDay(),Q=new Date(V,U+1,0).getDate(),W=[];let B=[];for(let z=0;z<A;z++)B.push(null);for(let z=1;z<=Q;z++){const J=new Date(V,U,z),X=new Date(Date.UTC(J.getFullYear(),J.getMonth(),J.getDate())),P=Math.floor(X.getTime()/1e3).toString(),R=parseInt(M[P])||0,O=J.toDateString()===I.toDateString();B.push({date:J,day:z,count:R,dateStr:P,isToday:O}),B.length===7&&(W.push(B),B=[])}if(B.length>0){for(;B.length<7;)B.push(null);W.push(B)}return{monthName:F,year:V,weeks:W}}catch(M){return console.error("Error generating calendar data:",M),null}},D=S=>S===0?0:S<=2?1:S<=4?2:S<=6?3:4,$=(S,M=!1)=>{const I=D(S),E=["bg-surfaceHover border-surfaceHover","bg-secondary/40 border-secondary/60 shadow-sm","bg-secondary/60 border-secondary/80 shadow","bg-secondary/80 border-secondary shadow-md","bg-secondary border-secondary shadow-lg"];return M?E[I]+" ring-2 ring-primary/80 ring-offset-1 ring-offset-background":E[I]};return e.jsxs("div",{onClick:n,className:`relative bg-surface rounded-3xl shadow-md border-2 transition-all duration-300 cursor-pointer hover:shadow-lg hover:scale-[1.01] ${a?"border-accent/30 bg-gradient-to-br from-accent/10 to-surface ring-1 ring-accent/20":"border-surfaceHover/50"} ${s?"ring-2 ring-primary/60 shadow-2xl":""}`,children:[t.submissionCalendar&&ws(t.submissionCalendar)&&e.jsx("div",{className:"absolute -top-1 -right-1 z-10 bg-secondary text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-lg animate-pulse pointer-events-none",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(le,{className:"w-3 h-3"})," ACTIVE"]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl font-bold min-w-[36px] text-center drop-shadow-sm",children:x(d)}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:u.avatar||"https://via.placeholder.com/40",alt:u.username,className:"w-10 h-10 rounded-full border-2 border-surface shadow-md object-cover"}),d<=3&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-primary rounded-full border-2 border-surface text-inverted text-xs flex items-center justify-center shadow-sm",children:e.jsx($e,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-base text-text-main truncate",children:u.username}),a&&e.jsx("span",{className:"px-2 py-0.5 bg-accent text-inverted text-[10px] font-bold rounded-full",children:"YOU"}),e.jsx("a",{href:`https://leetcode.com/${u.username}`,target:"_blank",rel:"noopener noreferrer",onClick:S=>S.stopPropagation(),className:"text-text-muted hover:text-primary transition-colors",title:"View LeetCode Profile",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M13.483 0a1.374 1.374 0 0 0-.961.438L7.116 6.226l-3.854 4.126a5.266 5.266 0 0 0-1.209 2.104 5.35 5.35 0 0 0-.125.513 5.527 5.527 0 0 0 .062 2.362 5.83 5.83 0 0 0 .349 1.017 5.938 5.938 0 0 0 1.271 1.818l4.277 4.193.039.038c2.248 2.165 5.852 2.133 8.063-.074l2.396-2.392c.54-.54.54-1.414.003-1.955a1.378 1.378 0 0 0-1.951-.003l-2.396 2.392a3.021 3.021 0 0 1-4.205.038l-.02-.019-4.276-4.193c-.652-.64-.972-1.469-.948-2.263a2.68 2.68 0 0 1 .066-.523 2.545 2.545 0 0 1 .619-1.164L9.13 8.114c1.058-1.134 3.204-1.27 4.43-.278l3.501 2.831c.593.48 1.461.387 1.939-.207a1.384 1.384 0 0 0-.207-1.943l-3.5-2.831c-.8-.647-1.766-1.045-2.774-1.202l2.015-2.158A1.384 1.384 0 0 0 13.483 0zm-2.866 12.815a1.38 1.38 0 0 0-1.38 1.382 1.38 1.38 0 0 0 1.38 1.382H20.79a1.38 1.38 0 0 0 1.38-1.382 1.38 1.38 0 0 0-1.38-1.382z"})})})]}),u.realName&&e.jsx("p",{className:"text-xs text-text-muted truncate",children:u.realName}),e.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[e.jsx("span",{className:"text-[10px] text-text-muted",children:"üïí"}),e.jsx("span",{className:"text-[10px] text-text-muted",children:Ss(ks(T))})]}),(u.ranking||q?.globalRanking)&&e.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[e.jsx("span",{className:"text-[10px] text-text-muted",children:"üåç"}),e.jsxs("span",{className:"text-[10px] font-semibold text-primary",children:["Rank #",u.ranking?.toLocaleString()||q?.globalRanking?.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-primary to-primaryHover text-inverted px-3 py-2 rounded-full shadow-lg shadow-primary/20",children:[e.jsx(le,{className:"w-5 h-5 text-orange-500"}),e.jsx("span",{className:"text-base font-bold",children:l})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-4 gap-2",children:[e.jsxs("div",{className:"text-center py-2 bg-leetcode-easy/10 rounded-2xl border border-leetcode-easy/20",children:[e.jsx("div",{className:"text-base font-bold text-leetcode-easy",children:w.easy||0}),e.jsx("div",{className:"text-[10px] text-text-muted font-medium",children:"Easy"})]}),e.jsxs("div",{className:"text-center py-2 bg-leetcode-medium/10 rounded-2xl border border-leetcode-medium/20",children:[e.jsx("div",{className:"text-base font-bold text-leetcode-medium",children:w.medium||0}),e.jsx("div",{className:"text-[10px] text-text-muted font-medium",children:"Medium"})]}),e.jsxs("div",{className:"text-center py-2 bg-leetcode-hard/10 rounded-2xl border border-leetcode-hard/20",children:[e.jsx("div",{className:"text-base font-bold text-leetcode-hard",children:w.hard||0}),e.jsx("div",{className:"text-[10px] text-text-muted font-medium",children:"Hard"})]}),e.jsxs("div",{className:"text-center py-2 bg-surfaceHover rounded-2xl border border-surfaceHover",children:[e.jsx("div",{className:"text-base font-bold text-text-main",children:w.total||0}),e.jsx("div",{className:"text-[10px] text-text-muted font-medium",children:i==="week"?"This Week":i==="month"?"This Month":"Total"})]})]}),i!=="all"&&w._filteredByTime&&e.jsx("div",{className:"mt-2 text-center text-[10px] text-text-muted",children:i==="week"?"üìÖ Showing problems solved this week (Mon-Sun)":"üìÖ Showing problems solved this month"}),(o||N&&N.length>0)&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{onClick:S=>{S.stopPropagation(),y(!b)},className:"px-2 py-2 bg-primary/10 hover:bg-primary/20 rounded-xl border border-primary/30 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-semibold text-primary flex items-center gap-1.5",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Submissions"]}),e.jsx("svg",{className:`w-5 h-5 text-primary transition-transform duration-200 ${b?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),b&&e.jsxs("div",{className:"mt-2 space-y-2 animate-slide-up",children:[o&&e.jsx("div",{className:"px-2 py-1.5 bg-background/50 rounded-xl border border-surfaceHover",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Last submission:"}),e.jsx("span",{className:"font-semibold text-text-main",children:o})]})}),N&&N.length>0&&e.jsxs("div",{className:"px-2 py-1.5 bg-background/50 rounded-xl border border-surfaceHover",children:[e.jsxs("div",{onClick:S=>{S.stopPropagation(),m(!f)},className:"flex items-center justify-between cursor-pointer hover:bg-surfaceHover/30 -mx-2 px-2 py-1 rounded-lg transition-colors",children:[e.jsxs("div",{className:"text-xs text-text-muted",children:["Recent Submissions (",N.length,")"]}),e.jsx("svg",{className:`w-4 h-4 text-text-muted transition-transform duration-200 ${f?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f&&e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto mt-2 animate-slide-up scrollbar-hide",children:N.slice(0,5).map((S,M)=>e.jsxs("a",{href:`https://leetcode.com/problems/${S.titleSlug||S.title.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}/`,target:"_blank",rel:"noopener noreferrer",onClick:I=>I.stopPropagation(),className:"block text-xs border-l-2 border-surfaceHover hover:border-primary pl-2 py-1 hover:bg-surface rounded transition-all",children:[e.jsx("div",{className:"font-medium text-text-main hover:text-primary transition-colors",children:S.title}),e.jsxs("div",{className:"text-text-muted flex gap-2 mt-1",children:[e.jsx("span",{className:`
                                ${S.statusDisplay==="Accepted"?"text-secondary":"text-leetcode-hard"}
                              `,children:S.statusDisplay}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:S.lang}),S.runtime&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:S.runtime})]})]})]},M))})]})]})]})]}),s&&e.jsxs("div",{className:"border-t border-surfaceHover p-4 bg-surfaceHover/30 space-y-4 animate-slide-up",children:[C&&C.rating>0&&e.jsxs("div",{className:"bg-surface p-3 rounded-xl border border-surfaceHover shadow-sm",children:[e.jsx("h4",{className:"font-semibold text-sm mb-2 text-text-main",children:"Contest Stats"}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-text-muted",children:"Rating:"}),e.jsx("span",{className:"ml-1 font-semibold text-primary",children:C.rating})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-muted",children:"Attended:"}),e.jsx("span",{className:"ml-1 font-semibold text-text-main",children:C.attended})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-muted",children:"Rank:"}),e.jsxs("span",{className:"ml-1 font-semibold text-text-main",children:["#",C.ranking?.toLocaleString()]})]})]})]}),T&&(()=>{const S=_(c);return S?e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-4 rounded-xl border border-surfaceHover shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üìÖ"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm text-text-main",children:"Activity Calendar"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Browse monthly submissions"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-background/60 px-2 py-1.5 rounded-lg border border-surfaceHover/50",children:[e.jsx("span",{className:"text-[9px] text-text-muted mr-1",children:"Less"}),[0,1,2,3,4].map(M=>e.jsx("div",{className:`w-[10px] h-[10px] rounded-[2px] border ${$(M*2)}`},M)),e.jsx("span",{className:"text-[9px] text-text-muted ml-1",children:"More"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{onClick:M=>{M.stopPropagation(),c<11&&h(c+1)},disabled:c>=11,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 border border-primary/30 disabled:opacity-30 disabled:cursor-not-allowed transition-all group",children:e.jsx("svg",{className:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-bold text-primary",children:[S.monthName," ",S.year]}),e.jsx("div",{className:"text-[10px] text-text-muted",children:(()=>{const M=S.weeks.flat().filter(I=>I&&I.count>0).reduce((I,E)=>I+E.count,0);return`${M} submission${M!==1?"s":""}`})()})]}),e.jsx("button",{onClick:M=>{M.stopPropagation(),c>0&&h(c-1)},disabled:c<=0,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 border border-primary/30 disabled:opacity-30 disabled:cursor-not-allowed transition-all group",children:e.jsx("svg",{className:"w-5 h-5 text-primary group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"bg-background/70 backdrop-blur-sm rounded-xl p-3 border border-surfaceHover/60",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((M,I)=>e.jsx("div",{className:"text-[9px] text-text-muted text-center font-semibold",children:M},I))}),S.weeks.map((M,I)=>e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:M.map((E,K)=>e.jsx("div",{className:`aspect-square rounded-md flex items-center justify-center text-[9px] font-bold transition-all duration-300 relative group ${E?`${$(E.count,E.isToday)} cursor-pointer hover:scale-125 hover:shadow-xl hover:z-20 ${k?.dateStr===E.dateStr?"scale-125 shadow-xl z-20":""}`:"bg-transparent"}`,onMouseEnter:()=>E&&g(E),onMouseLeave:()=>g(null),children:E&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`${E.count>0?"text-white font-bold drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]":"text-text-muted font-semibold"}`,children:E.day}),E.isToday&&e.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-1.5 h-1.5 bg-amber-400 rounded-full animate-pulse"})]})},K))},I))]}),k&&e.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gradient-to-br from-surface to-surfaceHover border-2 border-primary/40 rounded-xl px-4 py-3 shadow-2xl z-50 animate-fade-in pointer-events-none backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[k.isToday&&e.jsx("span",{className:"text-base",children:"‚≠ê"}),e.jsx("div",{className:"text-sm font-bold text-primary",children:k.count===0?"No activity":`${k.count} submission${k.count!==1?"s":""}`})]}),e.jsx("div",{className:"text-[11px] text-text-muted",children:k.date.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),k.isToday&&e.jsx("div",{className:"text-[10px] text-amber-400 font-semibold mt-1",children:"Today"})]})]}):null})(),v&&v.length>0&&e.jsxs("div",{className:"bg-surface p-3 rounded-xl border border-surfaceHover shadow-sm",children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2 text-text-main",children:["Badges (",v.length,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.slice(0,5).map(S=>e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1.5 bg-primary/10 border border-primary/20 rounded-lg text-xs text-primary hover:bg-primary/20 transition-colors",title:S.displayName,children:[S.icon?e.jsx("img",{src:S.icon,alt:S.displayName,className:"w-5 h-5 object-contain",onError:M=>{M.target.style.display="none",M.target.nextSibling.textContent="üèÖ "+M.target.nextSibling.textContent}}):e.jsx("span",{children:"üèÖ"}),e.jsx("span",{className:"max-w-[100px] truncate font-medium",children:S.displayName})]},S.id)),v.length>5&&e.jsxs("span",{className:"px-2 py-1 text-xs text-text-muted",children:["+",v.length-5," more"]})]})]}),!a&&e.jsx("button",{onClick:async S=>{if(S.stopPropagation(),window.confirm(`Remove ${u.username} from friends?`))try{console.log("Sending REMOVE_FRIEND message for:",u.username);const M=await chrome.runtime.sendMessage({type:"REMOVE_FRIEND",username:u.username});console.log("Remove friend response:",M),M&&M.success?setTimeout(()=>{window.location.reload()},100):alert(`Failed to remove friend: ${M?.error||"Unknown error"}`)}catch(M){console.error("Error removing friend:",M),alert("Failed to remove friend. Please try again.")}},className:"w-full py-2 bg-leetcode-hard/10 hover:bg-leetcode-hard/20 text-leetcode-hard font-semibold rounded-xl transition-all duration-300 text-sm border border-leetcode-hard/20 active:scale-95",children:"üóëÔ∏è Remove Friend"})]})]})}function Ms({friends:t,myData:s,myUsername:n}){const[a,r]=p.useState(null),[i,d]=p.useState("all"),f=c=>{if(!c)return!1;const h=typeof c=="string"?JSON.parse(c):c,o=new Date().toISOString().split("T")[0];for(const[u,w]of Object.entries(h))if(w>0&&new Date(parseInt(u)*1e3).toISOString().split("T")[0]===o)return!0;return!1},m=(c,h)=>{if(!c)return 0;try{const o=typeof c=="string"?JSON.parse(c):c,u=new Date;u.setHours(0,0,0,0);let w;if(h==="week"){w=new Date(u);const N=u.getDay(),T=N===0?6:N-1;w.setDate(u.getDate()-T)}else if(h==="month")w=new Date(u.getFullYear(),u.getMonth(),1);else return 0;w.setHours(0,0,0,0);const C=Math.floor(w.getTime()/1e3);let v=0;for(const[N,T]of Object.entries(o))parseInt(N)>=C&&T>0&&(v+=T);return v}catch(o){return console.error("Error calculating period problems:",o),0}},b=t.filter(c=>c.profile?.username!==n),y=s?[...b,s]:b,k=[...y].sort((c,h)=>{if(i==="all")return(h.stats?.total||0)-(c.stats?.total||0);if(i==="week"){const o=m(c.submissionCalendar,"week");return m(h.submissionCalendar,"week")-o}else if(i==="month"){const o=m(c.submissionCalendar,"month");return m(h.submissionCalendar,"month")-o}return 0}),g=c=>{!c||!c.profile||r(a?.profile?.username===c.profile.username?null:c)};return e.jsxs("div",{className:"bg-background",children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur-sm border-b border-surfaceHover px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d("all"),className:`flex-1 py-2 px-3 rounded-xl text-xs font-semibold transition-all ${i==="all"?"bg-primary text-inverted shadow-lg":"bg-surface text-text-muted hover:text-text-main"}`,children:"All Time"}),e.jsx("button",{onClick:()=>d("week"),className:`flex-1 py-2 px-3 rounded-xl text-xs font-semibold transition-all ${i==="week"?"bg-primary text-inverted shadow-lg":"bg-surface text-text-muted hover:text-text-main"}`,children:"This Week"}),e.jsx("button",{onClick:()=>d("month"),className:`flex-1 py-2 px-3 rounded-xl text-xs font-semibold transition-all ${i==="month"?"bg-primary text-inverted shadow-lg":"bg-surface text-text-muted hover:text-text-main"}`,children:"This Month"})]}),y.filter(c=>c&&c.submissionCalendar&&f(c.submissionCalendar)).length>0&&e.jsxs("div",{className:"mt-2 px-3 py-1.5 bg-secondary/10 border border-secondary/30 rounded-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-lg animate-bounce",children:"üî•"}),e.jsxs("span",{className:"text-xs text-secondary font-semibold",children:[y.filter(c=>c&&c.submissionCalendar&&f(c.submissionCalendar)).length," ",y.filter(c=>c&&c.submissionCalendar&&f(c.submissionCalendar)).length===1?"person":"people"," solving today!"]})]})]}),k.length===0?e.jsx("div",{className:"p-8 text-center text-text-muted animate-fade-in",children:e.jsx("p",{children:"No friends to display"})}):e.jsx("div",{className:"p-4 space-y-2.5 animate-slide-up",children:k.filter(c=>c&&c.profile).map((c,h)=>{let o=c.stats;if(i!=="all"){const u=m(c.submissionCalendar,i);o={...c.stats,total:u,_filteredByTime:!0}}return e.jsx("div",{children:e.jsx(Cs,{friend:{...c,stats:o},rank:h+1,isExpanded:a?.profile?.username===c.profile.username,onClick:()=>g(c),isCurrentUser:n&&c.profile.username===n,mySubmissionCalendar:s?.submissionCalendar,timeFilter:i})},c.profile.username)})})]})}function Ds(t){const s=[];if(!t||!t.stats)return s;const{stats:n,submissionCalendar:a,recentSubmissions:r}=t,i=Ts(n);i&&s.push(i);const d=_s(a);d&&s.push(d);const f=Hs(a);f&&s.push(f);const m=$s(r);m&&s.push(m);const b=Es(n);return b&&s.push(b),s}function Ts(t){const{easy:s=0,medium:n=0,hard:a=0,total:r=0}=t;if(r===0)return null;const i=s/r*100,d=n/r*100,f=a/r*100;let m,b,y;return f>30?(m=`You're a challenge seeker! ${f.toFixed(0)}% of your solutions are Hard problems. üí™`,b="üî•",y="achievement"):d>50?(m=`Balanced approach! You focus on Medium problems (${d.toFixed(0)}%). Keep pushing! üìà`,b="‚öñÔ∏è",y="neutral"):i>60&&(m="Strong foundation with Easy problems! Ready to tackle more Medium challenges? üéØ",b="üí°",y="suggestion"),{message:m,icon:b,type:y,category:"Difficulty Preference"}}function _s(t){if(!t)return null;try{const s=typeof t=="string"?JSON.parse(t):t,n=new Date;n.setHours(0,0,0,0);let a=0;for(let f=0;f<7;f++){const m=new Date(n);m.setDate(m.getDate()-f);const b=Math.floor(m.getTime()/1e3).toString();s[b]>0&&a++}let r,i,d;return a===7?(r="Perfect week! You solved problems every day for 7 days straight! üåü",i="üéâ",d="achievement"):a>=5?(r=`Great consistency! ${a} active days this week. Keep it up! ‚ö°`,i="‚≠ê",d="achievement"):a>=3?(r=`${a} days active this week. Try to maintain regular practice! üí™`,i="ÔøΩ",d="neutral"):(r=`Only ${a} active days this week. Let's get back on track! üéØ`,i="üí°",d="suggestion"),{message:r,icon:i,type:d,category:"Weekly Consistency"}}catch{return null}}function Hs(t){if(!t)return null;try{const s=typeof t=="string"?JSON.parse(t):t,n=Array(7).fill(0),a=new Date;a.setHours(0,0,0,0);for(let m=0;m<30;m++){const b=new Date(a);b.setDate(b.getDate()-m);const y=Math.floor(b.getTime()/1e3).toString();if(s[y]>0){const k=b.getDay();n[k]++}}const r=Math.max(...n);if(r===0)return null;const i=n.indexOf(r),d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return{message:`Your most productive day is ${d[i]}! You've been most active on ${d[i]}s. üìÖ`,icon:"ÔøΩ",type:"neutral",category:"Best Solving Days"}}catch{return null}}function $s(t){if(!t||t.length===0)return null;const s=new Date;s.setHours(0,0,0,0);const n=new Date(s);n.setDate(s.getDate()-3);const a=t.filter(f=>new Date(f.timestamp*1e3)>=n).length;let r,i,d;return a>=5?(r=`On fire! ${a} submissions in the last 3 days! üî•`,i="üöÄ",d="achievement"):a>=2?(r=`Good momentum with ${a} recent submissions! Keep going! ÔøΩ`,i="‚ö°",d="neutral"):a===1?(r="Getting started! Let's build that momentum! ÔøΩ",i="üí°",d="suggestion"):(r="Time to get coding! Start with an easy problem to warm up! üåü",i="üí°",d="suggestion"),{message:r,icon:i,type:d,category:"Recent Activity"}}function Es(t){const{total:s=0}=t;if(s===0)return null;let n,a,r;return s>=1e3?(n=`LeetCode Master! Over ${s} problems solved! You're in the elite club! ÔøΩ`,a="üëë",r="achievement"):s>=500?(n="Halfway to 1000! Keep grinding, you're doing amazing! üéØ",a="üéñÔ∏è",r="achievement"):s>=100?(n=`Century club member! ${s} problems solved and counting! ÔøΩ`,a="ÔøΩ",r="achievement"):s>=50?(n=`Great progress! ${s} problems down. Next milestone: 100! üìä`,a="‚≠ê",r="neutral"):(n=`Building momentum! ${s} problems solved. Keep going! üöÄ`,a="üå±",r="neutral"),{message:n,icon:a,type:r,category:"Achievement Level"}}function As(t=[]){if(!t||t.length===0)return{topics:[],totalAttempts:0};const s=new Map;return t.forEach(a=>{const r=a.title||"Unknown",i=a.statusDisplay||"";s.has(r)||s.set(r,{title:r,attempts:0,accepted:0,difficulty:Ae()});const d=s.get(r);d.attempts++,i==="Accepted"&&d.accepted++}),{topics:Array.from(s.values()).map(a=>({...a,successRate:a.attempts>0?(a.accepted/a.attempts*100).toFixed(1):"0"})).sort((a,r)=>r.attempts-a.attempts).slice(0,10),totalAttempts:t.length}}function Ls(t=[]){if(!t||t.length===0)return{totalAttempts:0,accepted:0,successRate:0,byDifficulty:{easy:{accepted:0,total:0},medium:{accepted:0,total:0},hard:{accepted:0,total:0}}};const s={totalAttempts:t.length,accepted:0,byDifficulty:{easy:{accepted:0,total:0},medium:{accepted:0,total:0},hard:{accepted:0,total:0}}};return t.forEach(n=>{const a=n.statusDisplay==="Accepted";a&&s.accepted++;const r=Ae(n.title||"").toLowerCase();s.byDifficulty[r]&&(s.byDifficulty[r].total++,a&&s.byDifficulty[r].accepted++)}),s.successRate=s.totalAttempts>0?(s.accepted/s.totalAttempts*100).toFixed(1):0,s}function Is(t,s=[]){if(!t||s.length===0)return null;const n=t.stats||{total:0,easy:0,medium:0,hard:0},a=s.reduce((d,f)=>{const m=f.stats||{total:0,easy:0,medium:0,hard:0};return{total:d.total+m.total,easy:d.easy+m.easy,medium:d.medium+m.medium,hard:d.hard+m.hard,streak:d.streak+(f.streak||0)}},{total:0,easy:0,medium:0,hard:0,streak:0}),r=s.length,i={total:Math.round(a.total/r),easy:Math.round(a.easy/r),medium:Math.round(a.medium/r),hard:Math.round(a.hard/r),streak:Math.round(a.streak/r)};return{user:n,average:i,comparison:{total:n.total-i.total,easy:n.easy-i.easy,medium:n.medium-i.medium,hard:n.hard-i.hard,streak:(t.streak||0)-i.streak}}}function Ae(t){return"Medium"}function Fs({userData:t,friendsData:s=[]}){const[n,a]=p.useState([]),[r,i]=p.useState(null),[d,f]=p.useState(!1),[m,b]=p.useState(null),[y,k]=p.useState("insights"),[g]=p.useState(()=>new Date(Date.now()-10080*60*1e3)),c=(v,N="w-8 h-8")=>({flame:e.jsx(le,{className:N}),rocket:e.jsx(ge,{className:N}),zap:e.jsx(ie,{className:N}),star:e.jsx(je,{className:N}),lightbulb:e.jsx(gt,{className:N}),party:e.jsx(Ct,{className:N}),dumbbell:e.jsx(lt,{className:N}),crown:e.jsx(nt,{className:N}),medal:e.jsx(Nt,{className:N}),trophy:e.jsx(ze,{className:N}),scale:e.jsx(Et,{className:N}),sprout:e.jsx(zt,{className:N}),target:e.jsx(Ee,{className:N}),chart:e.jsx(pe,{className:N})})[v]||e.jsx(je,{className:N});if(p.useEffect(()=>{if(t){const v=Ds(t);a(v)}},[t]),!t)return e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl mb-3",children:"üìä"}),e.jsx("p",{className:"text-text-muted text-sm",children:"No data available"}),e.jsx("p",{className:"text-text-muted text-xs mt-1",children:"Add your LeetCode username to see analytics"})]})});const h=Ls(t.recentSubmissions||[]),o=As(t.recentSubmissions||[]),u=s.length>0?Is(t,s):null,w=(v,N)=>{N.stopPropagation(),b(v),f(!0)},C=async(v,N)=>{N.stopPropagation();const T=`üéØ My LeetCode Insight:

${v.icon} ${v.category}
${v.message}

#LeetCode #CodingJourney`;if(navigator.clipboard)try{await navigator.clipboard.writeText(T),alert("‚úì Insight copied to clipboard!")}catch(Y){console.error("Failed to copy:",Y)}};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-1 bg-surface border border-surfaceHover rounded-xl p-1",children:[e.jsx("button",{onClick:()=>k("insights"),className:`flex-1 py-2 px-3 rounded-lg text-xs font-semibold transition-all ${y==="insights"?"bg-primary text-white shadow-md":"text-text-muted hover:text-text-primary hover:bg-surfaceHover"}`,children:"üí° Insights"}),e.jsx("button",{onClick:()=>k("analytics"),className:`flex-1 py-2 px-3 rounded-lg text-xs font-semibold transition-all ${y==="analytics"?"bg-primary text-white shadow-md":"text-text-muted hover:text-text-primary hover:bg-surfaceHover"}`,children:"üìä Analytics"}),e.jsx("button",{onClick:()=>k("comparison"),className:`flex-1 py-2 px-3 rounded-lg text-xs font-semibold transition-all ${y==="comparison"?"bg-primary text-white shadow-md":"text-text-muted hover:text-text-primary hover:bg-surfaceHover"}`,children:"üë• vs Friends"})]}),y==="insights"&&e.jsx(e.Fragment,{children:n&&n.length>0?e.jsxs(e.Fragment,{children:[n.map((v,N)=>e.jsxs("div",{className:`
                    bg-surface border rounded-xl p-4 transition-all duration-300 cursor-pointer
                    ${v.type==="achievement"?"border-accent/40 hover:border-accent/60":""}
                    ${v.type==="neutral"?"border-primary/30 hover:border-primary/50":""}
                    ${v.type==="suggestion"?"border-leetcode-medium/30 hover:border-leetcode-medium/50":""}
                    ${r===N?"ring-2 ring-primary/50 scale-[1.02]":"hover:scale-[1.01]"}
                  `,onClick:()=>i(r===N?null:N),children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:c(v.icon,"w-8 h-8 text-primary")}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-semibold text-text-muted uppercase tracking-wide",children:v.category}),v.type==="achievement"&&e.jsx("span",{className:"text-xs bg-accent/20 text-accent px-2 py-0.5 rounded-full",children:"Achievement"}),v.type==="suggestion"&&e.jsx("span",{className:"text-xs bg-leetcode-medium/20 text-leetcode-medium px-2 py-0.5 rounded-full",children:"Tip"})]}),e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:v.message})]}),e.jsx("div",{className:`
                      text-text-muted transition-transform
                      ${r===N?"rotate-180":""}
                    `,children:"‚ñº"})]}),r===N&&e.jsx("div",{className:"mt-4 pt-4 border-t border-surfaceHover animate-slide-up",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:T=>w(v,T),className:"flex-1 py-2 bg-primary/10 hover:bg-primary/20 text-primary rounded-lg text-xs font-semibold transition-colors",children:"View Details"}),e.jsx("button",{onClick:T=>C(v,T),className:"flex-1 py-2 bg-accent/10 hover:bg-accent/20 text-accent rounded-lg text-xs font-semibold transition-colors",children:"Share"})]})})]},N)),e.jsx("div",{className:"bg-gradient-to-br from-primary/5 to-accent/5 border border-primary/20 rounded-xl p-4 text-center",children:e.jsx("p",{className:"text-xs text-text-muted mb-2",children:"üí° Insights update daily based on your solving patterns"})})]}):e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üìä"}),e.jsx("p",{className:"text-text-muted",children:"No insights available yet. Keep solving!"})]})}),y==="analytics"&&e.jsxs("div",{className:"space-y-3",children:[h&&e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"üéØ"}),e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Success Rate"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-surfaceHover rounded-lg p-3",children:[e.jsxs("div",{className:"text-2xl font-bold text-accent",children:[h.successRate,"%"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Overall"})]}),e.jsxs("div",{className:"bg-surfaceHover rounded-lg p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:h.accepted}),e.jsx("div",{className:"text-xs text-text-muted",children:"Accepted"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Easy"}),e.jsx("span",{className:"font-semibold text-leetcode-easy",children:h.byDifficulty.easy.total>0?`${(h.byDifficulty.easy.accepted/h.byDifficulty.easy.total*100).toFixed(0)}%`:"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Medium"}),e.jsx("span",{className:"font-semibold text-leetcode-medium",children:h.byDifficulty.medium.total>0?`${(h.byDifficulty.medium.accepted/h.byDifficulty.medium.total*100).toFixed(0)}%`:"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Hard"}),e.jsx("span",{className:"font-semibold text-leetcode-hard",children:h.byDifficulty.hard.total>0?`${(h.byDifficulty.hard.accepted/h.byDifficulty.hard.total*100).toFixed(0)}%`:"N/A"})]})]})]}),o&&o.topics.length>0&&e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"üìö"}),e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Topic Performance"})]}),e.jsx("div",{className:"space-y-2",children:o.topics.slice(0,5).map((v,N)=>e.jsxs("div",{className:"bg-surfaceHover rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("span",{className:"text-xs text-text-primary font-medium line-clamp-1 flex-1",children:v.title}),e.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${v.successRate>=80?"bg-green-500/20 text-green-400":v.successRate>=50?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:[v.successRate,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-text-muted",children:[e.jsxs("span",{children:[v.attempts," problems"]}),e.jsx("span",{children:"‚Ä¢"}),e.jsxs("span",{children:[v.accepted," solved"]})]}),e.jsx("div",{className:"w-full bg-surfaceHover rounded-full h-1 mt-2 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${v.successRate>=80?"bg-green-500":v.successRate>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${v.successRate}%`}})})]},N))})]}),!h&&!o&&e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üìä"}),e.jsx("p",{className:"text-text-muted text-sm",children:"No analytics data available yet"}),e.jsx("p",{className:"text-text-muted text-xs mt-1",children:"Start solving to see your stats!"})]})]}),y==="comparison"&&e.jsx("div",{className:"space-y-3",children:u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"üë•"}),e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"You vs Friends Average"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Total Problems"}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:u.user.total}),e.jsxs("div",{className:`text-xs font-semibold mt-1 ${u.comparison.total>=0?"text-accent":"text-leetcode-hard"}`,children:[u.comparison.total>=0?"+":"",u.comparison.total," vs avg"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Current Streak"}),e.jsx("div",{className:"text-2xl font-bold text-accent",children:t.streak||0}),e.jsxs("div",{className:`text-xs font-semibold mt-1 ${u.comparison.streak>=0?"text-accent":"text-leetcode-hard"}`,children:[u.comparison.streak>=0?"+":"",u.comparison.streak," vs avg"]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Easy"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-leetcode-easy",children:u.user.easy}),e.jsxs("span",{className:`text-[10px] ${u.comparison.easy>=0?"text-accent":"text-leetcode-hard"}`,children:["(",u.comparison.easy>=0?"+":"",u.comparison.easy,")"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Medium"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-leetcode-medium",children:u.user.medium}),e.jsxs("span",{className:`text-[10px] ${u.comparison.medium>=0?"text-accent":"text-leetcode-hard"}`,children:["(",u.comparison.medium>=0?"+":"",u.comparison.medium,")"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Hard"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-leetcode-hard",children:u.user.hard}),e.jsxs("span",{className:`text-[10px] ${u.comparison.hard>=0?"text-accent":"text-leetcode-hard"}`,children:["(",u.comparison.hard>=0?"+":"",u.comparison.hard,")"]})]})]})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-accent/5 to-primary/5 border border-accent/20 rounded-xl p-4 text-center",children:e.jsx("p",{className:"text-xs text-text-muted",children:u.comparison.total>=0?"üéâ You're ahead of the average! Keep pushing!":"üí™ Keep grinding! You'll catch up in no time!"})})]}):e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-xl p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üë•"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Add friends to see comparisons"}),e.jsx("p",{className:"text-text-muted text-xs mt-1",children:"Compare your progress with others!"})]})}),d&&m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto scrollbar-hide",onClick:()=>f(!1),children:e.jsxs("div",{className:"bg-surface border border-primary/30 rounded-2xl p-6 max-w-2xl w-full shadow-2xl animate-bounce-in my-8",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[c(m.icon,"w-12 h-12 text-primary"),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-1",children:m.category}),m.type==="achievement"&&e.jsx("span",{className:"text-xs bg-accent/20 text-accent px-2 py-1 rounded-full",children:"üèÜ Achievement"}),m.type==="suggestion"&&e.jsx("span",{className:"text-xs bg-leetcode-medium/20 text-leetcode-medium px-2 py-1 rounded-full",children:"üí° Tip"})]}),e.jsx("button",{onClick:()=>f(!1),className:"text-text-muted hover:text-text-primary transition-colors text-xl",children:"‚úï"})]}),e.jsx("div",{className:"bg-surfaceHover rounded-xl p-4 mb-4",children:e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:m.message})}),m.category==="Difficulty Preference"&&e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"bg-leetcode-easy/10 border border-leetcode-easy/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Easy"}),e.jsx("div",{className:"text-xl font-bold text-leetcode-easy",children:t?.stats?.easy||0}),e.jsxs("div",{className:"text-[10px] text-text-muted mt-1",children:[((t?.stats?.easy||0)/(t?.stats?.total||1)*100).toFixed(0),"% of total"]})]}),e.jsxs("div",{className:"bg-leetcode-medium/10 border border-leetcode-medium/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Medium"}),e.jsx("div",{className:"text-xl font-bold text-leetcode-medium",children:t?.stats?.medium||0}),e.jsxs("div",{className:"text-[10px] text-text-muted mt-1",children:[((t?.stats?.medium||0)/(t?.stats?.total||1)*100).toFixed(0),"% of total"]})]}),e.jsxs("div",{className:"bg-leetcode-hard/10 border border-leetcode-hard/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-text-muted mb-1",children:"Hard"}),e.jsx("div",{className:"text-xl font-bold text-leetcode-hard",children:t?.stats?.hard||0}),e.jsxs("div",{className:"text-[10px] text-text-muted mt-1",children:[((t?.stats?.hard||0)/(t?.stats?.total||1)*100).toFixed(0),"% of total"]})]})]}),m.category==="Weekly Consistency"&&e.jsxs("div",{className:"bg-primary/10 border border-primary/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-primary mb-3",children:"üìä Weekly Breakdown"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-text-muted",children:"Target: 5+ days/week"}),e.jsx("span",{className:"text-xs font-bold text-primary",children:"Current: Check your calendar"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-text-muted",children:["Streak: ",t?.stats?.streak||0," days"]}),e.jsx("span",{className:"text-xs font-bold text-accent",children:"üî• Keep it going!"})]})]})]}),m.category==="Best Solving Days"&&e.jsxs("div",{className:"bg-accent/10 border border-accent/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-accent mb-3",children:"üìÖ Optimize Your Schedule"}),e.jsx("p",{className:"text-xs text-text-muted mb-3",children:"You're most productive at a certain time. Block this time for deep work and problem-solving practice."}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].slice(0,7).map((v,N)=>e.jsxs("div",{className:"bg-surface rounded p-2 text-center border border-surfaceHover",children:[e.jsx("div",{className:"text-[10px] font-semibold text-text-muted",children:v}),e.jsx("div",{className:"text-xs mt-1 h-6 flex items-center justify-center",children:N===new Date().getDay()?"‚óè":"‚óã"})]},N))})]}),m.category==="Recent Activity"&&e.jsxs("div",{className:"bg-leetcode-medium/10 border border-leetcode-medium/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-leetcode-medium mb-3",children:"üéØ Recent Submissions"}),t?.recentSubmissions&&t.recentSubmissions.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Last 7 days:"}),e.jsxs("span",{className:"font-bold",children:[t.recentSubmissions.filter(v=>new Date(v.timestamp*1e3)>g).length," submissions"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-text-muted",children:"Acceptance rate:"}),e.jsxs("span",{className:"font-bold",children:[(t.recentSubmissions.filter(v=>v.statusDisplay==="Accepted").length/t.recentSubmissions.length*100).toFixed(1),"%"]})]})]}):e.jsx("p",{className:"text-xs text-text-muted",children:"No recent activity yet. Start solving problems!"})]}),m.category==="Achievement Level"&&e.jsxs("div",{className:"bg-accent/10 border border-accent/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-accent mb-3",children:"üéñÔ∏è Progress Metrics"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-text-muted",children:"Total Solved:"}),e.jsx("span",{className:"text-sm font-bold text-accent",children:t?.stats?.total||0})]}),e.jsx("div",{className:"w-full bg-surfaceHover rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-accent to-primary h-full transition-all",style:{width:`${Math.min((t?.stats?.total||0)/1e3*100,100)}%`}})}),e.jsxs("div",{className:"flex justify-between text-[10px] text-text-muted",children:[e.jsx("span",{children:"0"}),e.jsx("span",{children:"1000 (Master)"})]})]})]}),m.type==="suggestion"&&e.jsxs("div",{className:"bg-primary/10 border border-primary/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-primary mb-2",children:"üí° Actionable Tips"}),e.jsxs("ul",{className:"text-xs text-text-muted space-y-1.5",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚úì"}),e.jsx("span",{children:"Set a daily goal: Complete at least 1 problem every day"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚úì"}),e.jsx("span",{children:"Use the problem queue to track what to solve next"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚úì"}),e.jsx("span",{children:"Review solutions before moving to the next problem"})]})]})]}),m.type==="achievement"&&e.jsxs("div",{className:"bg-accent/10 border border-accent/30 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-accent mb-2",children:"üéâ Next Steps"}),e.jsxs("ul",{className:"text-xs text-text-muted space-y-1.5",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚Üí"}),e.jsx("span",{children:"Maintain this momentum and consistency"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚Üí"}),e.jsx("span",{children:"Challenge yourself with harder problems"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"‚Üí"}),e.jsx("span",{children:"Share your progress with friends for motivation"})]})]})]}),e.jsx("button",{onClick:()=>f(!1),className:"w-full py-3 bg-primary hover:bg-primaryHover text-inverted rounded-xl font-semibold transition-colors",children:"Close"})]})})]})}function zs({submissionCalendar:t}){const[s,n]=p.useState("bar");if(!t)return e.jsxs("div",{className:"text-center py-8 text-text-muted",children:[e.jsx("span",{className:"text-3xl mb-2 block",children:"üìä"}),e.jsx("p",{className:"text-sm",children:"No data available"})]});const r=(()=>{const g=[],c=new Date;for(let h=29;h>=0;h--){const o=new Date(c);o.setDate(c.getDate()-h);const u=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate())),w=Math.floor(u.getTime()/1e3).toString(),C=parseInt(t[w])||0;g.push({date:o,label:o.getDate().toString(),count:C,isToday:h===0})}return g})(),i=Math.max(...r.map(g=>g.count),1),d=320,f=120,m={top:10,right:10,bottom:20,left:25},b=d-m.left-m.right,y=f-m.top-m.bottom,k=b/r.length;return e.jsxs("div",{className:"bg-gradient-to-br from-surface to-surfaceHover/30 p-5 rounded-xl border border-surfaceHover shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"üìà"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-text-main",children:"Progress Trend"}),e.jsx("p",{className:"text-[10px] text-text-muted",children:"Last 30 days"})]})]}),e.jsxs("div",{className:"flex gap-1 bg-background/50 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>n("bar"),className:`px-2 py-1 text-[10px] font-semibold rounded transition-all ${s==="bar"?"bg-primary text-white":"text-text-muted hover:text-text-main"}`,children:"Bar"}),e.jsx("button",{onClick:()=>n("line"),className:`px-2 py-1 text-[10px] font-semibold rounded transition-all ${s==="line"?"bg-primary text-white":"text-text-muted hover:text-text-main"}`,children:"Line"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-6 top-1/2 -translate-y-1/2 -rotate-90 origin-center",children:e.jsx("span",{className:"text-[9px] font-semibold text-text-muted uppercase tracking-wide",children:"Submissions"})}),e.jsxs("svg",{width:d,height:f,className:"overflow-visible",children:[[0,Math.ceil(i/2),i].map((g,c)=>e.jsx("text",{x:m.left-5,y:m.top+y-g/i*y,textAnchor:"end",className:"text-[8px] fill-text-muted",dominantBaseline:"middle",children:g},c)),[0,.5,1].map((g,c)=>e.jsx("line",{x1:m.left,y1:m.top+y*(1-g),x2:m.left+b,y2:m.top+y*(1-g),stroke:"currentColor",strokeWidth:"1",className:"stroke-surfaceHover opacity-30",strokeDasharray:"2,2"},c)),s==="bar"?e.jsx(e.Fragment,{children:r.map((g,c)=>{const h=g.count/i*y,o=m.left+c*k,u=m.top+y-h;return e.jsxs("g",{children:[e.jsx("rect",{x:o+k*.15,y:u,width:k*.7,height:h||2,fill:"currentColor",className:`${g.isToday?"fill-primary":g.count>0?"fill-primary/70":"fill-surfaceHover"} transition-all duration-300 hover:fill-primary`,rx:"2"}),c%5===0&&e.jsx("text",{x:o+k/2,y:f-5,textAnchor:"middle",className:"text-[8px] fill-text-muted",children:g.label})]},c)})}):e.jsxs(e.Fragment,{children:[e.jsx("path",{d:r.map((g,c)=>{const h=m.left+c*k+k/2,o=m.top+y-g.count/i*y;return`${c===0?"M":"L"} ${h} ${o}`}).join(" "),fill:"none",stroke:"currentColor",strokeWidth:"2",className:"stroke-primary"}),r.map((g,c)=>{const h=m.left+c*k+k/2,o=m.top+y-g.count/i*y;return e.jsxs("g",{children:[e.jsx("circle",{cx:h,cy:o,r:g.isToday?4:g.count>0?3:2,fill:"currentColor",className:`${g.isToday?"fill-primary":g.count>0?"fill-primary/70":"fill-surfaceHover"} transition-all duration-300 hover:fill-primary hover:r-5`}),c%5===0&&e.jsx("text",{x:h,y:f-5,textAnchor:"middle",className:"text-[8px] fill-text-muted",children:g.label})]},c)})]})]}),e.jsx("div",{className:"text-center mt-1",children:e.jsx("span",{className:"text-[9px] font-semibold text-text-muted uppercase tracking-wide",children:"Days"})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-bold text-primary",children:r.reduce((g,c)=>g+c.count,0)}),e.jsx("div",{className:"text-[9px] text-text-muted",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-bold text-primary",children:(r.reduce((g,c)=>g+c.count,0)/30).toFixed(1)}),e.jsx("div",{className:"text-[9px] text-text-muted",children:"Avg/Day"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-bold text-primary",children:Math.max(...r.map(g=>g.count))}),e.jsx("div",{className:"text-[9px] text-text-muted",children:"Peak"})]})]})]})}function Us(){const[t,s]=p.useState(!1),[n,a]=p.useState(""),[r,i]=p.useState("leetcode-solutions"),[d,f]=p.useState({total:0,pending:0,failed:0}),[m,b]=p.useState([]),[y,k]=p.useState("device"),[g,c]=p.useState(!1),[h,o]=p.useState(""),[u,w]=p.useState(""),[C,v]=p.useState("idle"),[N,T]=p.useState(""),[Y,q]=p.useState(""),[l,x]=p.useState(0),[_,D]=p.useState(!1),[$,S]=p.useState(""),[M,I]=p.useState(!1),[E,K]=p.useState(!1),[V,U]=p.useState(!1),[F,A]=p.useState(!1),Q=p.useRef(null),W=p.useRef(null);p.useEffect(()=>(z(),J(),B(),()=>{Q.current&&clearInterval(Q.current),W.current&&clearInterval(W.current)}),[]);const B=async()=>{try{const L=(await chrome.storage.local.get("github_device_flow_pending")).github_device_flow_pending;L&&L.expiresAt>Date.now()?(T(L.userCode),q(L.verificationUri),x(Math.floor((L.expiresAt-Date.now())/1e3)),v("waiting"),P(5)):L&&await chrome.storage.local.remove("github_device_flow_pending")}catch(j){console.error("Error checking pending device flow:",j)}};p.useEffect(()=>{if(C==="waiting"&&l>0)return W.current=setInterval(()=>{x(j=>j<=1?(clearInterval(W.current),v("error"),o("Authorization code expired. Please try again."),chrome.storage.local.remove("github_device_flow_pending"),0):j-1)},1e3),()=>clearInterval(W.current)},[C,l]);const z=async()=>{try{const j=await chrome.runtime.sendMessage({type:"GITHUB_GET_STATUS"});j?.success&&j.connected&&(s(!0),a(j.username||""),i(j.repo||"leetcode-solutions"),f({total:j.syncedCount||0,pending:0,failed:j.failedCount||0}))}catch(j){console.error("Failed to load connection status:",j)}},J=async()=>{try{const j=await chrome.storage.local.get(["synced_submissions","synced_problems","failed_syncs","recent_syncs"]);let L=j.synced_submissions||[];!j.synced_submissions&&j.synced_problems&&(L=j.synced_problems,await chrome.storage.local.set({synced_submissions:L})),f({total:L.length,pending:0,failed:(j.failed_syncs||[]).length}),b((j.recent_syncs||[]).slice(0,5))}catch(j){console.error("Error loading sync stats:",j)}},X=async()=>{o(""),w(""),v("loading");try{const j=await chrome.runtime.sendMessage({type:"GITHUB_DEVICE_CODE_REQUEST"});if(!j?.success){v("error"),j?.errorCode==="INVALID_CLIENT"?(o("GitHub OAuth not configured. Please use Personal Access Token instead."),k("pat")):o(j?.error||"Failed to start authentication");return}T(j.userCode),q(j.verificationUri),x(j.expiresIn),v("waiting");try{await navigator.clipboard.writeText(j.userCode),D(!0),setTimeout(()=>D(!1),3e3)}catch{console.log("Could not auto-copy code")}await chrome.storage.local.set({github_device_flow_pending:{userCode:j.userCode,verificationUri:j.verificationUri,expiresAt:Date.now()+j.expiresIn*1e3}}),chrome.runtime.sendMessage({type:"SHOW_NOTIFICATION",title:"GitHub Code: "+j.userCode,message:"Enter this code on GitHub to connect. Code copied to clipboard!"}),setTimeout(()=>{window.open(j.verificationUri,"_blank")},1500),P(j.interval||5)}catch(j){console.error("Device flow error:",j),v("error"),o(j.message||"Failed to start authentication")}},P=j=>{const L=j*1e3;Q.current=setInterval(async()=>{try{const G=await chrome.runtime.sendMessage({type:"GITHUB_DEVICE_POLL"});G?.success?(clearInterval(Q.current),v("success"),await R(G.token,G.username)):G?.shouldRetry?G?.errorCode==="SLOW_DOWN"&&G.interval&&(clearInterval(Q.current),P(G.interval)):(clearInterval(Q.current),v("error"),o(G?.error||"Authentication failed"))}catch(G){console.error("Poll error:",G)}},L)},R=async(j,L)=>{U(!0);try{console.log("üîß completeSetup called with:",{token:!!j,githubUsername:L});const G=await chrome.runtime.sendMessage({type:"GITHUB_ENSURE_REPO",token:j,username:L,repo:r});if(console.log("üì¶ GITHUB_ENSURE_REPO response:",G),!G?.success)throw new Error(G?.error||"Failed to setup repository");const xe=await chrome.runtime.sendMessage({type:"GITHUB_STORE_CREDENTIALS",token:j,username:L,repo:r});if(console.log("üì¶ GITHUB_STORE_CREDENTIALS response:",xe),!xe?.success)throw new Error(xe?.error||"Failed to store credentials");a(L),s(!0),v("idle"),await chrome.storage.local.remove("github_device_flow_pending"),console.log("üíæ Setting github_sync_enabled to true in storage"),await chrome.storage.local.set({github_sync_enabled:!0}),console.log("üì¢ Sending GITHUB_SYNC_ENABLED message"),chrome.runtime.sendMessage({type:"GITHUB_SYNC_ENABLED"}),J();const Ie=G.created?" (Repository created!)":"";w(`‚ú® Connected to github.com/${L}/${r}${Ie}`)}catch(G){console.error("‚ùå completeSetup failed:",G),o(G.message),v("error")}finally{U(!1)}},O=async()=>{Q.current&&clearInterval(Q.current),W.current&&clearInterval(W.current),await chrome.storage.local.remove("github_device_flow_pending"),v("idle"),T(""),q(""),o("")},re=async()=>{try{await navigator.clipboard.writeText(N),D(!0),setTimeout(()=>D(!1),2e3)}catch(j){console.error("Failed to copy:",j)}},de=async j=>{if(j.preventDefault(),o(""),w(""),!$||!r){o("Please enter both token and repository name");return}if(!ns($)){o("Invalid token format. Use a Personal Access Token (ghp_...) or Fine-grained token (github_pat_...)");return}K(!0);try{const L=await chrome.runtime.sendMessage({type:"GITHUB_VALIDATE_TOKEN",token:$});if(!L?.success)throw new Error(L?.error||"Token validation failed");await R($,L.username),S("")}catch(L){o(L.message)}finally{K(!1)}},ee=async()=>{A(!0),o("");try{const j=await chrome.runtime.sendMessage({type:"GITHUB_CLEAR_CREDENTIALS"});if(j?.success)s(!1),a(""),f({total:0,pending:0,failed:0}),b([]),w("Disconnected from GitHub"),await chrome.storage.local.set({github_sync_enabled:!1}),chrome.runtime.sendMessage({type:"GITHUB_SYNC_DISABLED"});else throw new Error(j?.error||"Failed to disconnect")}catch(j){o(j.message)}finally{A(!1)}},me=async()=>{try{w("Retrying failed syncs...");const j=await chrome.runtime.sendMessage({type:"RETRY_FAILED_SYNCS"});j?.success&&w(`Retried ${j.retried} syncs. ${j.failed} still failed.`),setTimeout(J,2e3)}catch{o("Failed to retry syncs")}},Le=j=>{const L=Math.floor(j/60),G=j%60;return`${L}:${G.toString().padStart(2,"0")}`},ne=C==="loading"||E||V;return e.jsxs("div",{className:"flex-1 overflow-y-auto scrollbar-hide p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-surface rounded-full flex items-center justify-center mx-auto mb-3 ring-2 ring-surfaceHover shadow-lg",children:e.jsx(te,{className:"w-8 h-8 text-text-main"})}),e.jsx("h2",{className:"text-xl font-bold text-text-main",children:"GitHub Auto-Sync"}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Automatically push accepted solutions to GitHub"})]}),h&&e.jsxs("div",{className:"p-3 bg-red-500/10 rounded-xl border border-red-500/20 text-sm text-red-400 animate-fade-in flex items-start gap-2",children:[e.jsx(ae,{className:"w-4 h-4 mt-0.5 shrink-0"}),e.jsx("span",{children:h})]}),u&&e.jsxs("div",{className:"p-3 bg-green-500/10 rounded-xl border border-green-500/20 text-sm text-green-400 animate-fade-in flex items-start gap-2",children:[e.jsx(oe,{className:"w-4 h-4 mt-0.5 shrink-0"}),e.jsx("span",{children:u})]}),t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-green-500/10 rounded-xl border border-green-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{className:"text-sm font-semibold text-green-400",children:"Connected"})]}),e.jsx("button",{onClick:ee,disabled:F,className:"text-xs text-text-muted hover:text-red-400 transition-colors disabled:opacity-50",children:F?"Disconnecting...":"Disconnect"})]}),e.jsxs("a",{href:`https://github.com/${n}/${r}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-text-main hover:text-primary transition-colors flex items-center gap-1",children:["github.com/",e.jsxs("span",{className:"font-mono text-primary",children:[n,"/",r]}),e.jsx(ue,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl p-4 text-center border border-primary/20 shadow-md",children:[e.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:d.total}),e.jsx("div",{className:"text-xs font-medium text-text-muted",children:"Synced"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-500/5 rounded-xl p-4 text-center border border-blue-500/20 shadow-md",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:d.pending}),e.jsx("div",{className:"text-xs font-medium text-text-muted",children:"Pending"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-500/10 to-red-500/5 rounded-xl p-4 text-center border border-red-500/20 shadow-md",children:[e.jsx("div",{className:"text-3xl font-bold text-red-400 mb-2",children:d.failed}),e.jsx("div",{className:"text-xs font-medium text-text-muted",children:"Failed"})]})]}),d.failed>0&&e.jsxs("button",{onClick:me,className:"w-full py-3 bg-red-500/10 hover:bg-red-500/20 border border-red-500/20 rounded-xl text-sm font-medium text-red-400 transition-all flex items-center justify-center gap-2",children:[e.jsx(Dt,{className:"w-4 h-4"}),"Retry ",d.failed," Failed Sync",d.failed!==1?"s":""]}),m.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-text-main mb-2",children:"Recent Syncs"}),e.jsx("div",{className:"space-y-2",children:m.map((j,L)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-surface rounded-xl border border-surfaceHover",children:[e.jsx("span",{className:`text-lg ${j.status==="success"?"text-green-400":"text-red-400"}`,children:j.status==="success"?"‚úì":"‚úó"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-text-main truncate",children:j.problemTitle}),e.jsx("div",{className:"text-xs text-text-muted",children:new Date(j.timestamp).toLocaleDateString()})]}),e.jsx("span",{className:"text-xs text-text-muted font-mono",children:j.language})]},L))})]}),e.jsxs("div",{className:"p-4 bg-surface/50 rounded-xl border border-surfaceHover",children:[e.jsxs("p",{className:"text-xs font-medium text-text-main mb-2 flex items-center gap-2",children:[e.jsx(ie,{className:"w-3.5 h-3.5 text-primary"}),"Auto-sync is active"]}),e.jsx("p",{className:"text-xs text-text-muted",children:"Your accepted solutions will be automatically pushed with runtime, memory stats, and organized by topic/difficulty."})]})]}):C==="waiting"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-surface rounded-xl p-6 border border-surfaceHover text-center",children:[e.jsx("p",{className:"text-sm text-text-muted mb-3",children:"Enter this code on GitHub:"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("code",{className:"text-3xl font-mono font-bold text-primary tracking-widest",children:N}),e.jsx("button",{onClick:re,className:"p-2 hover:bg-surfaceHover rounded-lg transition-colors",title:"Copy code",children:_?e.jsx(oe,{className:"w-5 h-5 text-green-400"}):e.jsx(at,{className:"w-5 h-5 text-text-muted"})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-text-muted mb-4",children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Expires in ",Le(l)]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-blue-400 mb-4",children:[e.jsx(se,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Waiting for authorization..."})]}),e.jsxs("a",{href:Y,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-primary hover:bg-primaryHover text-inverted rounded-lg font-medium transition-colors",children:[e.jsx(te,{className:"w-4 h-4"}),"Open GitHub",e.jsx(ue,{className:"w-3 h-3"})]})]}),e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:e.jsxs("ol",{className:"text-sm text-text-muted space-y-2 list-decimal list-inside",children:[e.jsx("li",{children:"GitHub should have opened in a new tab"}),e.jsx("li",{children:"Enter the code shown above"}),e.jsxs("li",{children:["Click ",e.jsx("span",{className:"text-green-400 font-medium",children:'"Authorize"'})]}),e.jsx("li",{children:"This page will update automatically"})]})}),e.jsxs("button",{onClick:O,className:"w-full py-3 bg-surface hover:bg-surfaceHover border border-surfaceHover rounded-xl text-sm font-medium text-text-muted transition-all flex items-center justify-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),"Cancel"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex bg-surface rounded-xl p-1 border border-surfaceHover",children:[e.jsxs("button",{onClick:()=>k("device"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${y==="device"?"bg-primary text-inverted":"text-text-muted hover:text-text-main"}`,children:[e.jsx(ie,{className:"w-4 h-4"}),"Quick Connect"]}),e.jsxs("button",{onClick:()=>k("pat"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${y==="pat"?"bg-primary text-inverted":"text-text-muted hover:text-text-main"}`,children:[e.jsx(pt,{className:"w-4 h-4"}),"Access Token"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"Repository Name"}),e.jsx("input",{type:"text",value:r,onChange:j=>i(j.target.value),placeholder:"leetcode-solutions",className:"w-full px-4 py-3 bg-surface border border-surfaceHover rounded-xl focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary text-text-main placeholder-text-muted text-sm",disabled:ne}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Repository will be created if it doesn't exist"})]}),y==="device"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Lt,{className:"w-5 h-5 text-green-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-400 mb-1",children:"Recommended Method"}),e.jsx("p",{className:"text-xs text-text-muted",children:"Sign in with your GitHub account. No need to create or copy any tokens manually."})]})]})}),e.jsx("button",{onClick:X,disabled:ne||!r,className:"w-full py-3 bg-primary hover:bg-primaryHover text-inverted font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-primary/20 flex items-center justify-center gap-2",children:C==="loading"?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-4 h-4 animate-spin"}),"Starting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4"}),"Connect with GitHub"]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>c(!g),className:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-blue-500/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{className:"text-sm font-semibold text-blue-400",children:"How to get a token?"})]}),g?e.jsx(Ke,{className:"w-4 h-4 text-blue-400"}):e.jsx(We,{className:"w-4 h-4 text-blue-400"})]}),g&&e.jsxs("div",{className:"px-4 pb-4 space-y-4 text-sm text-text-muted animate-fade-in",children:[e.jsxs("ol",{className:"space-y-2 list-decimal list-inside",children:[e.jsx("li",{children:"Click the button below to open GitHub settings"}),e.jsxs("li",{children:["Check the ",e.jsx("code",{className:"px-1.5 py-0.5 bg-surface rounded text-primary",children:"repo"})," scope"]}),e.jsx("li",{children:'Click "Generate token" at the bottom'}),e.jsxs("li",{children:["Copy the token (starts with ",e.jsx("code",{className:"px-1.5 py-0.5 bg-surface rounded",children:"ghp_"}),")"]})]}),e.jsxs("a",{href:"https://github.com/settings/tokens/new?scopes=repo&description=LeetStreak%20Auto-Sync",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-lg transition-colors justify-center font-medium",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Open GitHub Token Settings"}),e.jsx(ue,{className:"w-3 h-3"})]})]})]}),e.jsxs("form",{onSubmit:de,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-main mb-2",children:"Personal Access Token"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:M?"text":"password",value:$,onChange:j=>S(j.target.value),placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",className:"w-full px-4 py-3 bg-surface border border-surfaceHover rounded-xl focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary text-text-main placeholder-text-muted text-sm pr-12",disabled:ne}),e.jsx("button",{type:"button",onClick:()=>I(!M),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-main",children:M?"üëÅÔ∏è":"üëÅÔ∏è‚Äçüó®Ô∏è"})]})]}),e.jsx("button",{type:"submit",disabled:ne||!$||!r,className:"w-full py-3 bg-primary hover:bg-primaryHover text-inverted font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-primary/20 flex items-center justify-center gap-2",children:E||V?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-4 h-4"}),"Connect with Token"]})})]})]}),e.jsxs("div",{className:"p-4 bg-surface/50 rounded-xl border border-surfaceHover",children:[e.jsxs("p",{className:"text-xs font-medium text-text-main mb-2 flex items-center gap-2",children:[e.jsx(mt,{className:"w-3.5 h-3.5"}),"How it works:"]}),e.jsxs("ul",{className:"text-xs text-text-muted space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Captures your code when you submit"}),e.jsx("li",{children:'Waits for "Accepted" status'}),e.jsx("li",{children:"Pushes to GitHub with runtime/memory stats"}),e.jsx("li",{children:"Organized by topic and difficulty"})]})]})]})]})}function _e({title:t,message:s,confirmText:n,cancelText:a,onConfirm:r,onCancel:i,isDangerous:d}){return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface rounded-2xl shadow-2xl max-w-sm w-full border border-surfaceHover/50 animate-fade-in",children:[e.jsxs("div",{className:`flex items-center gap-3 p-6 border-b ${d?"border-red-500/20 bg-red-500/5":"border-surfaceHover/30"}`,children:[e.jsx("div",{className:`p-3 rounded-full ${d?"bg-red-500/20":"bg-orange-500/20"}`,children:e.jsx(ae,{className:`w-5 h-5 ${d?"text-red-400":"text-orange-400"}`})}),e.jsx("h3",{className:"text-lg font-bold text-text-main flex-1",children:t}),e.jsx("button",{onClick:i,className:"p-1 hover:bg-surfaceHover rounded-lg transition-colors",children:e.jsx(be,{className:"w-4 h-4 text-text-muted"})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-text-muted text-sm leading-relaxed",children:s})}),e.jsxs("div",{className:"flex gap-3 p-6 border-t border-surfaceHover/30 bg-surface/50",children:[e.jsx("button",{onClick:i,className:"flex-1 py-3 px-4 bg-surface hover:bg-surfaceHover border border-surfaceHover/50 text-text-main rounded-lg font-medium transition-all",children:a}),e.jsx("button",{onClick:r,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all text-white shadow-lg ${d?"bg-red-600 hover:bg-red-700 active:scale-95":"bg-orange-600 hover:bg-orange-700 active:scale-95"}`,children:n})]})]})})}function Ps({onBack:t,theme:s,onThemeChange:n}){const[a,r]=p.useState(!0),[i,d]=p.useState("all"),[f,m]=p.useState(!0),[b,y]=p.useState(30),[k,g]=p.useState(""),[c,h]=p.useState(!1),[o,u]=p.useState(!1);p.useEffect(()=>{chrome.storage.local.get(["my_leetcode_username","notifications_enabled","notification_frequency","auto_sync_enabled","auto_sync_interval"],l=>{l.my_leetcode_username&&g(l.my_leetcode_username),l.notifications_enabled!==void 0&&r(l.notifications_enabled),l.notification_frequency&&d(l.notification_frequency),l.auto_sync_enabled!==void 0&&m(l.auto_sync_enabled),l.auto_sync_interval&&y(l.auto_sync_interval)})},[]);const w=l=>{chrome.storage.local.set({theme:l}),n(l),document.documentElement.setAttribute("data-theme",l)},C=()=>{const l=!a;r(l),chrome.storage.local.set({notifications_enabled:l})},v=l=>{d(l),chrome.storage.local.set({notification_frequency:l})},N=()=>{const l=!f;m(l),chrome.storage.local.set({auto_sync_enabled:l})},T=l=>{y(l),chrome.storage.local.set({auto_sync_interval:l})},Y=async()=>{u(!1);const{clearAllData:l}=await Ue(async()=>{const{clearAllData:x}=await import("./storage-CQGCbfl-.js");return{clearAllData:x}},[],import.meta.url);await l(),window.location.reload()},q=async()=>{h(!1),await chrome.storage.local.remove(["my_leetcode_username","friends"]),window.location.reload()};return e.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-background via-background to-surface/20",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-surfaceHover/50 bg-surface/95 backdrop-blur-md sticky top-0",children:[e.jsx("button",{onClick:t,className:"p-2 hover:bg-surfaceHover rounded-lg transition-colors",title:"Go back",children:e.jsx(Ve,{className:"w-5 h-5 text-primary"})}),e.jsx("h2",{className:"text-lg font-bold text-text-main flex-1",children:"Settings"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-bold text-text-muted uppercase tracking-wide",children:"Account"}),e.jsxs("div",{className:"bg-surface/50 rounded-lg p-4 border border-surfaceHover/30",children:[e.jsx("p",{className:"text-xs text-text-muted mb-1",children:"Connected Account"}),e.jsx("p",{className:"text-lg font-semibold text-text-main",children:k||"Not set"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-bold text-text-muted uppercase tracking-wide",children:"Appearance"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>w("dark"),className:`w-full flex items-center justify-between p-4 rounded-lg border-2 transition-all ${s==="dark"?"bg-surface border-primary shadow-lg shadow-primary/20":"bg-surface/50 border-surfaceHover/30 hover:border-surfaceHover/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(kt,{className:`w-5 h-5 ${s==="dark"?"text-primary":"text-text-muted"}`}),e.jsx("span",{className:`font-medium ${s==="dark"?"text-primary":"text-text-main"}`,children:"Dark Mode"})]}),s==="dark"&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"})]}),e.jsxs("button",{onClick:()=>w("light"),className:`w-full flex items-center justify-between p-4 rounded-lg border-2 transition-all ${s==="light"?"bg-surface border-primary shadow-lg shadow-primary/20":"bg-surface/50 border-surfaceHover/30 hover:border-surfaceHover/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rt,{className:`w-5 h-5 ${s==="light"?"text-primary":"text-text-muted"}`}),e.jsx("span",{className:`font-medium ${s==="light"?"text-primary":"text-text-main"}`,children:"Light Mode"})]}),s==="light"&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-text-muted uppercase tracking-wide",children:"Notifications"}),e.jsxs("button",{onClick:C,className:"w-full flex items-center justify-between p-4 bg-surface/50 hover:bg-surface/70 rounded-xl border border-surfaceHover/30 transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg transition-all ${a?"bg-primary/20":"bg-surfaceHover/50"}`,children:e.jsx(he,{className:`w-4 h-4 ${a?"text-primary":"text-text-muted"}`})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-semibold text-text-main",children:"Notifications"}),e.jsx("p",{className:"text-xs text-text-muted",children:a?"Enabled":"Disabled"})]})]}),e.jsx("div",{className:`relative inline-flex items-center w-12 h-7 rounded-full transition-all duration-300 ${a?"bg-primary":"bg-surfaceHover"}`,children:e.jsx("div",{className:`absolute w-5 h-5 bg-white rounded-full shadow-md transition-all duration-300 ${a?"right-1":"left-1"}`})})]}),a&&e.jsx("div",{className:"bg-surface/30 rounded-2xl p-5 border border-surfaceHover/20 backdrop-blur-sm space-y-4 animate-fade-in",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-semibold text-text-main",children:"Notification Frequency"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full font-medium ${i==="all"?"bg-primary/20 text-primary":i==="important"?"bg-orange-500/20 text-orange-600 dark:text-orange-400":"bg-text-muted/20 text-text-muted"}`,children:i==="all"?"All Updates":i==="important"?"Important":"Minimal"})})]}),e.jsxs("div",{className:"relative space-y-2",children:[e.jsx("input",{type:"range",min:"0",max:"2",step:"1",value:i==="all"?0:i==="important"?1:2,onChange:l=>{const x=parseInt(l.target.value);v(x===0?"all":x===1?"important":"minimal")},className:"w-full h-2 bg-gradient-to-r from-primary via-orange-500 to-gray-500 rounded-full appearance-none cursor-pointer transition-all",style:{WebkitAppearance:"none",outline:"none"}}),e.jsxs("div",{className:"flex justify-between text-xs text-text-muted font-medium px-1",children:[e.jsx("span",{children:"All"}),e.jsx("span",{children:"Important"}),e.jsx("span",{children:"Minimal"})]})]}),e.jsxs("p",{className:"text-xs text-text-muted leading-relaxed",children:[i==="all"&&"üîî Get notified for every milestone, achievement, and friend update",i==="important"&&"‚≠ê Only major streaks and top 3 leaderboard changes",i==="minimal"&&"üîï Only critical alerts and important events"]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-text-muted uppercase tracking-wide",children:"Sync Settings"}),e.jsxs("button",{onClick:N,className:"w-full flex items-center justify-between p-4 bg-surface/50 hover:bg-surface/70 rounded-xl border border-surfaceHover/30 transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg transition-all ${f?"bg-primary/20":"bg-surfaceHover/50"}`,children:e.jsx(Ht,{className:`w-4 h-4 ${f?"text-primary":"text-text-muted"}`})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-semibold text-text-main",children:"Auto-Sync"}),e.jsx("p",{className:"text-xs text-text-muted",children:f?"Enabled":"Disabled"})]})]}),e.jsx("div",{className:`relative inline-flex items-center w-12 h-7 rounded-full transition-all duration-300 ${f?"bg-primary":"bg-surfaceHover"}`,children:e.jsx("div",{className:`absolute w-5 h-5 bg-white rounded-full shadow-md transition-all duration-300 ${f?"right-1":"left-1"}`})})]}),f&&e.jsx("div",{className:"bg-surface/30 rounded-2xl p-5 border border-surfaceHover/20 backdrop-blur-sm space-y-4 animate-fade-in",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-semibold text-text-main",children:"Sync Frequency"}),e.jsxs("span",{className:"text-sm font-bold text-primary bg-primary/10 px-3 py-1.5 rounded-full",children:["Every ",b,"m"]})]}),e.jsxs("div",{className:"relative space-y-3",children:[e.jsx("input",{type:"range",min:"15",max:"60",step:"5",value:b,onChange:l=>T(parseInt(l.target.value)),className:"w-full h-2 bg-gradient-to-r from-primary to-primary/50 rounded-full appearance-none cursor-pointer transition-all",style:{WebkitAppearance:"none",outline:"none"}}),e.jsxs("div",{className:"flex justify-between text-xs text-text-muted font-medium px-1",children:[e.jsx("span",{children:"15m"}),e.jsx("span",{children:"30m"}),e.jsx("span",{children:"45m"}),e.jsx("span",{children:"60m"})]})]}),e.jsxs("div",{className:"bg-primary/5 rounded-lg p-3 space-y-1.5",children:[e.jsxs("p",{className:"text-xs font-medium text-primary flex items-center gap-2",children:[e.jsx("span",{children:"‚ö°"})," Smart Sync"]}),e.jsxs("p",{className:"text-xs text-text-muted leading-relaxed",children:["Syncs every ",b," minutes to keep your friend's stats up to date while conserving battery"]})]})]})})]}),e.jsxs("div",{className:"space-y-3 pt-6 border-t border-surfaceHover/30",children:[e.jsx("h3",{className:"text-sm font-bold text-text-muted uppercase tracking-wide",children:"Danger Zone"}),e.jsx("button",{onClick:()=>h(!0),className:"w-full flex items-center justify-between p-4 bg-orange-500/10 border-2 border-orange-500/30 rounded-xl hover:bg-orange-500/15 hover:border-orange-500/50 transition-all group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500/20 rounded-lg group-hover:scale-110 transition-transform",children:e.jsx(vt,{className:"w-4 h-4 text-orange-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold text-orange-400 text-sm",children:"Logout"}),e.jsx("p",{className:"text-xs text-orange-400/60",children:"Exit your account"})]})]})}),e.jsx("button",{onClick:()=>u(!0),className:"w-full flex items-center justify-between p-4 bg-red-500/10 border-2 border-red-500/30 rounded-xl hover:bg-red-500/15 hover:border-red-500/50 transition-all group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-500/20 rounded-lg group-hover:scale-110 transition-transform",children:e.jsx(ae,{className:"w-4 h-4 text-red-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold text-red-400 text-sm",children:"Clear All Data"}),e.jsx("p",{className:"text-xs text-red-400/60",children:"Cannot be undone"})]})]})})]})]}),c&&e.jsx(_e,{title:"Logout?",message:"You'll be logged out and can set up your account again later. Your extension will reset to the welcome screen.",confirmText:"Logout",cancelText:"Cancel",onConfirm:q,onCancel:()=>h(!1),isDangerous:!1}),o&&e.jsx(_e,{title:"Clear All Data?",message:"This will permanently delete all your friends list, settings, cache, and stored data. This action cannot be undone. You'll need to set up your account again.",confirmText:"Clear Data",cancelText:"Cancel",onConfirm:Y,onCancel:()=>u(!1),isDangerous:!0}),e.jsx("style",{children:`
        /* Modern Apple-like Slider Styling */
        input[type='range'] {
          -webkit-appearance: none;
          appearance: none;
          width: 100%;
          height: 6px;
          border-radius: 999px;
          outline: none;
          cursor: pointer;
          transition: all 0.3s ease;
        }

        /* Thumb/Handle Styling */
        input[type='range']::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
          width: 20px;
          height: 20px;
          border-radius: 50%;
          background: white;
          cursor: pointer;
          box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
          border: 2px solid #3b82f6;
          transition: all 0.2s ease;
        }

        input[type='range']::-webkit-slider-thumb:hover {
          width: 22px;
          height: 22px;
          box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        input[type='range']::-webkit-slider-thumb:active {
          transform: scale(0.95);
        }

        input[type='range']::-moz-range-thumb {
          width: 20px;
          height: 20px;
          border-radius: 50%;
          background: white;
          cursor: pointer;
          box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
          border: 2px solid #3b82f6;
          transition: all 0.2s ease;
        }

        input[type='range']::-moz-range-thumb:hover {
          width: 22px;
          height: 22px;
          box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        input[type='range']::-moz-range-track {
          background: transparent;
          border: none;
        }

        /* Smooth animation for fade-in */
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-8px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .animate-fade-in {
          animation: fadeIn 0.3s ease-out;
        }
      `})]})}function Rs(){const[t,s]=p.useState({}),[n,a]=p.useState(!1),[r,i]=p.useState(!1),[d,f]=p.useState(null),[m,b]=p.useState("streak"),[y,k]=p.useState("streak"),[g,c]=p.useState(null),[h,o]=p.useState(!1),[u,w]=p.useState(""),[C,v]=p.useState(!1),[N,T]=p.useState(""),[Y,q]=p.useState(!1),[l,x]=p.useState("dark"),[_,D]=p.useState([]),[$,S]=p.useState(!0),[M,I]=p.useState(!1),[E,K]=p.useState(!1);p.useEffect(()=>{if(typeof chrome>"u"||!chrome.runtime){console.error("Chrome runtime not available"),f("Extension context not available"),a(!1);return}console.log("Chrome runtime available, initializing..."),(async()=>{try{console.log("Starting app initialization...");const O=await chrome.storage.local.get(["theme","my_leetcode_username","unread_notifications"]);console.log("Storage data retrieved:",{hasTheme:!!O.theme,hasUsername:!!O.my_leetcode_username});const re=O.theme||"dark";if(x(re),document.documentElement.setAttribute("data-theme",re),O.unread_notifications&&Array.isArray(O.unread_notifications)){const de=Date.now()-864e5,ee=O.unread_notifications.filter(me=>me.timestamp>de);ee.length!==O.unread_notifications.length&&chrome.storage.local.set({unread_notifications:ee}).catch(console.error),ee.length>0&&D(ee)}O.my_leetcode_username?(console.log("Username found, fetching friends..."),c(O.my_leetcode_username),await F()):(console.log("No username, showing setup mode"),o(!0),a(!1)),I(!0),K(!1)}catch(O){console.error("Error initializing app:",O),f(`Initialization error: ${O.message}`),o(!1),a(!1)}})();const R=setTimeout(()=>{!M&&$&&(console.log("Data loading taking long..."),K(!0))},4e3);return()=>clearTimeout(R)},[]);const V=async P=>{const R=_.filter(O=>O.id!==P);D(R);try{await chrome.storage.local.set({unread_notifications:R})}catch(O){console.error("Error clearing notification:",O)}},U=async P=>{if(P.preventDefault(),!u.trim()){T("Please enter your LeetCode username");return}v(!0),T("");try{const R=await chrome.runtime.sendMessage({type:"ADD_FRIEND",username:u.trim()});R.success?(await chrome.storage.local.set({my_leetcode_username:u.trim()}),c(u.trim()),o(!1),await new Promise(O=>setTimeout(O,500)),await F()):T(R.error||"Failed to verify username")}catch(R){console.error("Error during setup:",R),T("Failed to verify username. Please try again.")}finally{v(!1)}},F=async(P=!1)=>{try{a(!0),P&&i(!0),f(null);const R=await chrome.runtime.sendMessage({type:"FETCH_STATS",forceRefresh:P});R.success?s(R.friends):f(R.error||"Failed to fetch data")}catch(R){console.error("Error fetching friends:",R),f("Failed to connect to background service")}finally{a(!1),i(!1)}},A=()=>{F(!0)},Q=()=>{F(!0)},W=async()=>{const P=l==="dark"?"light":"dark";x(P),document.documentElement.setAttribute("data-theme",P);try{await chrome.storage.local.set({theme:P})}catch(R){console.error("Error saving theme:",R)}},B=Object.values(t),z=g?t[g.toLowerCase()]:null;console.log("myUsername:",g),console.log("friends keys:",Object.keys(t)),console.log("myData found:",z?"yes":"no");const J=z?.stats?.streak||0,X=z!=null;return h?(console.log("Rendering setup mode"),e.jsx("div",{className:"w-[400px] h-[600px] bg-background flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center max-w-sm w-full animate-fade-in mx-auto",children:[e.jsx("div",{className:"w-24 h-24 bg-surface rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg ring-4 ring-surfaceHover",children:e.jsx(ge,{className:"w-12 h-12 text-primary animate-bounce-slow"})}),e.jsx("h1",{className:"text-2xl font-bold text-text-main mb-2 text-center",children:"Welcome to LeetStreak!"}),e.jsx("p",{className:"text-sm text-text-muted mb-8 text-center mx-auto",children:"Enter your LeetCode username to track your coding journey and streaks"}),e.jsxs("form",{onSubmit:U,className:"space-y-4 w-full",children:[e.jsx("div",{className:"relative group w-full",children:e.jsx("input",{type:"text",value:u,onChange:P=>w(P.target.value),placeholder:"Your LeetCode username",disabled:C,className:"w-full px-4 py-4 bg-surface border-2 border-surfaceHover rounded-2xl focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary text-text-main placeholder-text-muted transition-all duration-300 text-center font-medium disabled:opacity-50",autoFocus:!0})}),N&&e.jsx("div",{className:"p-3 bg-red-500/10 rounded-xl border border-red-500/20 text-sm text-red-400 animate-shake text-center w-full",children:N}),e.jsx("button",{type:"submit",disabled:C,className:"w-full py-4 bg-primary hover:bg-primaryHover text-inverted font-bold rounded-2xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-primary/20 active:scale-95",children:e.jsx("span",{className:"flex items-center justify-center gap-2",children:C?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx($e,{className:"w-4 h-4"})," Get Started"]})})})]}),e.jsx("p",{className:"mt-6 text-xs text-text-muted text-center mx-auto",children:"We'll fetch your LeetCode stats and start tracking your progress"})]})})):(console.log("Rendering main app - loading:",n,"error:",d,"hasData:",X),e.jsxs(e.Fragment,{children:[$&&e.jsx(js,{onVideoEnd:()=>S(!1),showLoadingMessage:E}),e.jsxs("div",{className:"w-[400px] h-[600px] bg-gradient-to-br from-background via-background to-surface/20 flex flex-col overflow-hidden text-text-main",children:[n?e.jsx(Xt,{count:3}):d?e.jsx("div",{className:"flex-1 flex items-center justify-center p-6 animate-fade-in",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ut,{className:"w-16 h-16 text-text-muted mb-3 animate-bounce-slow mx-auto"}),e.jsx("p",{className:"text-red-400 font-semibold mb-2",children:"Oops!"}),e.jsx("p",{className:"text-sm text-text-muted mb-6",children:d}),e.jsx("button",{onClick:()=>F(),className:"px-6 py-2 bg-primary hover:bg-primaryHover text-inverted font-medium rounded-full transition-colors shadow-lg hover:shadow-primary/20",children:"Try Again"})]})}):X?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex border-b border-surfaceHover/50 bg-surface/95 backdrop-blur-md sticky top-0 z-10 shadow-lg",children:[e.jsxs("div",{className:"flex flex-1 gap-0 px-2",children:[e.jsxs("button",{onClick:()=>{k("leaderboard"),b("leaderboard")},className:`flex-1 py-3.5 px-2 text-sm font-medium transition-all duration-200 relative group ${m==="leaderboard"?"text-primary":"text-text-muted hover:text-text-main"}`,children:[e.jsx(Qt,{className:`w-5 h-5 mx-auto mb-1.5 transition-transform duration-200 ${m==="leaderboard"?"scale-110":"group-hover:scale-105"}`}),e.jsx("span",{className:"text-[11px] font-semibold",children:"Friends"}),m==="leaderboard"&&e.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent"})]}),e.jsxs("button",{onClick:()=>{k("streak"),b("streak")},className:`flex-1 py-3.5 px-2 text-sm font-medium transition-all duration-200 relative group ${m==="streak"?"text-primary":"text-text-muted hover:text-text-main"}`,children:[e.jsx(Gt,{className:`w-5 h-5 mx-auto mb-1.5 transition-transform duration-200 ${m==="streak"?"scale-110":"group-hover:scale-105"}`}),e.jsx("span",{className:"text-[11px] font-semibold",children:"Progress"}),m==="streak"&&e.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent"})]}),e.jsxs("button",{onClick:()=>{k("analytics"),b("analytics")},className:`flex-1 py-3.5 px-2 text-sm font-medium transition-all duration-200 relative group ${m==="analytics"?"text-primary":"text-text-muted hover:text-text-main"}`,children:[e.jsx(pe,{className:`w-5 h-5 mx-auto mb-1.5 transition-transform duration-200 ${m==="analytics"?"scale-110":"group-hover:scale-105"}`}),e.jsx("span",{className:"text-[11px] font-semibold",children:"Analytics"}),m==="analytics"&&e.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent"})]}),e.jsxs("button",{onClick:()=>{k("github"),b("github")},className:`flex-1 py-3.5 px-2 text-sm font-medium transition-all duration-200 relative group ${m==="github"?"text-primary":"text-text-muted hover:text-text-main"}`,children:[e.jsx(te,{className:`w-5 h-5 mx-auto mb-1.5 transition-transform duration-200 ${m==="github"?"scale-110":"group-hover:scale-105"}`}),e.jsx("span",{className:"text-[11px] font-semibold",children:"GitHub"}),m==="github"&&e.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 pr-2",children:[e.jsx("button",{onClick:W,className:"p-2.5 text-text-muted hover:text-primary transition-all duration-200 hover:bg-surfaceHover/50 rounded-lg",title:"Toggle Theme",children:l==="dark"?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),e.jsx("button",{onClick:()=>q(!0),className:"p-2.5 text-text-muted hover:text-primary transition-all duration-200 hover:bg-surfaceHover/50 rounded-lg",title:"Notification Settings",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})]})]}),e.jsx(ys,{isOpen:Y,onClose:()=>q(!1)}),e.jsx("div",{className:"flex-1 overflow-hidden bg-background flex flex-col pb-10",children:m==="settings"?e.jsx(Ps,{onBack:()=>b("streak"),theme:l,onThemeChange:x}):m==="streak"?X?e.jsx(us,{friends:[z],currentStreak:J,onRefresh:A,refreshing:r}):e.jsx("div",{className:"flex items-center justify-center h-full p-8 text-center",children:e.jsxs("div",{children:[e.jsx(ve,{className:"w-20 h-20 text-primary mb-4 animate-pulse mx-auto"}),e.jsx("p",{className:"text-text-muted mb-4",children:"Loading your progress..."}),e.jsx("button",{onClick:A,className:"px-4 py-2 bg-primary text-inverted rounded-full text-sm font-medium",children:"Refresh"})]})}):m==="analytics"?z?e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-hide",children:[z.submissionCalendar&&e.jsx(zs,{submissionCalendar:typeof z.submissionCalendar=="string"?JSON.parse(z.submissionCalendar):z.submissionCalendar}),e.jsx(Fs,{userData:z,friendsData:B.filter(P=>P.username!==g)})]}):e.jsx("div",{className:"flex items-center justify-center h-full p-8 text-center",children:e.jsxs("div",{children:[e.jsx(pe,{className:"w-20 h-20 text-primary mb-4 animate-pulse mx-auto"}),e.jsx("p",{className:"text-text-muted mb-4",children:"Loading analytics data..."}),e.jsx("button",{onClick:A,className:"px-4 py-2 bg-primary text-inverted rounded-full text-sm font-medium",children:"Refresh"})]})}):m==="github"?e.jsx(Us,{}):e.jsxs(e.Fragment,{children:[e.jsx(Zt,{onFriendAdded:Q}),e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide",children:e.jsx(Ms,{friends:B,myData:z,myUsername:g,onRefresh:A})})]})})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[e.jsx("div",{className:"w-20 h-20 bg-surface rounded-full flex items-center justify-center mb-6 ring-2 ring-surfaceHover",children:e.jsx(ve,{className:"w-16 h-16 text-primary animate-pulse-slow"})}),e.jsx("h3",{className:"text-xl font-bold text-text-main mb-2",children:"Loading Your Data"}),e.jsx("p",{className:"text-sm text-text-muted mb-8 max-w-xs",children:"Fetching your LeetCode stats..."}),e.jsx("button",{onClick:A,className:"px-6 py-3 bg-primary hover:bg-primaryHover text-inverted rounded-2xl font-semibold transition-all shadow-lg hover:shadow-primary/20",children:"Refresh"})]}),e.jsx(vs,{notifications:_,onDismiss:V}),e.jsx(Pe,{onSettingsClick:()=>{m==="settings"?b(y):(k(m),b("settings"))}})]})]}))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",He):He();function He(){const t=document.getElementById("root");t?Re.createRoot(t).render(e.jsx(Oe.StrictMode,{children:e.jsx(Rs,{})})):console.error("Root element not found!")}
